/**
 * @license
 *
 * Copyright 2022 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
(function (global, factory) {
    const isCommonjs = typeof exports === 'object' && typeof module !== 'undefined';
    
    if (isCommonjs) {
      return factory(exports);
    }
    
    const isAmd = typeof define === 'function' && define.amd;

    if (isAmd) {
      return define(['exports'], factory);
    }

    global = typeof globalThis !== 'undefined' ? globalThis : global || self;
    factory(global.CoveoHeadlessCaseAssist = {});
  })(this, (function (exports) { 'use strict';
var Xd=Object.create;var Or=Object.defineProperty;var ef=Object.getOwnPropertyDescriptor;var tf=Object.getOwnPropertyNames;var rf=Object.getPrototypeOf,nf=Object.prototype.hasOwnProperty;var ci=e=>Or(e,"__esModule",{value:!0});var ae=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),of=(e,t)=>{ci(e);for(var r in t)Or(e,r,{get:t[r],enumerable:!0})},af=(e,t,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of tf(t))!nf.call(e,n)&&n!=="default"&&Or(e,n,{get:()=>t[n],enumerable:!(r=ef(t,n))||r.enumerable});return e},me=e=>af(ci(Or(e!=null?Xd(rf(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var _i=ae((_v,Bi)=>{Bi.exports=fetch});var Hi=ae(or=>{"use strict";var Hr=or&&or.__assign||function(){return Hr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Hr.apply(this,arguments)};Object.defineProperty(or,"__esModule",{value:!0});var Kf={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};function Gf(e){var t=Hr(Hr({},Kf),e);return t.numOfAttempts<1&&(t.numOfAttempts=1),t}or.getSanitizedOptions=Gf});var zi=ae(Ko=>{"use strict";Object.defineProperty(Ko,"__esModule",{value:!0});function Jf(e){var t=Math.random()*e;return Math.round(t)}Ko.fullJitter=Jf});var Wi=ae(Go=>{"use strict";Object.defineProperty(Go,"__esModule",{value:!0});function Zf(e){return e}Go.noJitter=Zf});var Yi=ae(Jo=>{"use strict";Object.defineProperty(Jo,"__esModule",{value:!0});var Xf=zi(),ep=Wi();function tp(e){switch(e.jitter){case"full":return Xf.fullJitter;case"none":default:return ep.noJitter}}Jo.JitterFactory=tp});var Xo=ae(Zo=>{"use strict";Object.defineProperty(Zo,"__esModule",{value:!0});var rp=Yi(),np=function(){function e(t){this.options=t,this.attempt=0}return e.prototype.apply=function(){var t=this;return new Promise(function(r){return setTimeout(r,t.jitteredDelay)})},e.prototype.setAttemptNumber=function(t){this.attempt=t},Object.defineProperty(e.prototype,"jitteredDelay",{get:function(){var t=rp.JitterFactory(this.options);return t(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){var t=this.options.startingDelay,r=this.options.timeMultiple,n=this.numOfDelayedAttempts,o=t*Math.pow(r,n);return Math.min(o,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),e}();Zo.Delay=np});var Ki=ae(Ke=>{"use strict";var op=Ke&&Ke.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ap=Ke&&Ke.__awaiter||function(e,t,r,n){function o(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function s(d){try{c(n.next(d))}catch(l){i(l)}}function u(d){try{c(n.throw(d))}catch(l){i(l)}}function c(d){d.done?a(d.value):o(d.value).then(s,u)}c((n=n.apply(e,t||[])).next())})},ip=Ke&&Ke.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(c){return function(d){return u([c,d])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=c[0]&2?o.return:c[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,c[1])).done)return a;switch(o=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,o=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],o=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(Ke,"__esModule",{value:!0});var sp=Xo(),cp=function(e){op(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.apply=function(){return ap(this,void 0,void 0,function(){return ip(this,function(r){return[2,this.isFirstAttempt?!0:e.prototype.apply.call(this)]})})},Object.defineProperty(t.prototype,"isFirstAttempt",{get:function(){return this.attempt===0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),t}(sp.Delay);Ke.SkipFirstDelay=cp});var Gi=ae(ar=>{"use strict";var up=ar&&ar.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(ar,"__esModule",{value:!0});var lp=Xo(),dp=function(e){up(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(lp.Delay);ar.AlwaysDelay=dp});var Ji=ae(ea=>{"use strict";Object.defineProperty(ea,"__esModule",{value:!0});var fp=Ki(),pp=Gi();function mp(e,t){var r=gp(e);return r.setAttemptNumber(t),r}ea.DelayFactory=mp;function gp(e){return e.delayFirstAttempt?new pp.AlwaysDelay(e):new fp.SkipFirstDelay(e)}});var Zi=ae(vt=>{"use strict";var ta=vt&&vt.__awaiter||function(e,t,r,n){function o(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function s(d){try{c(n.next(d))}catch(l){i(l)}}function u(d){try{c(n.throw(d))}catch(l){i(l)}}function c(d){d.done?a(d.value):o(d.value).then(s,u)}c((n=n.apply(e,t||[])).next())})},ra=vt&&vt.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(c){return function(d){return u([c,d])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=c[0]&2?o.return:c[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,c[1])).done)return a;switch(o=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,o=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],o=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(vt,"__esModule",{value:!0});var hp=Hi(),yp=Ji();function Sp(e,t){return t===void 0&&(t={}),ta(this,void 0,void 0,function(){var r,n;return ra(this,function(o){switch(o.label){case 0:return r=hp.getSanitizedOptions(t),n=new vp(e,r),[4,n.execute()];case 1:return[2,o.sent()]}})})}vt.backOff=Sp;var vp=function(){function e(t,r){this.request=t,this.options=r,this.attemptNumber=0}return e.prototype.execute=function(){return ta(this,void 0,void 0,function(){var t,r;return ra(this,function(n){switch(n.label){case 0:if(this.attemptLimitReached)return[3,7];n.label=1;case 1:return n.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return n.sent(),[4,this.request()];case 3:return[2,n.sent()];case 4:return t=n.sent(),this.attemptNumber++,[4,this.options.retry(t,this.attemptNumber)];case 5:if(r=n.sent(),!r||this.attemptLimitReached)throw t;return[3,6];case 6:return[3,0];case 7:throw new Error("Something went wrong.")}})})},Object.defineProperty(e.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),e.prototype.applyDelay=function(){return ta(this,void 0,void 0,function(){var t;return ra(this,function(r){switch(r.label){case 0:return t=yp.DelayFactory(this.options,this.attemptNumber),[4,t.apply()];case 1:return r.sent(),[2]}})})},e}()});var kt=ae((oa,aa)=>{(function(e,t){typeof oa=="object"&&typeof aa!="undefined"?aa.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self).dayjs=t()})(oa,function(){"use strict";var e=1e3,t=6e4,r=36e5,n="millisecond",o="second",a="minute",i="hour",s="day",u="week",c="month",d="quarter",l="year",p="date",f="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,S=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,P={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},q=function(A,y,b){var F=String(A);return!F||F.length>=y?A:""+Array(y+1-F.length).join(b)+A},D={s:q,z:function(A){var y=-A.utcOffset(),b=Math.abs(y),F=Math.floor(b/60),R=b%60;return(y<=0?"+":"-")+q(F,2,"0")+":"+q(R,2,"0")},m:function A(y,b){if(y.date()<b.date())return-A(b,y);var F=12*(b.year()-y.year())+(b.month()-y.month()),R=y.clone().add(F,c),k=b-R<0,T=y.clone().add(F+(k?-1:1),c);return+(-(F+(b-R)/(k?R-T:T-R))||0)},a:function(A){return A<0?Math.ceil(A)||0:Math.floor(A)},p:function(A){return{M:c,y:l,w:u,d:s,D:p,h:i,m:a,s:o,ms:n,Q:d}[A]||String(A||"").toLowerCase().replace(/s$/,"")},u:function(A){return A===void 0}},E="en",V={};V[E]=P;var _=function(A){return A instanceof I},z=function(A,y,b){var F;if(!A)return E;if(typeof A=="string")V[A]&&(F=A),y&&(V[A]=y,F=A);else{var R=A.name;V[R]=A,F=R}return!b&&F&&(E=F),F||!b&&E},N=function(A,y){if(_(A))return A.clone();var b=typeof y=="object"?y:{};return b.date=A,b.args=arguments,new I(b)},v=D;v.l=z,v.i=_,v.w=function(A,y){return N(A,{locale:y.$L,utc:y.$u,x:y.$x,$offset:y.$offset})};var I=function(){function A(b){this.$L=z(b.locale,null,!0),this.parse(b)}var y=A.prototype;return y.parse=function(b){this.$d=function(F){var R=F.date,k=F.utc;if(R===null)return new Date(NaN);if(v.u(R))return new Date;if(R instanceof Date)return new Date(R);if(typeof R=="string"&&!/Z$/i.test(R)){var T=R.match(g);if(T){var H=T[2]-1||0,Z=(T[7]||"0").substring(0,3);return k?new Date(Date.UTC(T[1],H,T[3]||1,T[4]||0,T[5]||0,T[6]||0,Z)):new Date(T[1],H,T[3]||1,T[4]||0,T[5]||0,T[6]||0,Z)}}return new Date(R)}(b),this.$x=b.x||{},this.init()},y.init=function(){var b=this.$d;this.$y=b.getFullYear(),this.$M=b.getMonth(),this.$D=b.getDate(),this.$W=b.getDay(),this.$H=b.getHours(),this.$m=b.getMinutes(),this.$s=b.getSeconds(),this.$ms=b.getMilliseconds()},y.$utils=function(){return v},y.isValid=function(){return this.$d.toString()!==f},y.isSame=function(b,F){var R=N(b);return this.startOf(F)<=R&&R<=this.endOf(F)},y.isAfter=function(b,F){return N(b)<this.startOf(F)},y.isBefore=function(b,F){return this.endOf(F)<N(b)},y.$g=function(b,F,R){return v.u(b)?this[F]:this.set(R,b)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(b,F){var R=this,k=!!v.u(F)||F,T=v.p(b),H=function(ke,le){var he=v.w(R.$u?Date.UTC(R.$y,le,ke):new Date(R.$y,le,ke),R);return k?he:he.endOf(s)},Z=function(ke,le){return v.w(R.toDate()[ke].apply(R.toDate("s"),(k?[0,0,0,0]:[23,59,59,999]).slice(le)),R)},te=this.$W,ue=this.$M,Ee=this.$D,Pe="set"+(this.$u?"UTC":"");switch(T){case l:return k?H(1,0):H(31,11);case c:return k?H(1,ue):H(0,ue+1);case u:var Ze=this.$locale().weekStart||0,Be=(te<Ze?te+7:te)-Ze;return H(k?Ee-Be:Ee+(6-Be),ue);case s:case p:return Z(Pe+"Hours",0);case i:return Z(Pe+"Minutes",1);case a:return Z(Pe+"Seconds",2);case o:return Z(Pe+"Milliseconds",3);default:return this.clone()}},y.endOf=function(b){return this.startOf(b,!1)},y.$set=function(b,F){var R,k=v.p(b),T="set"+(this.$u?"UTC":""),H=(R={},R[s]=T+"Date",R[p]=T+"Date",R[c]=T+"Month",R[l]=T+"FullYear",R[i]=T+"Hours",R[a]=T+"Minutes",R[o]=T+"Seconds",R[n]=T+"Milliseconds",R)[k],Z=k===s?this.$D+(F-this.$W):F;if(k===c||k===l){var te=this.clone().set(p,1);te.$d[H](Z),te.init(),this.$d=te.set(p,Math.min(this.$D,te.daysInMonth())).$d}else H&&this.$d[H](Z);return this.init(),this},y.set=function(b,F){return this.clone().$set(b,F)},y.get=function(b){return this[v.p(b)]()},y.add=function(b,F){var R,k=this;b=Number(b);var T=v.p(F),H=function(ue){var Ee=N(k);return v.w(Ee.date(Ee.date()+Math.round(ue*b)),k)};if(T===c)return this.set(c,this.$M+b);if(T===l)return this.set(l,this.$y+b);if(T===s)return H(1);if(T===u)return H(7);var Z=(R={},R[a]=t,R[i]=r,R[o]=e,R)[T]||1,te=this.$d.getTime()+b*Z;return v.w(te,this)},y.subtract=function(b,F){return this.add(-1*b,F)},y.format=function(b){var F=this;if(!this.isValid())return f;var R=b||"YYYY-MM-DDTHH:mm:ssZ",k=v.z(this),T=this.$locale(),H=this.$H,Z=this.$m,te=this.$M,ue=T.weekdays,Ee=T.months,Pe=function(le,he,gt,Xe){return le&&(le[he]||le(F,R))||gt[he].substr(0,Xe)},Ze=function(le){return v.s(H%12||12,le,"0")},Be=T.meridiem||function(le,he,gt){var Xe=le<12?"AM":"PM";return gt?Xe.toLowerCase():Xe},ke={YY:String(this.$y).slice(-2),YYYY:this.$y,M:te+1,MM:v.s(te+1,2,"0"),MMM:Pe(T.monthsShort,te,Ee,3),MMMM:Pe(Ee,te),D:this.$D,DD:v.s(this.$D,2,"0"),d:String(this.$W),dd:Pe(T.weekdaysMin,this.$W,ue,2),ddd:Pe(T.weekdaysShort,this.$W,ue,3),dddd:ue[this.$W],H:String(H),HH:v.s(H,2,"0"),h:Ze(1),hh:Ze(2),a:Be(H,Z,!0),A:Be(H,Z,!1),m:String(Z),mm:v.s(Z,2,"0"),s:String(this.$s),ss:v.s(this.$s,2,"0"),SSS:v.s(this.$ms,3,"0"),Z:k};return R.replace(S,function(le,he){return he||ke[le]||k.replace(":","")})},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(b,F,R){var k,T=v.p(F),H=N(b),Z=(H.utcOffset()-this.utcOffset())*t,te=this-H,ue=v.m(this,H);return ue=(k={},k[l]=ue/12,k[c]=ue,k[d]=ue/3,k[u]=(te-Z)/6048e5,k[s]=(te-Z)/864e5,k[i]=te/r,k[a]=te/t,k[o]=te/e,k)[T]||te,R?ue:v.a(ue)},y.daysInMonth=function(){return this.endOf(c).$D},y.$locale=function(){return V[this.$L]},y.locale=function(b,F){if(!b)return this.$L;var R=this.clone(),k=z(b,F,!0);return k&&(R.$L=k),R},y.clone=function(){return v.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},A}(),G=I.prototype;return N.prototype=G,[["$ms",n],["$s",o],["$m",a],["$H",i],["$W",s],["$M",c],["$y",l],["$D",p]].forEach(function(A){G[A[1]]=function(y){return this.$g(y,A[0],A[1])}}),N.extend=function(A,y){return A.$i||(A(y,I,N),A.$i=!0),N},N.locale=z,N.isDayjs=_,N.unix=function(A){return N(1e3*A)},N.en=V[E],N.Ls=V,N.p={},N})});var is=ae((ia,sa)=>{(function(e,t){typeof ia=="object"&&typeof sa!="undefined"?sa.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self).dayjs_plugin_utc=t()})(ia,function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(n,o,a){var i=o.prototype;a.utc=function(f){var g={date:f,utc:!0,args:arguments};return new o(g)},i.utc=function(f){var g=a(this.toDate(),{locale:this.$L,utc:!0});return f?g.add(this.utcOffset(),e):g},i.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var s=i.parse;i.parse=function(f){f.utc&&(this.$u=!0),this.$utils().u(f.$offset)||(this.$offset=f.$offset),s.call(this,f)};var u=i.init;i.init=function(){if(this.$u){var f=this.$d;this.$y=f.getUTCFullYear(),this.$M=f.getUTCMonth(),this.$D=f.getUTCDate(),this.$W=f.getUTCDay(),this.$H=f.getUTCHours(),this.$m=f.getUTCMinutes(),this.$s=f.getUTCSeconds(),this.$ms=f.getUTCMilliseconds()}else u.call(this)};var c=i.utcOffset;i.utcOffset=function(f,g){var S=this.$utils().u;if(S(f))return this.$u?0:S(this.$offset)?c.call(this):this.$offset;if(typeof f=="string"&&(f=function(E){E===void 0&&(E="");var V=E.match(t);if(!V)return null;var _=(""+V[0]).match(r)||["-",0,0],z=_[0],N=60*+_[1]+ +_[2];return N===0?0:z==="+"?N:-N}(f))===null)return this;var P=Math.abs(f)<=16?60*f:f,q=this;if(g)return q.$offset=P,q.$u=f===0,q;if(f!==0){var D=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(q=this.local().add(P+D,e)).$offset=P,q.$x.$localOffset=D}else q=this.utc();return q};var d=i.format;i.format=function(f){var g=f||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return d.call(this,g)},i.valueOf=function(){var f=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||new Date().getTimezoneOffset());return this.$d.valueOf()-6e4*f},i.isUTC=function(){return!!this.$u},i.toISOString=function(){return this.toDate().toISOString()},i.toString=function(){return this.toDate().toUTCString()};var l=i.toDate;i.toDate=function(f){return f==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():l.call(this)};var p=i.diff;i.diff=function(f,g,S){if(f&&this.$u===f.$u)return p.call(this,f,g,S);var P=this.local(),q=a(f).local();return p.call(P,q,g,S)}}})});var ss=ae((ca,ua)=>{(function(e,t){typeof ca=="object"&&typeof ua!="undefined"?ua.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self).dayjs_plugin_timezone=t()})(ca,function(){"use strict";var e={year:0,month:1,day:2,hour:3,minute:4,second:5},t={};return function(r,n,o){var a,i=function(d,l,p){p===void 0&&(p={});var f=new Date(d);return function(g,S){S===void 0&&(S={});var P=S.timeZoneName||"short",q=g+"|"+P,D=t[q];return D||(D=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:g,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:P}),t[q]=D),D}(l,p).formatToParts(f)},s=function(d,l){for(var p=i(d,l),f=[],g=0;g<p.length;g+=1){var S=p[g],P=S.type,q=S.value,D=e[P];D>=0&&(f[D]=parseInt(q,10))}var E=f[3],V=E===24?0:E,_=f[0]+"-"+f[1]+"-"+f[2]+" "+V+":"+f[4]+":"+f[5]+":000",z=+d;return(o.utc(_).valueOf()-(z-=z%1e3))/6e4},u=n.prototype;u.tz=function(d,l){d===void 0&&(d=a);var p=this.utcOffset(),f=this.toDate(),g=f.toLocaleString("en-US",{timeZone:d}),S=Math.round((f-new Date(g))/1e3/60),P=o(g).$set("millisecond",this.$ms).utcOffset(15*-Math.round(f.getTimezoneOffset()/15)-S,!0);if(l){var q=P.utcOffset();P=P.add(p-q,"minute")}return P.$x.$timezone=d,P},u.offsetName=function(d){var l=this.$x.$timezone||o.tz.guess(),p=i(this.valueOf(),l,{timeZoneName:d}).find(function(f){return f.type.toLowerCase()==="timezonename"});return p&&p.value};var c=u.startOf;u.startOf=function(d,l){if(!this.$x||!this.$x.$timezone)return c.call(this,d,l);var p=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"));return c.call(p,d,l).tz(this.$x.$timezone,!0)},o.tz=function(d,l,p){var f=p&&l,g=p||l||a,S=s(+o(),g);if(typeof d!="string")return o(d).tz(g);var P=function(V,_,z){var N=V-60*_*1e3,v=s(N,z);if(_===v)return[N,_];var I=s(N-=60*(v-_)*1e3,z);return v===I?[N,v]:[V-60*Math.min(v,I)*1e3,Math.max(v,I)]}(o.utc(d,f).valueOf(),S,g),q=P[0],D=P[1],E=o(q).utcOffset(D);return E.$x.$timezone=g,E},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(d){a=d}}})});var nc=ae((Hb,rc)=>{"use strict";function rg(e){if(e=`${e}`,e=e.replace(/[ \t\n\f\r]/g,""),e.length%4==0&&(e=e.replace(/==?$/,"")),e.length%4==1||/[^+/0-9A-Za-z]/.test(e))return null;let t="",r=0,n=0;for(let o=0;o<e.length;o++)r<<=6,r|=og(e[o]),n+=6,n===24&&(t+=String.fromCharCode((r&16711680)>>16),t+=String.fromCharCode((r&65280)>>8),t+=String.fromCharCode(r&255),r=n=0);return n===12?(r>>=4,t+=String.fromCharCode(r)):n===18&&(r>>=2,t+=String.fromCharCode((r&65280)>>8),t+=String.fromCharCode(r&255)),t}var ng="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function og(e){let t=ng.indexOf(e);return t<0?void 0:t}rc.exports=rg});var ac=ae((zb,oc)=>{"use strict";function ag(e){let t;for(e=`${e}`,t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return null;let r="";for(t=0;t<e.length;t+=3){let n=[void 0,void 0,void 0,void 0];n[0]=e.charCodeAt(t)>>2,n[1]=(e.charCodeAt(t)&3)<<4,e.length>t+1&&(n[1]|=e.charCodeAt(t+1)>>4,n[2]=(e.charCodeAt(t+1)&15)<<2),e.length>t+2&&(n[2]|=e.charCodeAt(t+2)>>6,n[3]=e.charCodeAt(t+2)&63);for(let o=0;o<n.length;o++)typeof n[o]=="undefined"?r+="=":r+=sg(n[o])}return r}var ig="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function sg(e){if(e>=0&&e<64)return ig[e]}oc.exports=ag});var sc=ae((Wb,ic)=>{"use strict";var cg=nc(),ug=ac();ic.exports={atob:cg,btoa:ug}});var Oa=ae((Pa,qa)=>{(function(e,t){typeof Pa=="object"&&typeof qa!="undefined"?qa.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self).dayjs_plugin_customParseFormat=t()})(Pa,function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-:/.()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d\d/,n=/\d\d?/,o=/\d*[^\s\d-_:/()]+/,a={},i=function(p){return function(f){this[p]=+f}},s=[/[+-]\d\d:?(\d\d)?|Z/,function(p){(this.zone||(this.zone={})).offset=function(f){if(!f||f==="Z")return 0;var g=f.match(/([+-]|\d\d)/g),S=60*g[1]+(+g[2]||0);return S===0?0:g[0]==="+"?-S:S}(p)}],u=function(p){var f=a[p];return f&&(f.indexOf?f:f.s.concat(f.f))},c=function(p,f){var g,S=a.meridiem;if(S){for(var P=1;P<=24;P+=1)if(p.indexOf(S(P,0,f))>-1){g=P>12;break}}else g=p===(f?"pm":"PM");return g},d={A:[o,function(p){this.afternoon=c(p,!1)}],a:[o,function(p){this.afternoon=c(p,!0)}],S:[/\d/,function(p){this.milliseconds=100*+p}],SS:[r,function(p){this.milliseconds=10*+p}],SSS:[/\d{3}/,function(p){this.milliseconds=+p}],s:[n,i("seconds")],ss:[n,i("seconds")],m:[n,i("minutes")],mm:[n,i("minutes")],H:[n,i("hours")],h:[n,i("hours")],HH:[n,i("hours")],hh:[n,i("hours")],D:[n,i("day")],DD:[r,i("day")],Do:[o,function(p){var f=a.ordinal,g=p.match(/\d+/);if(this.day=g[0],f)for(var S=1;S<=31;S+=1)f(S).replace(/\[|\]/g,"")===p&&(this.day=S)}],M:[n,i("month")],MM:[r,i("month")],MMM:[o,function(p){var f=u("months"),g=(u("monthsShort")||f.map(function(S){return S.substr(0,3)})).indexOf(p)+1;if(g<1)throw new Error;this.month=g%12||g}],MMMM:[o,function(p){var f=u("months").indexOf(p)+1;if(f<1)throw new Error;this.month=f%12||f}],Y:[/[+-]?\d+/,i("year")],YY:[r,function(p){p=+p,this.year=p+(p>68?1900:2e3)}],YYYY:[/\d{4}/,i("year")],Z:s,ZZ:s};function l(p){var f,g;f=p,g=a&&a.formats;for(var S=(p=f.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(z,N,v){var I=v&&v.toUpperCase();return N||g[v]||e[v]||g[I].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(G,A,y){return A||y.slice(1)})})).match(t),P=S.length,q=0;q<P;q+=1){var D=S[q],E=d[D],V=E&&E[0],_=E&&E[1];S[q]=_?{regex:V,parser:_}:D.replace(/^\[|\]$/g,"")}return function(z){for(var N={},v=0,I=0;v<P;v+=1){var G=S[v];if(typeof G=="string")I+=G.length;else{var A=G.regex,y=G.parser,b=z.substr(I),F=A.exec(b)[0];y.call(N,F),z=z.replace(F,"")}}return function(R){var k=R.afternoon;if(k!==void 0){var T=R.hours;k?T<12&&(R.hours+=12):T===12&&(R.hours=0),delete R.afternoon}}(N),N}}return function(p,f,g){g.p.customParseFormat=!0;var S=f.prototype,P=S.parse;S.parse=function(q){var D=q.date,E=q.utc,V=q.args;this.$u=E;var _=V[1];if(typeof _=="string"){var z=V[2]===!0,N=V[3]===!0,v=z||N,I=V[2];N&&(I=V[2]),a=this.$locale(),!z&&I&&(a=g.Ls[I]),this.$d=function(b,F,R){try{var k=l(F)(b),T=k.year,H=k.month,Z=k.day,te=k.hours,ue=k.minutes,Ee=k.seconds,Pe=k.milliseconds,Ze=k.zone,Be=new Date,ke=Z||(T||H?1:Be.getDate()),le=T||Be.getFullYear(),he=0;T&&!H||(he=H>0?H-1:Be.getMonth());var gt=te||0,Xe=ue||0,Ro=Ee||0,xo=Pe||0;return Ze?new Date(Date.UTC(le,he,ke,gt,Xe,Ro,xo+60*Ze.offset*1e3)):R?new Date(Date.UTC(le,he,ke,gt,Xe,Ro,xo)):new Date(le,he,ke,gt,Xe,Ro,xo)}catch{return new Date("")}}(D,_,E),this.init(),I&&I!==!0&&(this.$L=this.locale(I).$L),v&&D!==this.format(_)&&(this.$d=new Date("")),a={}}else if(_ instanceof Array)for(var G=_.length,A=1;A<=G;A+=1){V[1]=_[A-1];var y=g.apply(this,V);if(y.isValid()){this.$d=y.$d,this.$L=y.$L,this.init();break}A===G&&(this.$d=new Date(""))}else P.call(this,q)}}})});var bc=ae((ka,Da)=>{(function(e,t){typeof ka=="object"&&typeof Da!="undefined"?Da.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self).dayjs_plugin_quarterOfYear=t()})(ka,function(){"use strict";var e="month",t="quarter";return function(r,n){var o=n.prototype;o.quarter=function(s){return this.$utils().u(s)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(s-1))};var a=o.add;o.add=function(s,u){return s=Number(s),this.$utils().p(u)===t?this.add(3*s,e):a.bind(this)(s,u)};var i=o.startOf;o.startOf=function(s,u){var c=this.$utils(),d=!!c.u(u)||u;if(c.p(s)===t){var l=this.quarter()-1;return d?this.month(3*l).startOf(e).startOf("day"):this.month(3*l+2).endOf(e).endOf("day")}return i.bind(this)(s,u)}}})});var ku=ae((no,Eu)=>{(function(e,t){typeof no=="object"&&typeof Eu!="undefined"?t(no):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis!="undefined"?globalThis:e||self,t(e["fast-equals"]={}))})(no,function(e){"use strict";var t=typeof WeakSet=="function",r=Object.keys;function n(v,I){return v===I||v!==v&&I!==I}function o(v){return v.constructor===Object||v.constructor==null}function a(v){return!!v&&typeof v.then=="function"}function i(v){return!!(v&&v.$$typeof)}function s(){var v=[];return{add:function(I){v.push(I)},has:function(I){return v.indexOf(I)!==-1}}}var u=function(v){return v?function(){return new WeakSet}:s}(t);function c(v){return function(G){var A=v||G;return function(b,F,R){R===void 0&&(R=u());var k=!!b&&typeof b=="object",T=!!F&&typeof F=="object";if(k||T){var H=k&&R.has(b),Z=T&&R.has(F);if(H||Z)return H&&Z;k&&R.add(b),T&&R.add(F)}return A(b,F,R)}}}function d(v,I,G,A){var y=v.length;if(I.length!==y)return!1;for(;y-- >0;)if(!G(v[y],I[y],A))return!1;return!0}function l(v,I,G,A){var y=v.size===I.size;return y&&v.size&&v.forEach(function(b,F){y&&(y=!1,I.forEach(function(R,k){!y&&G(F,k,A)&&(y=G(b,R,A))}))}),y}var p="_owner",f=Function.prototype.bind.call(Function.prototype.call,Object.prototype.hasOwnProperty);function g(v,I,G,A){var y=r(v),b=y.length;if(r(I).length!==b)return!1;if(b)for(var F=void 0;b-- >0;){if(F=y[b],F===p){var R=i(v),k=i(I);if((R||k)&&R!==k)return!1}if(!f(I,F)||!G(v[F],I[F],A))return!1}return!0}function S(v,I){return v.source===I.source&&v.global===I.global&&v.ignoreCase===I.ignoreCase&&v.multiline===I.multiline&&v.unicode===I.unicode&&v.sticky===I.sticky&&v.lastIndex===I.lastIndex}function P(v,I,G,A){var y=v.size===I.size;return y&&v.size&&v.forEach(function(b){y&&(y=!1,I.forEach(function(F){y||(y=G(b,F,A))}))}),y}var q=typeof Map=="function",D=typeof Set=="function";function E(v){var I=typeof v=="function"?v(G):G;function G(A,y,b){if(A===y)return!0;if(A&&y&&typeof A=="object"&&typeof y=="object"){if(o(A)&&o(y))return g(A,y,I,b);var F=Array.isArray(A),R=Array.isArray(y);return F||R?F===R&&d(A,y,I,b):(F=A instanceof Date,R=y instanceof Date,F||R?F===R&&n(A.getTime(),y.getTime()):(F=A instanceof RegExp,R=y instanceof RegExp,F||R?F===R&&S(A,y):a(A)||a(y)?A===y:q&&(F=A instanceof Map,R=y instanceof Map,F||R)?F===R&&l(A,y,I,b):D&&(F=A instanceof Set,R=y instanceof Set,F||R)?F===R&&P(A,y,I,b):g(A,y,I,b)))}return A!==A&&y!==y}return G}var V=E(),_=E(function(){return n}),z=E(c()),N=E(c(n));e.circularDeepEqual=z,e.circularShallowEqual=N,e.createCustomEqual=E,e.deepEqual=V,e.sameValueZeroEqual=n,e.shallowEqual=_,Object.defineProperty(e,"__esModule",{value:!0})})});var Ad=ae((W0,xd)=>{"use strict";function Qy(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}xd.exports=Uy;function Uy(e,t,r){var n=r&&r.stringify||Qy,o=1;if(typeof e=="object"&&e!==null){var a=t.length+o;if(a===1)return e;var i=new Array(a);i[0]=n(e);for(var s=1;s<a;s++)i[s]=n(t[s]);return i.join(" ")}if(typeof e!="string")return e;var u=t.length;if(u===0)return e;for(var c="",d=1-o,l=-1,p=e&&e.length||0,f=0;f<p;){if(e.charCodeAt(f)===37&&f+1<p){switch(l=l>-1?l:0,e.charCodeAt(f+1)){case 100:case 102:if(d>=u||(l<f&&(c+=e.slice(l,f)),t[d]==null))break;c+=Number(t[d]),l=f=f+2;break;case 105:if(d>=u||(l<f&&(c+=e.slice(l,f)),t[d]==null))break;c+=Math.floor(Number(t[d])),l=f=f+2;break;case 79:case 111:case 106:if(d>=u||(l<f&&(c+=e.slice(l,f)),t[d]===void 0))break;var g=typeof t[d];if(g==="string"){c+="'"+t[d]+"'",l=f+2,f++;break}if(g==="function"){c+=t[d].name||"<anonymous>",l=f+2,f++;break}c+=n(t[d]),l=f+2,f++;break;case 115:if(d>=u)break;l<f&&(c+=e.slice(l,f)),c+=String(t[d]),l=f+2,f++;break;case 37:l<f&&(c+=e.slice(l,f)),c+="%",l=f+2,f++,d--;break}++d}++f}return l===-1?e:(l<p&&(c+=e.slice(l)),c)}});var Od=ae((Y0,qd)=>{"use strict";var Fd=Ad();qd.exports=Ue;var wr=Jy().console||{},$y={mapHttpRequest:So,mapHttpResponse:So,wrapRequestSerializer:oi,wrapResponseSerializer:oi,wrapErrorSerializer:oi,req:So,res:So,err:Wy};function By(e,t){return Array.isArray(e)?e.filter(function(n){return n!=="!stdSerializers.err"}):e===!0?Object.keys(t):!1}function Ue(e){e=e||{},e.browser=e.browser||{};let t=e.browser.transmit;if(t&&typeof t.send!="function")throw Error("pino: transmit option must have a send function");let r=e.browser.write||wr;e.browser.write&&(e.browser.asObject=!0);let n=e.serializers||{},o=By(e.browser.serialize,n),a=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(a=!1);let i=["error","fatal","warn","info","debug","trace"];typeof r=="function"&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),e.enabled===!1&&(e.level="silent");let s=e.level||"info",u=Object.create(r);u.log||(u.log=Pr),Object.defineProperty(u,"levelVal",{get:d}),Object.defineProperty(u,"level",{get:l,set:p});let c={transmit:t,serialize:o,asObject:e.browser.asObject,levels:i,timestamp:Yy(e)};u.levels=Ue.levels,u.level=s,u.setMaxListeners=u.getMaxListeners=u.emit=u.addListener=u.on=u.prependListener=u.once=u.prependOnceListener=u.removeListener=u.removeAllListeners=u.listeners=u.listenerCount=u.eventNames=u.write=u.flush=Pr,u.serializers=n,u._serialize=o,u._stdErrSerialize=a,u.child=f,t&&(u._logEvent=ni());function d(){return this.level==="silent"?1/0:this.levels.values[this.level]}function l(){return this._level}function p(g){if(g!=="silent"&&!this.levels.values[g])throw Error("unknown level "+g);this._level=g,Zt(c,u,"error","log"),Zt(c,u,"fatal","error"),Zt(c,u,"warn","error"),Zt(c,u,"info","log"),Zt(c,u,"debug","log"),Zt(c,u,"trace","log")}function f(g){if(!g)throw new Error("missing bindings for child Pino");let S=g.serializers;if(o&&S){var P=Object.assign({},n,S),q=e.browser.serialize===!0?Object.keys(P):o;delete g.serializers,yo([g],q,P,this._stdErrSerialize)}function D(E){this._childLevel=(E._childLevel|0)+1,this.error=Xt(E,g,"error"),this.fatal=Xt(E,g,"fatal"),this.warn=Xt(E,g,"warn"),this.info=Xt(E,g,"info"),this.debug=Xt(E,g,"debug"),this.trace=Xt(E,g,"trace"),P&&(this.serializers=P,this._serialize=q),t&&(this._logEvent=ni([].concat(E._logEvent.bindings,g)))}return D.prototype=this,new D(this)}return u}Ue.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Ue.stdSerializers=$y;Ue.stdTimeFunctions=Object.assign({},{nullTime:wd,epochTime:Pd,unixTime:Ky,isoTime:Gy});function Zt(e,t,r,n){let o=Object.getPrototypeOf(t);t[r]=t.levelVal>t.levels.values[r]?Pr:o[r]?o[r]:wr[r]||wr[n]||Pr,_y(e,t,r)}function _y(e,t,r){!e.transmit&&t[r]===Pr||(t[r]=function(n){return function(){let a=e.timestamp(),i=new Array(arguments.length),s=Object.getPrototypeOf&&Object.getPrototypeOf(this)===wr?wr:this;for(var u=0;u<i.length;u++)i[u]=arguments[u];if(e.serialize&&!e.asObject&&yo(i,this._serialize,this.serializers,this._stdErrSerialize),e.asObject?n.call(s,Hy(this,r,i,a)):n.apply(s,i),e.transmit){let c=e.transmit.level||t.level,d=Ue.levels.values[c],l=Ue.levels.values[r];if(l<d)return;zy(this,{ts:a,methodLevel:r,methodValue:l,transmitLevel:c,transmitValue:Ue.levels.values[e.transmit.level||t.level],send:e.transmit.send,val:t.levelVal},i)}}}(t[r]))}function Hy(e,t,r,n){e._serialize&&yo(r,e._serialize,e.serializers,e._stdErrSerialize);let o=r.slice(),a=o[0],i={};n&&(i.time=n),i.level=Ue.levels.values[t];let s=(e._childLevel|0)+1;if(s<1&&(s=1),a!==null&&typeof a=="object"){for(;s--&&typeof o[0]=="object";)Object.assign(i,o.shift());a=o.length?Fd(o.shift(),o):void 0}else typeof a=="string"&&(a=Fd(o.shift(),o));return a!==void 0&&(i.msg=a),i}function yo(e,t,r,n){for(let o in e)if(n&&e[o]instanceof Error)e[o]=Ue.stdSerializers.err(e[o]);else if(typeof e[o]=="object"&&!Array.isArray(e[o]))for(let a in e[o])t&&t.indexOf(a)>-1&&a in r&&(e[o][a]=r[a](e[o][a]))}function Xt(e,t,r){return function(){let n=new Array(1+arguments.length);n[0]=t;for(var o=1;o<n.length;o++)n[o]=arguments[o-1];return e[r].apply(this,n)}}function zy(e,t,r){let n=t.send,o=t.ts,a=t.methodLevel,i=t.methodValue,s=t.val,u=e._logEvent.bindings;yo(r,e._serialize||Object.keys(e.serializers),e.serializers,e._stdErrSerialize===void 0?!0:e._stdErrSerialize),e._logEvent.ts=o,e._logEvent.messages=r.filter(function(c){return u.indexOf(c)===-1}),e._logEvent.level.label=a,e._logEvent.level.value=i,n(a,e._logEvent,s),e._logEvent=ni(u)}function ni(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function Wy(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let r in e)t[r]===void 0&&(t[r]=e[r]);return t}function Yy(e){return typeof e.timestamp=="function"?e.timestamp:e.timestamp===!1?wd:Pd}function So(){return{}}function oi(e){return e}function Pr(){}function wd(){return!1}function Pd(){return Date.now()}function Ky(){return Math.round(Date.now()/1e3)}function Gy(){return new Date(Date.now()).toISOString()}function Jy(){function e(t){return typeof t!="undefined"&&t}try{return typeof globalThis!="undefined"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}});of(exports,{buildCaseAssistEngine:()=>Vd,buildCaseAssistInteractiveResult:()=>Zd,buildCaseAssistQuickview:()=>Gd,buildCaseField:()=>Yd,buildCaseInput:()=>Wd,buildController:()=>$e,buildDocumentSuggestion:()=>si,buildDocumentSuggestionList:()=>si,loadCaseAssistAnalyticsActions:()=>mS,loadCaseFieldActions:()=>iS,loadCaseInputActions:()=>aS,loadDocumentSuggestionActions:()=>sS});function Ce(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(!1)var o,a;throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function _e(e){return!!e&&!!e[re]}function He(e){return!!e&&(function(t){if(!t||typeof t!="object")return!1;var r=Object.getPrototypeOf(t);return!r||r===Object.prototype}(e)||Array.isArray(e)||!!e[Ci]||!!e.constructor[Ci]||Ao(e)||Fo(e))}function ht(e,t,r){r===void 0&&(r=!1),At(e)===0?(r?Object.keys:wt)(e).forEach(function(n){r&&typeof n=="symbol"||t(n,e[n],e)}):e.forEach(function(n,o){return t(o,n,e)})}function At(e){var t=e[re];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Ao(e)?2:Fo(e)?3:0}function Ft(e,t){return At(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function sf(e,t){return At(e)===2?e.get(t):e[t]}function ui(e,t,r){var n=At(e);n===2?e.set(t,r):n===3?(e.delete(t),e.add(r)):e[t]=r}function li(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function Ao(e){return df&&e instanceof Map}function Fo(e){return ff&&e instanceof Set}function et(e){return e.o||e.t}function wo(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=bi(e);delete t[re];for(var r=wt(t),n=0;n<r.length;n++){var o=r[n],a=t[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(Object.getPrototypeOf(e),t)}function Po(e,t){return t===void 0&&(t=!1),qo(e)||_e(e)||!He(e)||(At(e)>1&&(e.set=e.add=e.clear=e.delete=cf),Object.freeze(e),t&&ht(e,function(r,n){return Po(n,!0)},!0)),e}function cf(){Ce(2)}function qo(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function ze(e){var t=No[e];return t||Ce(18,e),t}function uf(e,t){No[e]||(No[e]=t)}function Oo(){return tr}function Io(e,t){t&&(ze("Patches"),e.u=[],e.s=[],e.v=t)}function Ir(e){Eo(e),e.p.forEach(lf),e.p=null}function Eo(e){e===tr&&(tr=e.l)}function di(e){return tr={p:[],l:tr,h:e,m:!0,_:0}}function lf(e){var t=e[re];t.i===0||t.i===1?t.j():t.g=!0}function ko(e,t){t._=t.p.length;var r=t.p[0],n=e!==void 0&&e!==r;return t.h.O||ze("ES5").S(t,e,n),n?(r[re].P&&(Ir(t),Ce(4)),He(e)&&(e=Er(t,e),t.l||kr(t,e)),t.u&&ze("Patches").M(r[re],e,t.u,t.s)):e=Er(t,r,[]),Ir(t),t.u&&t.v(t.u,t.s),e!==vi?e:void 0}function Er(e,t,r){if(qo(t))return t;var n=t[re];if(!n)return ht(t,function(a,i){return fi(e,n,t,a,i,r)},!0),t;if(n.A!==e)return t;if(!n.P)return kr(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var o=n.i===4||n.i===5?n.o=wo(n.k):n.o;ht(n.i===3?new Set(o):o,function(a,i){return fi(e,n,o,a,i,r)}),kr(e,o,!1),r&&e.u&&ze("Patches").R(n,r,e.u,e.s)}return n.o}function fi(e,t,r,n,o,a){if(_e(o)){var i=Er(e,o,a&&t&&t.i!==3&&!Ft(t.D,n)?a.concat(n):void 0);if(ui(r,n,i),!_e(i))return;e.m=!1}if(He(o)&&!qo(o)){if(!e.h.N&&e._<1)return;Er(e,o),t&&t.A.l||kr(e,o)}}function kr(e,t,r){r===void 0&&(r=!1),e.h.N&&e.m&&Po(t,r)}function Do(e,t){var r=e[re];return(r?et(r):e)[t]}function pi(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function tt(e){e.P||(e.P=!0,e.l&&tt(e.l))}function To(e){e.o||(e.o=wo(e.t))}function Vo(e,t,r){var n=Ao(t)?ze("MapSet").T(t,r):Fo(t)?ze("MapSet").F(t,r):e.O?function(o,a){var i=Array.isArray(o),s={i:i?1:0,A:a?a.A:Oo(),P:!1,I:!1,D:{},l:a,t:o,k:null,o:null,j:null,C:!1},u=s,c=Pt;i&&(u=[s],c=Dr);var d=Proxy.revocable(u,c),l=d.revoke,p=d.proxy;return s.k=p,s.j=l,p}(t,r):ze("ES5").J(t,r);return(r?r.A:Oo()).p.push(n),n}function mi(e){return _e(e)||Ce(22,e),function t(r){if(!He(r))return r;var n,o=r[re],a=At(r);if(o){if(!o.P&&(o.i<4||!ze("ES5").K(o)))return o.t;o.I=!0,n=gi(r,a),o.I=!1}else n=gi(r,a);return ht(n,function(i,s){o&&sf(o.t,i)===s||ui(n,i,t(s))}),a===3?new Set(n):n}(e)}function gi(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return wo(e)}function hi(){function e(i,s){var u=a[i];return u?u.enumerable=s:a[i]=u={configurable:!0,enumerable:s,get:function(){var c=this[re];return Pt.get(c,i)},set:function(c){var d=this[re];Pt.set(d,i,c)}},u}function t(i){for(var s=i.length-1;s>=0;s--){var u=i[s][re];if(!u.P)switch(u.i){case 5:n(u)&&tt(u);break;case 4:r(u)&&tt(u)}}}function r(i){for(var s=i.t,u=i.k,c=wt(u),d=c.length-1;d>=0;d--){var l=c[d];if(l!==re){var p=s[l];if(p===void 0&&!Ft(s,l))return!0;var f=u[l],g=f&&f[re];if(g?g.t!==p:!li(f,p))return!0}}var S=!!s[re];return c.length!==wt(s).length+(S?0:1)}function n(i){var s=i.k;if(s.length!==i.t.length)return!0;var u=Object.getOwnPropertyDescriptor(s,s.length-1);return!(!u||u.get)}function o(i){i.g&&Ce(3,JSON.stringify(et(i)))}var a={};uf("ES5",{J:function(i,s){var u=Array.isArray(i),c=function(l,p){if(l){for(var f=Array(p.length),g=0;g<p.length;g++)Object.defineProperty(f,""+g,e(g,!0));return f}var S=bi(p);delete S[re];for(var P=wt(S),q=0;q<P.length;q++){var D=P[q];S[D]=e(D,l||!!S[D].enumerable)}return Object.create(Object.getPrototypeOf(p),S)}(u,i),d={i:u?5:4,A:s?s.A:Oo(),P:!1,I:!1,D:{},l:s,t:i,k:c,o:null,g:!1,C:!1};return Object.defineProperty(c,re,{value:d,writable:!0}),c},S:function(i,s,u){u?_e(s)&&s[re].A===i&&t(i.p):(i.u&&function c(d){if(d&&typeof d=="object"){var l=d[re];if(l){var p=l.t,f=l.k,g=l.D,S=l.i;if(S===4)ht(f,function(V){V!==re&&(p[V]!==void 0||Ft(p,V)?g[V]||c(f[V]):(g[V]=!0,tt(l)))}),ht(p,function(V){f[V]!==void 0||Ft(f,V)||(g[V]=!1,tt(l))});else if(S===5){if(n(l)&&(tt(l),g.length=!0),f.length<p.length)for(var P=f.length;P<p.length;P++)g[P]=!1;else for(var q=p.length;q<f.length;q++)g[q]=!0;for(var D=Math.min(f.length,p.length),E=0;E<D;E++)g[E]===void 0&&c(f[E])}}}}(i.p[0]),t(i.p))},K:function(i){return i.i===4?r(i):n(i)}})}var yi,tr,jo=typeof Symbol!="undefined"&&typeof Symbol("x")=="symbol",df=typeof Map!="undefined",ff=typeof Set!="undefined",Si=typeof Proxy!="undefined"&&Proxy.revocable!==void 0&&typeof Reflect!="undefined",vi=jo?Symbol.for("immer-nothing"):((yi={})["immer-nothing"]=!0,yi),Ci=jo?Symbol.for("immer-draftable"):"__$immer_draftable",re=jo?Symbol.for("immer-state"):"__$immer_state",AS=typeof Symbol!="undefined"&&Symbol.iterator||"@@iterator";var wt=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,bi=Object.getOwnPropertyDescriptors||function(e){var t={};return wt(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},No={},Pt={get:function(e,t){if(t===re)return e;var r=et(e);if(!Ft(r,t))return function(o,a,i){var s,u=pi(a,i);return u?"value"in u?u.value:(s=u.get)===null||s===void 0?void 0:s.call(o.k):void 0}(e,r,t);var n=r[t];return e.I||!He(n)?n:n===Do(e.t,t)?(To(e),e.o[t]=Vo(e.A.h,n,e)):n},has:function(e,t){return t in et(e)},ownKeys:function(e){return Reflect.ownKeys(et(e))},set:function(e,t,r){var n=pi(et(e),t);if(n==null?void 0:n.set)return n.set.call(e.k,r),!0;if(!e.P){var o=Do(et(e),t),a=o==null?void 0:o[re];if(a&&a.t===r)return e.o[t]=r,e.D[t]=!1,!0;if(li(r,o)&&(r!==void 0||Ft(e.t,t)))return!0;To(e),tt(e)}return e.o[t]=r,e.D[t]=!0,!0},deleteProperty:function(e,t){return Do(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,To(e),tt(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=et(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty:function(){Ce(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Ce(12)}},Dr={};ht(Pt,function(e,t){Dr[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Dr.deleteProperty=function(e,t){return Pt.deleteProperty.call(this,e[0],t)},Dr.set=function(e,t,r){return Pt.set.call(this,e[0],t,r,e[0])};var pf=function(){function e(r){this.O=Si,this.N=!0,typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}var t=e.prototype;return t.produce=function(r,n,o){if(typeof r=="function"&&typeof n!="function"){var a=n;n=r;var i=this;return function(l){var p=this;l===void 0&&(l=a);for(var f=arguments.length,g=Array(f>1?f-1:0),S=1;S<f;S++)g[S-1]=arguments[S];return i.produce(l,function(P){var q;return(q=n).call.apply(q,[p,P].concat(g))})}}var s;if(typeof n!="function"&&Ce(6),o!==void 0&&typeof o!="function"&&Ce(7),He(r)){var u=di(this),c=Vo(this,r,void 0),d=!0;try{s=n(c),d=!1}finally{d?Ir(u):Eo(u)}return typeof Promise!="undefined"&&s instanceof Promise?s.then(function(l){return Io(u,o),ko(l,u)},function(l){throw Ir(u),l}):(Io(u,o),ko(s,u))}if(!r||typeof r!="object")return(s=n(r))===vi?void 0:(s===void 0&&(s=r),this.N&&Po(s,!0),s);Ce(21,r)},t.produceWithPatches=function(r,n){var o,a,i=this;return typeof r=="function"?function(s){for(var u=arguments.length,c=Array(u>1?u-1:0),d=1;d<u;d++)c[d-1]=arguments[d];return i.produceWithPatches(s,function(l){return r.apply(void 0,[l].concat(c))})}:[this.produce(r,n,function(s,u){o=s,a=u}),o,a]},t.createDraft=function(r){He(r)||Ce(8),_e(r)&&(r=mi(r));var n=di(this),o=Vo(this,r,void 0);return o[re].C=!0,Eo(n),o},t.finishDraft=function(r,n){var o=r&&r[re],a=o.A;return Io(a,n),ko(void 0,a)},t.setAutoFreeze=function(r){this.N=r},t.setUseProxies=function(r){r&&!Si&&Ce(20),this.O=r},t.applyPatches=function(r,n){var o;for(o=n.length-1;o>=0;o--){var a=n[o];if(a.path.length===0&&a.op==="replace"){r=a.value;break}}var i=ze("Patches").$;return _e(r)?i(r,n):this.produce(r,function(s){return i(s,n.slice(o+1))})},e}(),ye=new pf,mf=ye.produce,FS=ye.produceWithPatches.bind(ye),wS=ye.setAutoFreeze.bind(ye),PS=ye.setUseProxies.bind(ye),qS=ye.applyPatches.bind(ye),OS=ye.createDraft.bind(ye),IS=ye.finishDraft.bind(ye),Ri=mf;function Mo(e){var t,r=e.Symbol;return typeof r=="function"?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}var qt;typeof self!="undefined"?qt=self:typeof window!="undefined"?qt=window:typeof global!="undefined"?qt=global:typeof module!="undefined"?qt=module:qt=Function("return this")();var gf=Mo(qt),Lo=gf;var Qo=function(){return Math.random().toString(36).substring(7).split("").join(".")},rr={INIT:"@@redux/INIT"+Qo(),REPLACE:"@@redux/REPLACE"+Qo(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Qo()}};function hf(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Uo(e,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if(typeof t=="function"&&typeof r=="undefined"&&(r=t,t=void 0),typeof r!="undefined"){if(typeof r!="function")throw new Error("Expected the enhancer to be a function.");return r(Uo)(e,t)}if(typeof e!="function")throw new Error("Expected the reducer to be a function.");var o=e,a=t,i=[],s=i,u=!1;function c(){s===i&&(s=i.slice())}function d(){if(u)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return a}function l(S){if(typeof S!="function")throw new Error("Expected the listener to be a function.");if(u)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var P=!0;return c(),s.push(S),function(){if(!!P){if(u)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");P=!1,c();var D=s.indexOf(S);s.splice(D,1),i=null}}}function p(S){if(!hf(S))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(typeof S.type=="undefined")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(u)throw new Error("Reducers may not dispatch actions.");try{u=!0,a=o(a,S)}finally{u=!1}for(var P=i=s,q=0;q<P.length;q++){var D=P[q];D()}return S}function f(S){if(typeof S!="function")throw new Error("Expected the nextReducer to be a function.");o=S,p({type:rr.REPLACE})}function g(){var S,P=l;return S={subscribe:function(D){if(typeof D!="object"||D===null)throw new TypeError("Expected the observer to be an object.");function E(){D.next&&D.next(d())}E();var V=P(E);return{unsubscribe:V}}},S[Lo]=function(){return this},S}return p({type:rr.INIT}),n={dispatch:p,subscribe:l,getState:d,replaceReducer:f},n[Lo]=g,n}function yf(e,t){var r=t&&t.type,n=r&&'action "'+String(r)+'"'||"an action";return"Given "+n+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function Sf(e){Object.keys(e).forEach(function(t){var r=e[t],n=r(void 0,{type:rr.INIT});if(typeof n=="undefined")throw new Error('Reducer "'+t+`" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.`);if(typeof r(void 0,{type:rr.PROBE_UNKNOWN_ACTION()})=="undefined")throw new Error('Reducer "'+t+'" returned undefined when probed with a random type. '+("Don't try to handle "+rr.INIT+' or other actions in "redux/*" ')+"namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.")})}function Tr(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var o=t[n];typeof e[o]=="function"&&(r[o]=e[o])}var a=Object.keys(r),i,s;try{Sf(r)}catch(u){s=u}return function(c,d){if(c===void 0&&(c={}),s)throw s;if(!1)var l;for(var p=!1,f={},g=0;g<a.length;g++){var S=a[g],P=r[S],q=c[S],D=P(q,d);if(typeof D=="undefined"){var E=yf(S,d);throw new Error(E)}f[S]=D,p=p||D!==q}return p=p||a.length!==Object.keys(c).length,p?f:c}}function vf(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xi(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r}function Cf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xi(r,!0).forEach(function(n){vf(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xi(r).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nr(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(n){return n}:t.length===1?t[0]:t.reduce(function(n,o){return function(){return n(o.apply(void 0,arguments))}})}function Ai(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return function(){var o=n.apply(void 0,arguments),a=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},i={getState:o.getState,dispatch:function(){return a.apply(void 0,arguments)}},s=t.map(function(u){return u(i)});return a=nr.apply(void 0,s)(o.dispatch),Cf({},o,{dispatch:a})}}}function bf(e,t){return e===t}function Rf(e,t,r){if(t===null||r===null||t.length!==r.length)return!1;for(var n=t.length,o=0;o<n;o++)if(!e(t[o],r[o]))return!1;return!0}function xf(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:bf,r=null,n=null;return function(){return Rf(t,r,arguments)||(n=e.apply(null,arguments)),r=arguments,n}}function Af(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(n){return typeof n=="function"})){var r=t.map(function(n){return typeof n}).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, "+("instead received the following types: ["+r+"]"))}return t}function Ff(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(){for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];var s=0,u=a.pop(),c=Af(a),d=e.apply(void 0,[function(){return s++,u.apply(null,arguments)}].concat(r)),l=e(function(){for(var p=[],f=c.length,g=0;g<f;g++)p.push(c[g].apply(null,arguments));return d.apply(null,p)});return l.resultFunc=u,l.dependencies=c,l.recomputations=function(){return s},l.resetRecomputations=function(){return s=0},l}}var Fi=Ff(xf);function wi(e){return function(t){var r=t.dispatch,n=t.getState;return function(o){return function(a){return typeof a=="function"?a(r,n,e):o(a)}}}}var Pi=wi();Pi.withExtraArgument=wi;var $o=Pi;function Vr(){return Vr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vr.apply(this,arguments)}function wf(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function Bo(e){return Bo=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Bo(e)}function jr(e,t){return jr=Object.setPrototypeOf||function(n,o){return n.__proto__=o,n},jr(e,t)}function Pf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function yt(e,t,r){return Pf()?yt=Reflect.construct:yt=function(o,a,i){var s=[null];s.push.apply(s,a);var u=Function.bind.apply(o,s),c=new u;return i&&jr(c,i.prototype),c},yt.apply(null,arguments)}function qf(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function _o(e){var t=typeof Map=="function"?new Map:void 0;return _o=function(n){if(n===null||!qf(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t!="undefined"){if(t.has(n))return t.get(n);t.set(n,o)}function o(){return yt(n,arguments,Bo(this).constructor)}return o.prototype=Object.create(n.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),jr(o,n)},_o(e)}var Of=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?nr:nr.apply(null,arguments)};function If(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}var Ef=function(e){wf(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.concat=function(){for(var o,a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return yt(t,(o=e.prototype.concat).call.apply(o,[this].concat(i)))},r.prepend=function(){for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return a.length===1&&Array.isArray(a[0])?yt(t,a[0].concat(this)):yt(t,a.concat(this))},t}(_o(Array));function kf(e){return typeof e=="boolean"}function Df(){return function(t){return Tf(t)}}function Tf(e){e===void 0&&(e={});var t=e,r=t.thunk,n=r===void 0?!0:r,o=t.immutableCheck,a=o===void 0?!0:o,i=t.serializableCheck,s=i===void 0?!0:i,u=new Ef;if(n&&(kf(n)?u.push($o):u.push($o.withExtraArgument(n.extraArgument))),!1){if(a)var c;if(s)var d}return u}var Vf=!0;function qi(e){var t=Df(),r=e||{},n=r.reducer,o=n===void 0?void 0:n,a=r.middleware,i=a===void 0?t():a,s=r.devTools,u=s===void 0?!0:s,c=r.preloadedState,d=c===void 0?void 0:c,l=r.enhancers,p=l===void 0?void 0:l,f;if(typeof o=="function")f=o;else if(If(o))f=Tr(o);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var g=Ai.apply(void 0,typeof i=="function"?i(t):i),S=nr;u&&(S=Of(Vr({trace:!Vf},typeof u=="object"&&u)));var P=[g];Array.isArray(p)?P=[g].concat(p):typeof p=="function"&&(P=p(P));var q=S.apply(void 0,P);return Uo(f,d,q)}function m(e,t){function r(){if(t){var n=t.apply(void 0,arguments);if(!n)throw new Error("prepareAction did not return an object");return Vr({type:e,payload:n.payload},"meta"in n&&{meta:n.meta},{},"error"in n&&{error:n.error})}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(n){return n.type===e},r}function jf(e){var t={},r=[],n,o={addCase:function(i,s){var u=typeof i=="string"?i:i.type;if(u in t)throw new Error("addCase cannot be called with two reducers for the same action type");return t[u]=s,o},addMatcher:function(i,s){return r.push({matcher:i,reducer:s}),o},addDefaultCase:function(i){return n=i,o}};return e(o),[t,r,n]}function x(e,t,r,n){r===void 0&&(r=[]);var o=typeof t=="function"?jf(t):[t,r,n],a=o[0],i=o[1],s=o[2];return function(u,c){u===void 0&&(u=e);var d=[a[c.type]].concat(i.filter(function(l){var p=l.matcher;return p(c)}).map(function(l){var p=l.reducer;return p}));return d.filter(function(l){return!!l}).length===0&&(d=[s]),d.reduce(function(l,p){if(p)if(_e(l)){var f=l,g=p(f,c);return typeof g=="undefined"?l:g}else{if(He(l))return Ri(l,function(P){return p(P,c)});var S=p(l,c);if(typeof S=="undefined"){if(l===null)return l;throw Error("A case reducer on a non-draftable value must not return undefined")}return S}return l},u)}}var BS=typeof Symbol!="undefined"?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator",_S=typeof Symbol!="undefined"?Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")):"@@asyncIterator";function Nf(e,t){try{var r=e()}catch(n){return t(n)}return r&&r.then?r.then(void 0,t):r}var Mf="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Lf=function(t){t===void 0&&(t=21);for(var r="",n=t;n--;)r+=Mf[Math.random()*64|0];return r},Qf=["name","message","stack","code"],Nr=function(t){this.payload=t,this.name="RejectWithValue",this.message="Rejected"},Uf=function(t){if(typeof t=="object"&&t!==null){for(var r={},n=Qf,o=Array.isArray(n),a=0,n=o?n:n[Symbol.iterator]();;){var i;if(o){if(a>=n.length)break;i=n[a++]}else{if(a=n.next(),a.done)break;i=a.value}var s=i;typeof t[s]=="string"&&(r[s]=t[s])}return r}return{message:String(t)}};function U(e,t,r){var n=m(e+"/fulfilled",function(c,d,l){return{payload:c,meta:{arg:l,requestId:d,requestStatus:"fulfilled"}}}),o=m(e+"/pending",function(c,d){return{payload:void 0,meta:{arg:d,requestId:c,requestStatus:"pending"}}}),a=m(e+"/rejected",function(c,d,l){var p=c instanceof Nr,f=!!c&&c.name==="AbortError",g=!!c&&c.name==="ConditionError";return{payload:c instanceof Nr?c.payload:void 0,error:(r&&r.serializeError||Uf)(c||"Rejected"),meta:{arg:l,requestId:d,rejectedWithValue:p,requestStatus:"rejected",aborted:f,condition:g}}}),i=!1,s=typeof AbortController!="undefined"?AbortController:function(){function c(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){}}}var d=c.prototype;return d.abort=function(){},c}();function u(c){return function(d,l,p){var f=Lf(),g=new s,S,P=new Promise(function(V,_){return g.signal.addEventListener("abort",function(){return _({name:"AbortError",message:S||"Aborted"})})}),q=!1;function D(V){q&&(S=V,g.abort())}var E=function(){try{var V=function(I){if(_)return I;var G=r&&!r.dispatchConditionRejection&&a.match(z)&&z.meta.condition;return G||d(z),z},_=!1,z,N=Nf(function(){if(r&&r.condition&&r.condition(c,{getState:l,extra:p})===!1)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return q=!0,d(o(f,c)),Promise.resolve(Promise.race([P,Promise.resolve(t(c,{dispatch:d,getState:l,extra:p,requestId:f,signal:g.signal,rejectWithValue:function(I){return new Nr(I)}})).then(function(v){return v instanceof Nr?a(v,f,c):n(v,f,c)})])).then(function(v){z=v})},function(v){z=a(v,f,c)});return Promise.resolve(N&&N.then?N.then(V):V(N))}catch(v){return Promise.reject(v)}}();return Object.assign(E,{abort:D,requestId:f,arg:c})}}return Object.assign(u,{pending:o,rejected:a,fulfilled:n,typePrefix:e})}hi();function $f(e,t){let r=`
  The following properties are invalid:

    ${e.join(`
	`)}
  
  ${t}
  `;return new Ho(r)}var Ho=class extends Error{constructor(e){super(e);this.name="SchemaValidationError"}},be=class{constructor(e){this.definition=e}validate(e={},t=""){let r={...this.default,...e},n=[];for(let o in this.definition){let a=this.definition[o].validate(r[o]);a&&n.push(`${o}: ${a}`)}if(n.length)throw $f(n,t);return r}get default(){let e={};for(let t in this.definition){let r=this.definition[t].default;r!==void 0&&(e[t]=r)}return e}},ne=class{constructor(e={}){this.baseConfig=e}validate(e){return this.baseConfig.required&&X(e)?"value is required.":null}get default(){return this.baseConfig.default instanceof Function?this.baseConfig.default():this.baseConfig.default}get required(){return this.baseConfig.required===!0}};function ce(e){return e===void 0}function Bf(e){return e===null}function X(e){return ce(e)||Bf(e)}var j=class{constructor(e={}){this.config=e,this.value=new ne(e)}validate(e){let t=this.value.validate(e);return t||(_f(e)?e<this.config.min?`minimum value of ${this.config.min} not respected.`:e>this.config.max?`maximum value of ${this.config.max} not respected.`:null:"value is not a number.")}get default(){return this.value.default}get required(){return this.value.required}};function _f(e){return ce(e)||Oi(e)}function Oi(e){return typeof e=="number"&&!isNaN(e)}var B=class{constructor(e={}){this.value=new ne(e)}validate(e){let t=this.value.validate(e);return t||(Hf(e)?null:"value is not a boolean.")}get default(){return this.value.default}get required(){return this.value.required}};function Hf(e){return ce(e)||Ii(e)}function Ii(e){return typeof e=="boolean"}var zf=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i,O=class{constructor(e={}){this.config={emptyAllowed:!0,url:!1,...e},this.value=new ne(this.config)}validate(e){let{emptyAllowed:t,url:r,regex:n,constrainTo:o}=this.config,a=this.value.validate(e);return a||(ce(e)?null:Mr(e)?!t&&!e.length?"value is an empty string.":r&&!zf.test(e)?"value is not a valid URL.":n&&!n.test(e)?`value did not match provided regex ${n}`:o&&!o.includes(e)?`value should be one of: ${o.join(", ")}.`:null:"value is not a string.")}get default(){return this.value.default}get required(){return this.value.required}};function Mr(e){return Object.prototype.toString.call(e)==="[object String]"}var M=class{constructor(e={}){this.config={options:{required:!1},values:{},...e}}validate(e){if(ce(e))return this.config.options.required?"value is required and is currently undefined":null;if(!Ei(e))return"value is not an object";for(let[r,n]of Object.entries(this.config.values))if(n.required&&X(e[r]))return`value does not contain ${r}`;let t="";for(let[r,n]of Object.entries(this.config.values)){let o=e[r],a=n.validate(o);a!==null&&(t+=" "+a)}return t===""?null:t}get default(){}get required(){return!!this.config.options.required}};function Ei(e){return e!==void 0&&typeof e=="object"}var Y=class{constructor(e={}){this.config=e,this.value=new ne(this.config)}validate(e){if(!X(e)&&!Array.isArray(e))return"value is not an array";let t=this.value.validate(e);if(t!==null)return t;if(X(e))return null;if(this.config.max!==void 0&&e.length>this.config.max)return`value contains more than ${this.config.max}`;if(this.config.min!==void 0&&e.length<this.config.min)return`value contains less than ${this.config.min}`;if(this.config.each!==void 0){let r="";return e.forEach(n=>{this.config.each.required&&X(n)&&(r=`value is null or undefined: ${e.join(",")}`);let o=this.validatePrimitiveValue(n,this.config.each);o!==null&&(r+=" "+o)}),r===""?null:r}return null}validatePrimitiveValue(e,t){return Ii(e)||Mr(e)||Oi(e)||Ei(e)?t.validate(e):"value is not a primitive value"}get default(){}get required(){return this.value.required}};function Lr(e){return Array.isArray(e)}var De=class{constructor(e){this.config=e,this.value=new ne(e)}validate(e){let t=this.value.validate(e);return t!==null?t:ce(e)||Object.values(this.config.enum).find(n=>n===e)?null:"value is not in enum."}get default(){return this.value.default}get required(){return this.value.required}};var w=new O({required:!0,emptyAllowed:!1}),ie=new O({required:!1,emptyAllowed:!1}),ee=new O({required:!0,emptyAllowed:!0}),We=({message:e,name:t,stack:r})=>({message:e,name:t,stack:r}),Re=(e,t)=>{if("required"in t)return{payload:new be({value:t}).validate({value:e}).value};let o=new M({options:{required:!0},values:t}).validate(e);if(o)throw new Ho(o);return{payload:e}},h=(e,t)=>{try{return Re(e,t)}catch(r){return{payload:e,error:We(r)}}};var Qr=(e,t,r,n)=>{let o=`Check the options of ${n}`;return Wf(e,t,r,o,"Controller initialization error")},Wf=(e,t,r,n,o)=>{try{return t.validate(r,n)}catch(a){throw e.logger.error(a,o),a}};var zo=()=>ie,ki=()=>w,Ot=m("configuration/updateBasicConfiguration",e=>h(e,{accessToken:ie,organizationId:ie,platformUrl:ie})),It=m("configuration/updateSearchConfiguration",e=>h(e,{apiBaseUrl:ie,pipeline:ie,searchHub:ie,timezone:ie,locale:ie})),Ur=m("configuration/updateAnalyticsConfiguration",e=>h(e,{enabled:new B({default:!0}),originContext:zo(),originLevel2:zo(),originLevel3:zo(),apiBaseUrl:ie,runtimeEnvironment:new ne,anonymous:new B({default:!1}),deviceId:ie,userDisplayName:ie})),$r=m("configuration/analytics/disable"),Br=m("configuration/analytics/enable"),Di=m("configuration/analytics/originlevel2",e=>h(e,{originLevel2:ki()})),Ti=m("configuration/analytics/originlevel3",e=>h(e,{originLevel3:ki()}));function Vi(e){let t={...e},r,n=o=>(a,i)=>{let s=o(a,i);return r?r(s,i):s};return{get combinedReducer(){return n(Tr(t))},containsAll(o){return Object.keys(o).every(i=>i in t)},add(o){Object.keys(o).filter(a=>!(a in t)).forEach(a=>t[a]=o[a])},addCrossReducer(o){r=o}}}var ji=e=>()=>t=>r=>{if(!r.error)return t(r);let n=r.error;if(e.error(n.stack||n.message||n.name||"Error",`Action dispatch error ${r.type}`,r),r.error.name!=="SchemaValidationError")return t(r)},Ni=e=>t=>r=>n=>(e.debug({action:n,nextState:t.getState()},`Action dispatched: ${n.type}`),r(n));function Mi({reducer:e,preloadedState:t,middlewares:r=[],thunkExtraArguments:n,name:o}){return qi({reducer:e,preloadedState:t,devTools:{stateSanitizer:a=>a.history?{...a,history:"<<OMIT>>"}:a,name:o,shouldHotReload:!1},middleware:a=>[...r,...a({thunk:{extraArgument:n}}),Ni(n.logger)]})}var Wo=m("history/undo"),Yo=m("history/redo"),Ye=m("history/snapshot"),Sv=U("history/back",async(e,{dispatch:t})=>{t(Wo()),await t(W())}),vv=U("history/forward",async(e,{dispatch:t})=>{t(Yo()),await t(W())}),W=U("history/change",async(e,{getState:t})=>t().history.present);var rt=()=>new O({required:!1,emptyAllowed:!0}),Li=m("advancedSearchQueries/update",e=>h(e,{aq:rt(),cq:rt(),lq:rt(),dq:rt()})),Qi=m("advancedSearchQueries/register",e=>h(e,{aq:rt(),cq:rt(),lq:rt(),dq:rt()}));var St=()=>({cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,lq:"",lqWasSet:!1,dq:"",dqWasSet:!1,defaultFilters:{cq:"",aq:"",lq:"",dq:""}});var Ui={q:new O,enableQuerySyntax:new B,aq:new O,cq:new O,firstResult:new j({min:0}),numberOfResults:new j({min:0}),sortCriteria:new O,f:new M,cf:new M,nf:new M,df:new M,debug:new B,sf:new M,tab:new O};var K=m("searchParameters/restore",e=>h(e,Ui));var Yf=x(St(),e=>{e.addCase(Li,(t,r)=>{let{aq:n,cq:o,lq:a,dq:i}=r.payload;ce(n)||(t.aq=n,t.aqWasSet=!0),ce(o)||(t.cq=o,t.cqWasSet=!0),ce(a)||(t.lq=a,t.lqWasSet=!0),ce(i)||(t.dq=i,t.dqWasSet=!0)}).addCase(Qi,(t,r)=>{let{aq:n,cq:o,lq:a,dq:i}=r.payload;ce(n)||(t.defaultFilters.aq=n,t.aqWasSet||(t.aq=n)),ce(o)||(t.defaultFilters.cq=o,t.cqWasSet||(t.cq=o)),ce(a)||(t.defaultFilters.lq=a,t.lqWasSet||(t.lq=a)),ce(i)||(t.defaultFilters.dq=i,t.dqWasSet||(t.dq=i))}).addCase(W.fulfilled,(t,r)=>{var n,o;return(o=(n=r.payload)==null?void 0:n.advancedSearchQueries)!=null?o:t}).addCase(K,(t,r)=>{let{aq:n,cq:o}=r.payload;ce(n)||(t.aq=n,t.aqWasSet=!0),ce(o)||(t.cq=o,t.cqWasSet=!0)})});var $i=m("tab/register",e=>{let t=new M({values:{id:w,expression:ee}});return h(e,t)}),_r=m("tab/updateActiveTab",e=>h(e,w));var ts=me(_i()),rs=me(Zi());var Te=new Error("Failed to load reducers."),ir=class extends Error{constructor(){super();this.name="ExpiredToken",this.message="The token being used to perform the request is expired."}},Et=class extends Error{constructor(t,r){super();this.name="Disconnected",this.message=`Client could not connect to the following URL: ${t}`,this.statusCode=r!=null?r:0}};function Xi(e){let t=[];for(let r in e){let n=encodeURIComponent(r),o=encodeURIComponent(e[r]);t.push(`${n}=${o}`)}return t.join("&")}function es(e){return typeof e!="object"||!e?!1:Object.values(e).every(Cp)}function Cp(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"}function ns(e){return e===429}var Ct=class{static async call(t){let r=bp(t),{preprocessRequest:n,logger:o}=t,a={...r,...n?await n(r,"searchApiFetch"):{}};o.info(a,"Platform request");let{url:i,...s}=a,u=async()=>{let c=await(0,ts.default)(i,s);if(ns(c.status))throw c;return c};try{let c=await(0,rs.backOff)(u,{retry:d=>{let l=d&&ns(d.status);return l&&o.info("Platform retrying request"),l}});if(c.status===419)throw o.info("Platform renewing token"),new ir;if(c.status===404)throw new Et(i,c.status);return o.info({response:c,requestInfo:a},"Platform response"),c}catch(c){return c.message==="Failed to fetch"?new Et(i):c}}};function os(e,t){let r=!t||!t.environment||t.environment==="prod"?"":t.environment,n=!t||!t.region||t.region==="us"?"":`-${t.region}`;return`https://${e}${r}${n}.cloud.coveo.com`}function na(e){return(e==null?void 0:e.multiRegionSubDomain)?`https://${e.multiRegionSubDomain}.org.coveo.com`:os("platform",e)}function as(e){return os("analytics",e)}function bp(e){let{url:t,method:r,requestParams:n,contentType:o,accessToken:a,signal:i}=e,s=e.method==="POST"||e.method==="PUT",u=Rp(n,o);return{url:t,method:r,headers:{"Content-Type":o,Authorization:`Bearer ${a}`,...e.headers},...s&&{body:u},signal:i}}function Rp(e,t){return t==="application/x-www-form-urlencoded"?es(e)?Xi(e):"":JSON.stringify(e)}var rn=me(kt()),Qs=me(is()),Us=me(ss());function zr(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function Q(e,t,r,n){function o(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function s(d){try{c(n.next(d))}catch(l){i(l)}}function u(d){try{c(n.throw(d))}catch(l){i(l)}}function c(d){d.done?a(d.value):o(d.value).then(s,u)}c((n=n.apply(e,t||[])).next())})}var oe;(function(e){e.search="search",e.click="click",e.custom="custom",e.view="view",e.collect="collect"})(oe||(oe={}));function xp(){return typeof window!="undefined"}function la(){return typeof navigator!="undefined"}function cs(){return typeof document!="undefined"}function da(){try{return typeof localStorage!="undefined"}catch{return!1}}function Ap(){try{return typeof sessionStorage!="undefined"}catch{return!1}}function us(){return la()&&navigator.cookieEnabled}function Fp(){return typeof crypto!="undefined"}function wp(){return Fp()&&typeof crypto.getRandomValues!="undefined"}var Pp=[oe.click,oe.custom,oe.search,oe.view],qp=(e,t)=>Pp.indexOf(e)!==-1?Object.assign({language:cs()?document.documentElement.lang:"unknown",userAgent:la()?navigator.userAgent:"unknown"},t):t,nt=class{static set(t,r,n){var o,a,i,s,u;n?(i=new Date,i.setTime(i.getTime()+n),s="; expires="+i.toGMTString()):s="",u=location.hostname,u.indexOf(".")===-1?document.cookie=t+"="+r+s+"; path=/":(a=u.split("."),a.shift(),o="."+a.join("."),ls({name:t,value:r,expires:s,domain:o}),(nt.get(t)==null||nt.get(t)!=r)&&(o="."+u,ls({name:t,value:r,expires:s,domain:o})))}static get(t){for(var r=t+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){var a=n[o];if(a=a.replace(/^\s+/,""),a.indexOf(r)==0)return a.substring(r.length,a.length)}return null}static erase(t){nt.set(t,"",-1)}};function ls(e){let{name:t,value:r,expires:n,domain:o}=e;document.cookie=`${t}=${r}${n}; path=/; domain=${o}; SameSite=Lax`}function Op(){return da()?localStorage:us()?new ot:Ap()?sessionStorage:new Dt}var ot=class{getItem(t){return nt.get(`${ot.prefix}${t}`)}removeItem(t){nt.erase(`${ot.prefix}${t}`)}setItem(t,r){nt.set(`${ot.prefix}${t}`,r)}};ot.prefix="coveo_";var ds=class{constructor(){this.cookieStorage=new ot}getItem(t){return localStorage.getItem(t)||this.cookieStorage.getItem(t)}removeItem(t){this.cookieStorage.removeItem(t),localStorage.removeItem(t)}setItem(t,r){localStorage.setItem(t,r),this.cookieStorage.setItem(t,r)}},Dt=class{getItem(t){return null}removeItem(t){}setItem(t,r){}},sr="__coveo.analytics.history",fs=20,ps=1e3*60,ms=75,cr=class{constructor(t){this.store=t||Op()}addElement(t){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=this.getHistoryWithInternalTime();r!=null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t])}addElementAsync(t){return Q(this,void 0,void 0,function*(){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=yield this.getHistoryWithInternalTimeAsync();r!=null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t])})}getHistory(){let t=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(t))}getHistoryAsync(){return Q(this,void 0,void 0,function*(){let t=yield this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(t))})}getHistoryWithInternalTime(){try{let t=this.store.getItem(sr);return t&&typeof t=="string"?JSON.parse(t):[]}catch{return[]}}getHistoryWithInternalTimeAsync(){return Q(this,void 0,void 0,function*(){try{let t=yield this.store.getItem(sr);return t?JSON.parse(t):[]}catch{return[]}})}setHistory(t){try{this.store.setItem(sr,JSON.stringify(t.slice(0,fs)))}catch{}}clear(){try{this.store.removeItem(sr)}catch{}}getMostRecentElement(){let t=this.getHistoryWithInternalTime();return t!=null?t.sort((n,o)=>(o.internalTime||0)-(n.internalTime||0))[0]:null}cropQueryElement(t){return t.name&&t.value&&t.name.toLowerCase()==="query"&&(t.value=t.value.slice(0,ms)),t}isValidEntry(t){let r=this.getMostRecentElement();return r&&r.value==t.value?(t.internalTime||0)-(r.internalTime||0)>ps:!0}stripInternalTime(t){return t.map(r=>{let{name:n,time:o,value:a}=r;return{name:n,time:o,value:a}})}stripEmptyQuery(t){let{name:r,time:n,value:o}=t;return r&&typeof o=="string"&&r.toLowerCase()==="query"&&o.trim()===""?{name:r,time:n}:t}stripEmptyQueries(t){return t.map(r=>this.stripEmptyQuery(r))}},gs=Object.freeze({__proto__:null,STORE_KEY:sr,MAX_NUMBER_OF_HISTORY_ELEMENTS:fs,MIN_THRESHOLD_FOR_DUPLICATE_VALUE:ps,MAX_VALUE_SIZE:ms,HistoryStore:cr,default:cr}),Ip=(e,t)=>Q(void 0,void 0,void 0,function*(){return e===oe.view?(yield Ep(t.contentIdValue),Object.assign({location:window.location.toString(),referrer:document.referrer,title:document.title},t)):t}),Ep=e=>Q(void 0,void 0,void 0,function*(){let t=new cr,r={name:"PageView",value:e,time:JSON.stringify(new Date)};yield t.addElementAsync(r)}),Tt=e=>e?(Number(e)^kp(new Uint8Array(1))[0]%16>>Number(e)/4).toString(16):(`${1e7}`+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,Tt),kp=e=>{if(wp())return crypto.getRandomValues(e);for(var t=0,r=0;t<e.length;t++)(t&3)==0&&(r=Math.random()*4294967296),e[t]=r>>>((t&3)<<3)&255;return e},xe=Object.keys,fa={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},Dp=xe(fa).map(e=>fa[e]),Tp=[...Dp].join("|"),Vp=new RegExp(`^(${Tp}$)`),jp={svcAction:"svc_action",svcActionData:"svc_action_data"},Np=e=>xe(e).filter(t=>e[t]!==void 0).reduce((t,r)=>{let n=fa[r]||r;return Object.assign(Object.assign({},t),{[n]:e[r]})},{}),Mp=e=>Vp.test(e),Lp=[Mp],hs={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps",group:"group"},ys={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr",group:"group"},pe={action:"pa",list:"pal",listSource:"pls"},Wr={id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"},Qp=["loyaltyCardId","loyaltyTier","thirdPartyPersona","companyName","favoriteStore","storeName","userIndustry","userRole","userDepartment","businessUnit"],pa={id:"quoteId",affiliation:"quoteAffiliation"},ma={id:"reviewId",rating:"reviewRating",comment:"reviewComment"},Up={add:pe,bookmark_add:pe,bookmark_remove:pe,click:pe,checkout:pe,checkout_option:pe,detail:pe,impression:pe,remove:pe,refund:Object.assign(Object.assign({},pe),Wr),purchase:Object.assign(Object.assign({},pe),Wr),quickview:pe,quote:Object.assign(Object.assign({},pe),pa),review:Object.assign(Object.assign({},pe),ma)},$p=xe(hs).map(e=>hs[e]),Bp=xe(ys).map(e=>ys[e]),_p=xe(pe).map(e=>pe[e]),Hp=xe(Wr).map(e=>Wr[e]),zp=xe(ma).map(e=>ma[e]),Wp=xe(pa).map(e=>pa[e]),Yp=[...$p,"custom"].join("|"),Kp=[...Bp,"custom"].join("|"),Ss="(pr[0-9]+)",vs="(il[0-9]+pi[0-9]+)",Gp=new RegExp(`^${Ss}(${Yp})$`),Jp=new RegExp(`^(${vs}(${Kp}))|(il[0-9]+nm)$`),Zp=new RegExp(`^(${_p.join("|")})$`),Xp=new RegExp(`^(${Hp.join("|")})$`),em=new RegExp(`^${Ss}custom$`),tm=new RegExp(`^${vs}custom$`),rm=new RegExp(`^(${[...Qp,...zp,...Wp].join("|")})$`),nm=e=>Gp.test(e),om=e=>Jp.test(e),am=e=>Zp.test(e),im=e=>Xp.test(e),sm=e=>rm.test(e),cm=[om,nm,am,im,sm],um=[em,tm],lm={anonymizeIp:"aip"},dm={eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"},fm={hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"},pm=["contentId","contentIdKey","contentType","searchHub","tab","searchUid","permanentId","contentLocale"],mm=Object.assign(Object.assign(Object.assign(Object.assign({},lm),dm),fm),pm.reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:t}),{})),ga=Object.assign(Object.assign({},mm),jp),gm=e=>{let t=!!e.action&&Up[e.action]||{};return xe(e).reduce((r,n)=>{let o=t[n]||ga[n]||n;return Object.assign(Object.assign({},r),{[o]:e[n]})},{})},hm=xe(ga).map(e=>ga[e]),ym=e=>hm.indexOf(e)!==-1,Sm=e=>e==="custom",vm=e=>[...cm,...Lp,ym,Sm].some(t=>t(e)),Cm=e=>xe(e).reduce((t,r)=>{let n=bm(r);return n?Object.assign(Object.assign({},t),Rm(n,e[r])):Object.assign(Object.assign({},t),{[r]:e[r]})},{}),bm=e=>{let t;return[...um].every(r=>{var n;return t=(n=r.exec(e))===null||n===void 0?void 0:n[1],!Boolean(t)}),t},Rm=(e,t)=>xe(t).reduce((r,n)=>Object.assign(Object.assign({},r),{[`${e}${n}`]:t[n]}),{}),Cs=class{constructor(t){this.opts=t}sendEvent(t,r){return Q(this,void 0,void 0,function*(){if(!navigator.sendBeacon)throw new Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');let{baseUrl:n,preprocessRequest:o}=this.opts,a=this.encodeForEventType(t,r),i=yield this.getQueryParamsForEventType(t),s={url:`${n}/analytics/${t}?${i}`,body:new Blob([a],{type:"application/x-www-form-urlencoded"})},{url:u,body:c}=Object.assign(Object.assign({},s),o?yield o(s,"analyticsBeacon"):{});console.log(`Sending beacon for "${t}" with: `,JSON.stringify(r)),navigator.sendBeacon(u,c)})}encodeForEventType(t,r){return this.isEventTypeLegacy(t)?this.encodeForLegacyType(t,r):this.encodeForFormUrlEncoded(Object.assign({access_token:this.opts.token},r))}getQueryParamsForEventType(t){return Q(this,void 0,void 0,function*(){let{token:r,visitorIdProvider:n}=this.opts,o=yield n.getCurrentVisitorId();return[r&&this.isEventTypeLegacy(t)?`access_token=${r}`:"",o?`visitorId=${o}`:"","discardVisitInfo=true"].filter(a=>!!a).join("&")})}isEventTypeLegacy(t){return[oe.click,oe.custom,oe.search,oe.view].indexOf(t)!==-1}encodeForLegacyType(t,r){return`${t}Event=${encodeURIComponent(JSON.stringify(r))}`}encodeForFormUrlEncoded(t){return Object.keys(t).filter(r=>!!t[r]).map(r=>`${encodeURIComponent(r)}=${encodeURIComponent(this.encodeValue(t[r]))}`).join("&")}encodeValue(t){return typeof t=="number"||typeof t=="string"||typeof t=="boolean"?t:JSON.stringify(t)}},bs=class{sendEvent(t,r){return Q(this,void 0,void 0,function*(){return Promise.resolve()})}},xm=window.fetch,ha=class{constructor(t){this.opts=t}sendEvent(t,r){return Q(this,void 0,void 0,function*(){let{baseUrl:n,visitorIdProvider:o,preprocessRequest:a}=this.opts,i=this.shouldAppendVisitorId(t)?yield this.getVisitorIdParam():"",s={url:`${n}/analytics/${t}${i}`,credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(r)},u=Object.assign(Object.assign({},s),a?yield a(s,"analyticsFetch"):{}),{url:c}=u,d=zr(u,["url"]),l=yield xm(c,d);if(l.ok){let p=yield l.json();return p.visitorId&&o.setCurrentVisitorId(p.visitorId),p}else{try{l.json()}catch{}throw console.error(`An error has occured when sending the "${t}" event.`,l,r),new Error(`An error has occurred when sending the "${t}" event. Check the console logs for more details.`)}})}shouldAppendVisitorId(t){return[oe.click,oe.custom,oe.search,oe.view].indexOf(t)!==-1}getVisitorIdParam(){return Q(this,void 0,void 0,function*(){let{visitorIdProvider:t}=this.opts,r=yield t.getCurrentVisitorId();return r?`?visitor=${r}`:""})}getHeaders(){let{token:t}=this.opts;return Object.assign(Object.assign({},t?{Authorization:`Bearer ${t}`}:{}),{"Content-Type":"application/json"})}},Rs=class{constructor(t,r){da()&&us()?this.storage=new ds:da()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new Dt),this.client=new ha(t),this.beaconClient=new Cs(t),window.addEventListener("beforeunload",()=>{let n=r();for(let{eventType:o,payload:a}of n)this.beaconClient.sendEvent(o,a)})}},xs=class{constructor(t,r){this.storage=r||new Dt,this.client=new ha(t)}},As=class{constructor(){this.storage=new Dt,this.client=new bs}},Am="xx",Fm=e=>(e==null?void 0:e.startsWith(Am))||!1,wm=`
        We've detected you're using React Native but have not provided the corresponding runtime, 
        for an optimal experience please install @react-native-async-storage/async-storage and instantiate 
        your analytics client as follows:
        
        import {ReactNativeRuntime} from 'coveo.analytics/react-native';
        
        const analytics = new CoveoAnalytics({
            ...your options,
            runtimeEnvironment: new ReactNativeRuntime();
        })
    `;function Pm(){return typeof navigator!="undefined"&&navigator.product=="ReactNative"}var qm=["1",1,"yes",!0];function Om(){return la()&&[navigator.globalPrivacyControl,navigator.doNotTrack,navigator.msDoNotTrack,window.doNotTrack].some(e=>qm.indexOf(e)!==-1)}var Im="v15",Em={default:"https://analytics.cloud.coveo.com/rest/ua",production:"https://analytics.cloud.coveo.com/rest/ua",hipaa:"https://analyticshipaa.cloud.coveo.com/rest/ua"},Ve=class{constructor(t){if(!t)throw new Error("You have to pass options to this constructor");this.options=Object.assign(Object.assign({},this.defaultOptions),t),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[Ip,qp].concat(this.options.beforeSendHooks),this.afterSendHooks=this.options.afterSendHooks,this.eventTypeMapping={};let r={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};this.runtime=this.options.runtimeEnvironment||this.initRuntime(r),Om()&&(this.clear(),this.runtime.storage=new Dt)}get defaultOptions(){return{endpoint:Em.default,token:"",version:Im,beforeSendHooks:[],afterSendHooks:[]}}initRuntime(t){return xp()&&cs()?new Rs(t,()=>{let r=[...this.bufferedRequests];return this.bufferedRequests=[],r}):(Pm()&&console.warn(wm),new xs(t))}get storage(){return this.runtime.storage}determineVisitorId(){return Q(this,void 0,void 0,function*(){try{return(yield this.storage.getItem("visitorId"))||Tt()}catch(t){return console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",t),Tt()}})}getCurrentVisitorId(){return Q(this,void 0,void 0,function*(){if(!this.visitorId){let t=yield this.determineVisitorId();yield this.setCurrentVisitorId(t)}return this.visitorId})}setCurrentVisitorId(t){return Q(this,void 0,void 0,function*(){this.visitorId=t,yield this.storage.setItem("visitorId",t)})}getParameters(t,...r){return Q(this,void 0,void 0,function*(){return yield this.resolveParameters(t,...r)})}getPayload(t,...r){return Q(this,void 0,void 0,function*(){let n=yield this.resolveParameters(t,...r);return yield this.resolvePayloadForParameters(t,n)})}get currentVisitorId(){return typeof(this.visitorId||this.storage.getItem("visitorId"))!="string"&&this.setCurrentVisitorId(Tt()),this.visitorId}set currentVisitorId(t){this.visitorId=t,this.storage.setItem("visitorId",t)}resolveParameters(t,...r){return Q(this,void 0,void 0,function*(){let{variableLengthArgumentsNames:n=[],addVisitorIdParameter:o=!1,usesMeasurementProtocol:a=!1}=this.eventTypeMapping[t]||{};return yield[l=>n.length>0?this.parseVariableArgumentsPayload(n,l):l[0],l=>Q(this,void 0,void 0,function*(){return Object.assign(Object.assign({},l),{visitorId:o?yield this.getCurrentVisitorId():""})}),l=>a?this.ensureAnonymousUserWhenUsingApiKey(l):l,l=>this.beforeSendHooks.reduce((p,f)=>Q(this,void 0,void 0,function*(){let g=yield p;return yield f(t,g)}),l)].reduce((l,p)=>Q(this,void 0,void 0,function*(){let f=yield l;return yield p(f)}),Promise.resolve(r))})}resolvePayloadForParameters(t,r){return Q(this,void 0,void 0,function*(){let{usesMeasurementProtocol:n=!1}=this.eventTypeMapping[t]||{};return yield[d=>this.removeEmptyPayloadValues(d,t),d=>this.validateParams(d),d=>n?gm(d):d,d=>n?this.removeUnknownParameters(d):d,d=>n?this.processCustomParameters(d):d].reduce((d,l)=>Q(this,void 0,void 0,function*(){let p=yield d;return yield l(p)}),Promise.resolve(r))})}sendEvent(t,...r){return Q(this,void 0,void 0,function*(){let{newEventType:n=t}=this.eventTypeMapping[t]||{},o=yield this.resolveParameters(t,...r),a=yield this.resolvePayloadForParameters(t,o);return this.bufferedRequests.push({eventType:n,payload:a}),yield Promise.all(this.afterSendHooks.map(i=>i(t,o))),yield this.deferExecution(),yield this.sendFromBufferWithFetch()})}deferExecution(){return new Promise(t=>setTimeout(t,0))}sendFromBufferWithFetch(){return Q(this,void 0,void 0,function*(){let t=this.bufferedRequests.shift();if(t){let{eventType:r,payload:n}=t;return this.runtime.client.sendEvent(r,n)}})}clear(){this.storage.removeItem("visitorId"),new cr().clear()}sendSearchEvent(t){return Q(this,void 0,void 0,function*(){return this.sendEvent(oe.search,t)})}sendClickEvent(t){return Q(this,void 0,void 0,function*(){return this.sendEvent(oe.click,t)})}sendCustomEvent(t){return Q(this,void 0,void 0,function*(){return this.sendEvent(oe.custom,t)})}sendViewEvent(t){return Q(this,void 0,void 0,function*(){return this.sendEvent(oe.view,t)})}getVisit(){return Q(this,void 0,void 0,function*(){let r=yield(yield fetch(`${this.baseUrl}/analytics/visit`)).json();return this.visitorId=r.visitorId,r})}getHealth(){return Q(this,void 0,void 0,function*(){return yield(yield fetch(`${this.baseUrl}/analytics/monitoring/health`)).json()})}registerBeforeSendEventHook(t){this.beforeSendHooks.push(t)}registerAfterSendEventHook(t){this.afterSendHooks.push(t)}addEventTypeMapping(t,r){this.eventTypeMapping[t]=r}parseVariableArgumentsPayload(t,r){let n={};for(let o=0,a=r.length;o<a;o++){let i=r[o];if(typeof i=="string")n[t[o]]=i;else if(typeof i=="object")return Object.assign(Object.assign({},n),i)}return n}isKeyAllowedEmpty(t,r){return({[oe.search]:["queryText"]}[t]||[]).indexOf(r)!==-1}removeEmptyPayloadValues(t,r){let n=o=>typeof o!="undefined"&&o!==null&&o!=="";return Object.keys(t).filter(o=>this.isKeyAllowedEmpty(r,o)||n(t[o])).reduce((o,a)=>Object.assign(Object.assign({},o),{[a]:t[a]}),{})}removeUnknownParameters(t){return Object.keys(t).filter(n=>{if(vm(n))return!0;console.log(n,"is not processed by coveoua")}).reduce((n,o)=>Object.assign(Object.assign({},n),{[o]:t[o]}),{})}processCustomParameters(t){let{custom:r}=t,n=zr(t,["custom"]),o=this.lowercaseKeys(r),a=Cm(n);return Object.assign(Object.assign({},o),a)}lowercaseKeys(t){return Object.keys(t||{}).reduce((n,o)=>Object.assign(Object.assign({},n),{[o.toLowerCase()]:t[o]}),{})}validateParams(t){let{anonymizeIp:r}=t,n=zr(t,["anonymizeIp"]);return r!==void 0&&["0","false","undefined","null","{}","[]",""].indexOf(`${r}`.toLowerCase())==-1&&(n.anonymizeIp=1),n}ensureAnonymousUserWhenUsingApiKey(t){let{userId:r}=t,n=zr(t,["userId"]);return Fm(this.options.token)&&!r?(n.userId="anonymous",n):t}get baseUrl(){let{version:t,endpoint:r}=this.options,n=r.indexOf(".cloud.coveo.com")!==-1;return`${r}${n?"":"/rest"}/${t}`}},C;(function(e){e.interfaceLoad="interfaceLoad",e.interfaceChange="interfaceChange",e.didyoumeanAutomatic="didyoumeanAutomatic",e.didyoumeanClick="didyoumeanClick",e.resultsSort="resultsSort",e.searchboxSubmit="searchboxSubmit",e.searchboxClear="searchboxClear",e.searchboxAsYouType="searchboxAsYouType",e.breadcrumbFacet="breadcrumbFacet",e.breadcrumbResetAll="breadcrumbResetAll",e.documentQuickview="documentQuickview",e.documentOpen="documentOpen",e.omniboxAnalytics="omniboxAnalytics",e.omniboxFromLink="omniboxFromLink",e.searchFromLink="searchFromLink",e.triggerNotify="notify",e.triggerExecute="execute",e.triggerQuery="query",e.triggerRedirect="redirect",e.pagerResize="pagerResize",e.pagerNumber="pagerNumber",e.pagerNext="pagerNext",e.pagerPrevious="pagerPrevious",e.pagerScrolling="pagerScrolling",e.staticFilterClearAll="staticFilterClearAll",e.staticFilterSelect="staticFilterSelect",e.staticFilterDeselect="staticFilterDeselect",e.facetClearAll="facetClearAll",e.facetSearch="facetSearch",e.facetSelect="facetSelect",e.facetSelectAll="facetSelectAll",e.facetDeselect="facetDeselect",e.facetExclude="facetExclude",e.facetUnexclude="facetUnexclude",e.facetUpdateSort="facetUpdateSort",e.facetShowMore="showMoreFacetResults",e.facetShowLess="showLessFacetResults",e.queryError="query",e.queryErrorBack="errorBack",e.queryErrorClear="errorClearQuery",e.queryErrorRetry="errorRetry",e.recommendation="recommendation",e.recommendationInterfaceLoad="recommendationInterfaceLoad",e.recommendationOpen="recommendationOpen",e.likeSmartSnippet="likeSmartSnippet",e.dislikeSmartSnippet="dislikeSmartSnippet",e.expandSmartSnippet="expandSmartSnippet",e.collapseSmartSnippet="collapseSmartSnippet",e.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",e.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",e.sendSmartSnippetReason="sendSmartSnippetReason",e.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",e.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",e.openSmartSnippetSource="openSmartSnippetSource",e.recentQueryClick="recentQueriesClick",e.clearRecentQueries="clearRecentQueries",e.recentResultClick="recentResultClick",e.clearRecentResults="clearRecentResults",e.noResultsBack="noResultsBack"})(C||(C={}));var km={[C.triggerNotify]:"queryPipelineTriggers",[C.triggerExecute]:"queryPipelineTriggers",[C.triggerQuery]:"queryPipelineTriggers",[C.triggerRedirect]:"queryPipelineTriggers",[C.queryError]:"errors",[C.queryErrorBack]:"errors",[C.queryErrorClear]:"errors",[C.queryErrorRetry]:"errors",[C.pagerNext]:"getMoreResults",[C.pagerPrevious]:"getMoreResults",[C.pagerNumber]:"getMoreResults",[C.pagerResize]:"getMoreResults",[C.pagerScrolling]:"getMoreResults",[C.facetSearch]:"facet",[C.facetShowLess]:"facet",[C.facetShowMore]:"facet",[C.recommendation]:"recommendation",[C.likeSmartSnippet]:"smartSnippet",[C.dislikeSmartSnippet]:"smartSnippet",[C.expandSmartSnippet]:"smartSnippet",[C.collapseSmartSnippet]:"smartSnippet",[C.openSmartSnippetFeedbackModal]:"smartSnippet",[C.closeSmartSnippetFeedbackModal]:"smartSnippet",[C.sendSmartSnippetReason]:"smartSnippet",[C.expandSmartSnippetSuggestion]:"smartSnippetSuggestions",[C.collapseSmartSnippetSuggestion]:"smartSnippetSuggestions",[C.clearRecentQueries]:"recentQueries",[C.recentResultClick]:"recentlyClickedDocuments",[C.clearRecentResults]:"recentlyClickedDocuments"},ur=class{constructor(){this.runtime=new As,this.currentVisitorId=""}getPayload(){return Promise.resolve()}getParameters(){return Promise.resolve()}sendEvent(){return Promise.resolve()}sendSearchEvent(){return Promise.resolve()}sendClickEvent(){return Promise.resolve()}sendCustomEvent(){return Promise.resolve()}sendViewEvent(){return Promise.resolve()}getVisit(){return Promise.resolve({id:"",visitorId:""})}getHealth(){return Promise.resolve({status:""})}registerBeforeSendEventHook(){}registerAfterSendEventHook(){}addEventTypeMapping(){}};function Dm(e){let t="";return e.filter(r=>{let n=r!==t;return t=r,n})}function Tm(e){return e.map(t=>t.replace(/;/g,""))}function Fs(e){let t=256,r=e.join(";");return r.length<=t?r:Fs(e.slice(1))}var ws=e=>{let t=Tm(e),r=Dm(t);return Fs(r)};function Ps(e){let t=typeof e.partialQueries=="string"?e.partialQueries:ws(e.partialQueries),r=typeof e.suggestions=="string"?e.suggestions:ws(e.suggestions);return Object.assign(Object.assign({},e),{partialQueries:t,suggestions:r})}var ya=class{constructor(t,r){this.opts=t,this.provider=r,this.coveoAnalyticsClient=t.enableAnalytics===!1?new ur:new Ve(t)}disable(){this.coveoAnalyticsClient instanceof Ve&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new ur}enable(){this.coveoAnalyticsClient=new Ve(this.opts)}logInterfaceLoad(){return this.logSearchEvent(C.interfaceLoad)}logRecommendationInterfaceLoad(){return this.logSearchEvent(C.recommendationInterfaceLoad)}logRecommendation(){return this.logCustomEvent(C.recommendation)}logRecommendationOpen(t,r){return this.logClickEvent(C.recommendationOpen,t,r)}logStaticFilterClearAll(t){return this.logSearchEvent(C.staticFilterClearAll,t)}logStaticFilterSelect(t){return this.logSearchEvent(C.staticFilterSelect,t)}logStaticFilterDeselect(t){return this.logSearchEvent(C.staticFilterDeselect,t)}logFetchMoreResults(){return this.logCustomEvent(C.pagerScrolling,{type:"getMoreResults"})}logInterfaceChange(t){return this.logSearchEvent(C.interfaceChange,t)}logDidYouMeanAutomatic(){return this.logSearchEvent(C.didyoumeanAutomatic)}logDidYouMeanClick(){return this.logSearchEvent(C.didyoumeanClick)}logResultsSort(t){return this.logSearchEvent(C.resultsSort,t)}logSearchboxSubmit(){return this.logSearchEvent(C.searchboxSubmit)}logSearchboxClear(){return this.logSearchEvent(C.searchboxClear)}logSearchboxAsYouType(){return this.logSearchEvent(C.searchboxAsYouType)}logBreadcrumbFacet(t){return this.logSearchEvent(C.breadcrumbFacet,t)}logBreadcrumbResetAll(){return this.logSearchEvent(C.breadcrumbResetAll)}logDocumentQuickview(t,r){return this.logClickEvent(C.documentQuickview,t,r)}logDocumentOpen(t,r){return this.logClickEvent(C.documentOpen,t,r)}logOmniboxAnalytics(t){return this.logSearchEvent(C.omniboxAnalytics,Ps(t))}logOmniboxFromLink(t){return this.logSearchEvent(C.omniboxFromLink,Ps(t))}logSearchFromLink(){return this.logSearchEvent(C.searchFromLink)}logTriggerNotify(t){return this.logCustomEvent(C.triggerNotify,t)}logTriggerExecute(t){return this.logCustomEvent(C.triggerExecute,t)}logTriggerQuery(){let t={query:this.provider.getSearchEventRequestPayload().queryText};return this.logCustomEvent(C.triggerQuery,t)}logTriggerRedirect(t){let r=Object.assign(Object.assign({},t),{query:this.provider.getSearchEventRequestPayload().queryText});return this.logCustomEvent(C.triggerRedirect,r)}logPagerResize(t){return this.logCustomEvent(C.pagerResize,t)}logPagerNumber(t){return this.logCustomEvent(C.pagerNumber,t)}logPagerNext(t){return this.logCustomEvent(C.pagerNext,t)}logPagerPrevious(t){return this.logCustomEvent(C.pagerPrevious,t)}logPagerScrolling(){return this.logCustomEvent(C.pagerScrolling)}logFacetClearAll(t){return this.logSearchEvent(C.facetClearAll,t)}logFacetSearch(t){return this.logSearchEvent(C.facetSearch,t)}logFacetSelect(t){return this.logSearchEvent(C.facetSelect,t)}logFacetDeselect(t){return this.logSearchEvent(C.facetDeselect,t)}logFacetExclude(t){return this.logSearchEvent(C.facetExclude,t)}logFacetUnexclude(t){return this.logSearchEvent(C.facetUnexclude,t)}logFacetSelectAll(t){return this.logSearchEvent(C.facetSelectAll,t)}logFacetUpdateSort(t){return this.logSearchEvent(C.facetUpdateSort,t)}logFacetShowMore(t){return this.logCustomEvent(C.facetShowMore,t)}logFacetShowLess(t){return this.logCustomEvent(C.facetShowLess,t)}logQueryError(t){return this.logCustomEvent(C.queryError,t)}logQueryErrorBack(){return Q(this,void 0,void 0,function*(){return yield this.logCustomEvent(C.queryErrorBack),this.logSearchEvent(C.queryErrorBack)})}logQueryErrorRetry(){return Q(this,void 0,void 0,function*(){return yield this.logCustomEvent(C.queryErrorRetry),this.logSearchEvent(C.queryErrorRetry)})}logQueryErrorClear(){return Q(this,void 0,void 0,function*(){return yield this.logCustomEvent(C.queryErrorClear),this.logSearchEvent(C.queryErrorClear)})}logLikeSmartSnippet(){return this.logCustomEvent(C.likeSmartSnippet)}logDislikeSmartSnippet(){return this.logCustomEvent(C.dislikeSmartSnippet)}logExpandSmartSnippet(){return this.logCustomEvent(C.expandSmartSnippet)}logCollapseSmartSnippet(){return this.logCustomEvent(C.collapseSmartSnippet)}logOpenSmartSnippetFeedbackModal(){return this.logCustomEvent(C.openSmartSnippetFeedbackModal)}logCloseSmartSnippetFeedbackModal(){return this.logCustomEvent(C.closeSmartSnippetFeedbackModal)}logSmartSnippetFeedbackReason(t,r){return this.logCustomEvent(C.sendSmartSnippetReason,{reason:t,details:r})}logExpandSmartSnippetSuggestion(t){return this.logCustomEvent(C.expandSmartSnippetSuggestion,{documentId:t})}logCollapseSmartSnippetSuggestion(t){return this.logCustomEvent(C.collapseSmartSnippetSuggestion,{documentId:t})}logOpenSmartSnippetSource(t,r){return this.logClickEvent(C.openSmartSnippetSource,t,r)}logRecentQueryClick(){return this.logSearchEvent(C.recentQueryClick)}logClearRecentQueries(){return this.logCustomEvent(C.clearRecentQueries)}logRecentResultClick(t,r){return this.logCustomEvent(C.recentResultClick,{info:t,identifier:r})}logClearRecentResults(){return this.logCustomEvent(C.clearRecentResults)}logNoResultsBack(){return this.logSearchEvent(C.noResultsBack)}logCustomEvent(t,r){return Q(this,void 0,void 0,function*(){let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),o=Object.assign(Object.assign({},yield this.getBaseCustomEventRequest(n)),{eventType:km[t],eventValue:t});return this.coveoAnalyticsClient.sendCustomEvent(o)})}logCustomEventWithType(t,r,n){return Q(this,void 0,void 0,function*(){let o=Object.assign(Object.assign({},this.provider.getBaseMetadata()),n),a=Object.assign(Object.assign({},yield this.getBaseCustomEventRequest(o)),{eventType:r,eventValue:t});return this.coveoAnalyticsClient.sendCustomEvent(a)})}logSearchEvent(t,r){return Q(this,void 0,void 0,function*(){return this.coveoAnalyticsClient.sendSearchEvent(yield this.getBaseSearchEventRequest(t,r))})}logClickEvent(t,r,n,o){return Q(this,void 0,void 0,function*(){let a=Object.assign(Object.assign(Object.assign({},r),yield this.getBaseEventRequest(Object.assign(Object.assign({},n),o))),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:t});return this.coveoAnalyticsClient.sendClickEvent(a)})}getBaseSearchEventRequest(t,r){return Q(this,void 0,void 0,function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(r)),this.provider.getSearchEventRequestPayload()),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:t})})}getBaseCustomEventRequest(t){return Q(this,void 0,void 0,function*(){return Object.assign(Object.assign({},yield this.getBaseEventRequest(t)),{lastSearchQueryUid:this.provider.getSearchUID()})})}getBaseEventRequest(t){return Q(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t);return Object.assign(Object.assign({},this.getOrigins()),{customData:r,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})})}getOrigins(){var t,r;return{originContext:(r=(t=this.provider).getOriginContext)===null||r===void 0?void 0:r.call(t),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof Ve?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}},qs=e=>`${e.protocol}//${e.hostname}${e.pathname.indexOf("/")===0?e.pathname:`/${e.pathname}`}${e.search}`,lr={pageview:"pageview",event:"event"},Os=class{constructor({client:t,uuidGenerator:r=Tt}){this.actionData={},this.client=t,this.uuidGenerator=r,this.pageViewId=r(),this.nextPageViewId=this.pageViewId,this.currentLocation=qs(window.location),this.lastReferrer=document.referrer,this.addHooks()}setAction(t,r){this.action=t,this.actionData=r}clearData(){this.clearPluginData(),this.action=void 0,this.actionData={}}getLocationInformation(t,r){return Object.assign({hitType:t},this.getNextValues(t,r))}updateLocationInformation(t,r){this.updateLocationForNextPageView(t,r)}getDefaultContextInformation(t){let r={title:document.title,encoding:document.characterSet},n={screenResolution:`${screen.width}x${screen.height}`,screenColor:`${screen.colorDepth}-bit`},o={language:navigator.language,userAgent:navigator.userAgent},a={time:Date.now().toString(),eventId:this.uuidGenerator()};return Object.assign(Object.assign(Object.assign(Object.assign({},a),n),o),r)}updateLocationForNextPageView(t,r){let{pageViewId:n,referrer:o,location:a}=this.getNextValues(t,r);this.lastReferrer=o,this.pageViewId=n,this.currentLocation=a,t===lr.pageview&&(this.nextPageViewId=this.uuidGenerator(),this.hasSentFirstPageView=!0)}getNextValues(t,r){return{pageViewId:t===lr.pageview?this.nextPageViewId:this.pageViewId,referrer:t===lr.pageview&&this.hasSentFirstPageView?this.currentLocation:this.lastReferrer,location:t===lr.pageview?this.getCurrentLocationFromPayload(r):this.currentLocation}}getCurrentLocationFromPayload(t){if(t.page){let r=o=>o.replace(/^\/?(.*)$/,"/$1");return`${(o=>o.split("/").slice(0,3).join("/"))(this.currentLocation)}${r(t.page)}`}else return qs(window.location)}},Yr=Object.assign({},lr),Is=Object.keys(Yr).map(e=>Yr[e]),dr=class extends Os{constructor({client:t,uuidGenerator:r=Tt}){super({client:t,uuidGenerator:r});this.ticket={}}addHooks(){this.addHooksForEvent(),this.addHooksForPageView(),this.addHooksForSVCEvents()}setTicket(t){this.ticket=t}clearPluginData(){this.ticket={}}addHooksForSVCEvents(){this.client.registerBeforeSendEventHook((t,...[r])=>Is.indexOf(t)!==-1?this.addSVCDataToPayload(t,r):r),this.client.registerAfterSendEventHook((t,...[r])=>(Is.indexOf(t)!==-1&&this.updateLocationInformation(t,r),r))}addHooksForPageView(){this.client.addEventTypeMapping(Yr.pageview,{newEventType:oe.collect,variableLengthArgumentsNames:["page"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addHooksForEvent(){this.client.addEventTypeMapping(Yr.event,{newEventType:oe.collect,variableLengthArgumentsNames:["eventCategory","eventAction","eventLabel","eventValue"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addSVCDataToPayload(t,r){var n;let o=Object.assign(Object.assign(Object.assign(Object.assign({},this.getLocationInformation(t,r)),this.getDefaultContextInformation(t)),this.action?{svcAction:this.action}:{}),Object.keys((n=this.actionData)!==null&&n!==void 0?n:{}).length>0?{svcActionData:this.actionData}:{}),a=this.getTicketPayload();return this.clearData(),Object.assign(Object.assign(Object.assign({},a),o),r)}getTicketPayload(){return Np(this.ticket)}};dr.Id="svc";var Kr;(function(e){e.click="click",e.flowStart="flowStart"})(Kr||(Kr={}));var qe;(function(e){e.enterInterface="ticket_create_start",e.fieldUpdate="ticket_field_update",e.fieldSuggestionClick="ticket_classification_click",e.suggestionClick="suggestion_click",e.suggestionRate="suggestion_rate",e.nextCaseStep="ticket_next_stage",e.caseCancelled="ticket_cancel",e.caseSolved="ticket_cancel",e.caseCreated="ticket_create"})(qe||(qe={}));var Gr;(function(e){e.quit="Quit",e.solved="Solved"})(Gr||(Gr={}));var Sa=class{constructor(t,r){var n;this.options=t,this.provider=r;let o=(n=t.enableAnalytics)!==null&&n!==void 0?n:!0;this.coveoAnalyticsClient=o?new Ve(t):new ur,this.svc=new dr({client:this.coveoAnalyticsClient})}disable(){this.coveoAnalyticsClient instanceof Ve&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new ur,this.svc=new dr({client:this.coveoAnalyticsClient})}enable(){this.coveoAnalyticsClient=new Ve(this.options),this.svc=new dr({client:this.coveoAnalyticsClient})}logEnterInterface(t){return this.svc.setAction(qe.enterInterface),this.svc.setTicket(t.ticket),this.sendFlowStartEvent()}logUpdateCaseField(t){return this.svc.setAction(qe.fieldUpdate,{fieldName:t.fieldName}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logSelectFieldSuggestion(t){return this.svc.setAction(qe.fieldSuggestionClick,t.suggestion),this.svc.setTicket(t.ticket),this.sendClickEvent()}logSelectDocumentSuggestion(t){return this.svc.setAction(qe.suggestionClick,t.suggestion),this.svc.setTicket(t.ticket),this.sendClickEvent()}logRateDocumentSuggestion(t){return this.svc.setAction(qe.suggestionRate,Object.assign({rate:t.rating},t.suggestion)),this.svc.setTicket(t.ticket),this.sendClickEvent()}logMoveToNextCaseStep(t){return this.svc.setAction(qe.nextCaseStep,{stage:t==null?void 0:t.stage}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logCaseCancelled(t){return this.svc.setAction(qe.caseCancelled,{reason:Gr.quit}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logCaseSolved(t){return this.svc.setAction(qe.caseSolved,{reason:Gr.solved}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logCaseCreated(t){return this.svc.setAction(qe.caseCreated),this.svc.setTicket(t.ticket),this.sendClickEvent()}sendFlowStartEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",Kr.flowStart,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}sendClickEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",Kr.click,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}};var je=()=>({q:"",enableQuerySyntax:!1});var Ge=()=>"default";function Es(){return{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}}function Oe(){return{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],queryCorrections:[],triggers:[],questionAnswer:Es(),pipeline:""},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:""}}var Jr=e=>{let t=e.configuration.search.locale.split("-")[0];return!t||t.length!==2?"en":t};function Vt(){return{}}function jt(){return{}}function Nt(){return{}}function Mt(){return{}}var ks=(e,t)=>{if("productListing"in e&&e.productListing)return e.productListing.facets.results.find(r=>r.facetId===t);if("search"in e&&e.search)return e.search.response.facets.find(r=>r.facetId===t)};function at(e){if(!e)return{parents:[],values:[]};let t=[],r=e;for(;r.length&&r[0].children.length;)t=[...t,...r],r=r[0].children;let n=r.find(o=>o.state==="selected");return n&&(t=[...t,n],r=[]),{parents:t,values:r}}function Vm(e,t){return!!t&&t.facetId in e.categoryFacetSet}var jm=(e,t)=>{let r=ks(e,t);if(Vm(e,r))return r};var va=(e,t)=>{let r=jm(e,t);return at(r==null?void 0:r.values).parents};var Zr=()=>({url:"",clientId:"",additionalFields:[],advancedParameters:{debug:!1},products:[],facets:{results:[]},error:null,isLoading:!1,responseId:""});var Ds=(e,t)=>{let r=Vs(t,e),n=r?r.field:"",o=`${n}_${e}`;return{facetId:e,facetField:n,facetTitle:o}};function Xr(e){return{facetSet:e.facetSet||Mt(),categoryFacetSet:e.categoryFacetSet||Vt(),dateFacetSet:e.dateFacetSet||jt(),numericFacetSet:e.numericFacetSet||Nt(),..."search"in e&&{search:e.search?e.search:Oe()},..."productListing"in e&&{productListing:e.productListing?e.productListing:Zr()}}}var Ts=e=>{let t=[];return Nm(e).forEach((r,n)=>{let o=_m(e,r.facetId),a=Bm(r,n+1);if(o==="hierarchical"){if(!!!va(e,r.facetId).length)return;t.push({...a,...$m(e,r.facetId),facetType:o,state:"selected"});return}r.values.forEach((i,s)=>{if(i.state==="idle")return;let u=Mm(i,s+1,o),c=o==="specific"?Qm(i):Lm(i);t.push({...a,...u,...c})})}),t},Nm=e=>"productListing"in e&&e.productListing?e.productListing.facets.results:"search"in e&&e.search?e.search.response.facets:[],Mm=(e,t,r)=>({state:e.state,valuePosition:t,facetType:r}),Lm=e=>({displayValue:`${e.start}..${e.end}`,value:`${e.start}..${e.end}`,start:e.start,end:e.end,endInclusive:e.endInclusive}),Qm=e=>({displayValue:e.value,value:e.value}),Um=(e,t)=>va(e,t).map(n=>n.value).join(";"),$m=(e,t)=>{let r=1,n=Um(e,t);return{value:n,valuePosition:r,displayValue:n}},Bm=(e,t)=>({title:`${e.field}_${e.facetId}`,field:e.field,id:e.facetId,facetPosition:t}),Vs=(e,t)=>{var r;return e.facetSet[t]||((r=e.categoryFacetSet[t])==null?void 0:r.request)||e.dateFacetSet[t]||e.numericFacetSet[t]},_m=(e,t)=>{let r=Vs(e,t);return r?r.type:"specific"};var en="1.58.0";var tn=class{constructor(t){this.state=t}getLanguage(){return Jr(this.state)}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getBaseMetadata(){let{context:t}=this.state,r=(t==null?void 0:t.contextValues)||{},n={};for(let[o,a]of Object.entries(r)){let i=`context_${o}`;n[i]=a}return n.coveoHeadlessVersion=en,n}getSearchUID(){var t,r,n;return((t=this.state.search)==null?void 0:t.response.searchUid)||((r=this.state.recommendation)==null?void 0:r.searchUid)||((n=this.state.productListing)==null?void 0:n.responseId)||Oe().response.searchUid}getPipeline(){var t;return this.state.pipeline||((t=this.state.search)==null?void 0:t.response.pipeline)||"default"}getOriginContext(){return this.state.configuration.analytics.originContext}getOriginLevel1(){return this.state.searchHub||Ge()}getOriginLevel2(){return this.state.configuration.analytics.originLevel2}getOriginLevel3(){return this.state.configuration.analytics.originLevel3}getFacetState(){return Ts(Xr(this.state))}getIsAnonymous(){return this.state.configuration.analytics.anonymous}mapResultsToAnalyticsDocument(){var t;return(t=this.state.search)==null?void 0:t.response.results.map(r=>({documentUri:r.uri,documentUriHash:r.raw.urihash}))}get queryText(){var t;return((t=this.state.query)==null?void 0:t.q)||je().q}get responseTime(){var t;return((t=this.state.search)==null?void 0:t.duration)||Oe().duration}get numberOfResults(){var t;return((t=this.state.search)==null?void 0:t.response.results.length)||Oe().response.results.length}},js=class{constructor(t){this.state=t}getOriginLevel1(){return this.state.searchHub||Ge()}},Ns=({logger:e,state:t,analyticsClientMiddleware:r=(a,i)=>i,preprocessRequest:n,provider:o=new tn(t)})=>{let a=t.configuration.accessToken,i=t.configuration.analytics.apiBaseUrl,s=t.configuration.analytics.runtimeEnvironment,u=t.configuration.analytics.enabled,c=new ya({token:a,endpoint:i,runtimeEnvironment:s,preprocessRequest:n,beforeSendHooks:[r,(d,l)=>(e.info({...l,type:d,endpoint:i,token:a},"Analytics request"),l)]},o);return u||c.disable(),c},se=()=>new Ve({}).getCurrentVisitorId(),Ie=new gs.HistoryStore,Ms=()=>{let t=Ie.getHistory().reverse().find(r=>r.name==="PageView"&&r.value);return t?t.value:""},Ls=({logger:e,state:t,analyticsClientMiddleware:r=(a,i)=>i,preprocessRequest:n,provider:o=new js(t)})=>{let a=t.configuration.accessToken,i=t.configuration.analytics.apiBaseUrl,s=t.configuration.analytics.runtimeEnvironment,u=t.configuration.analytics.enabled,c=new Sa({enableAnalytics:u,token:a,endpoint:i,runtimeEnvironment:s,preprocessRequest:n,beforeSendHooks:[r,(d,l)=>(e.info({...l,type:d,endpoint:i,token:a},"Analytics request"),l)]},o);return u||c.disable(),c};rn.default.extend(Qs.default);rn.default.extend(Us.default);var Ca="/rest/search/v2",nn="/rest/ua",$s=()=>({organizationId:"",accessToken:"",platformUrl:na(),search:{apiBaseUrl:`${na()}${Ca}`,locale:"en-US",timezone:rn.default.tz.guess()},analytics:{enabled:!0,apiBaseUrl:`${as()}${nn}`,originContext:"Search",originLevel2:"default",originLevel3:"default",anonymous:!1,deviceId:"",userDisplayName:""}}),it=async e=>({analytics:{clientId:await se(),deviceId:e.deviceId,pageId:Ms(),clientTimestamp:new Date().toISOString(),documentReferrer:e.originLevel3,originContext:e.originContext,userDisplayName:e.userDisplayName}});function Hm(e,t){if(/^https:\/\/platform(dev|qa|hipaa)?(-)?(eu|au)?\.cloud\.coveo\.com/.test(e))return e.replace(/^(https:\/\/)platform/,"$1analytics")+nn;let n=e.match(new RegExp(`^https://(${t}\\.org)\\.coveo.com`));return n?e.replace(n[1],"analytics.cloud")+nn:e}var Bs=x($s(),e=>e.addCase(Ot,(t,r)=>{r.payload.accessToken&&(t.accessToken=r.payload.accessToken),r.payload.organizationId&&(t.organizationId=r.payload.organizationId),r.payload.platformUrl&&(t.platformUrl=r.payload.platformUrl,t.search.apiBaseUrl=`${r.payload.platformUrl}${Ca}`,t.analytics.apiBaseUrl=Hm(r.payload.platformUrl,t.organizationId))}).addCase(It,(t,r)=>{r.payload.apiBaseUrl&&(t.search.apiBaseUrl=r.payload.apiBaseUrl),r.payload.locale&&(t.search.locale=r.payload.locale),r.payload.timezone&&(t.search.timezone=r.payload.timezone)}).addCase(Ur,(t,r)=>{X(r.payload.enabled)||(t.analytics.enabled=r.payload.enabled),X(r.payload.originContext)||(t.analytics.originContext=r.payload.originContext),X(r.payload.originLevel2)||(t.analytics.originLevel2=r.payload.originLevel2),X(r.payload.originLevel3)||(t.analytics.originLevel3=r.payload.originLevel3),X(r.payload.apiBaseUrl)||(t.analytics.apiBaseUrl=r.payload.apiBaseUrl),X(r.payload.runtimeEnvironment)||(t.analytics.runtimeEnvironment=r.payload.runtimeEnvironment),X(r.payload.anonymous)||(t.analytics.anonymous=r.payload.anonymous),X(r.payload.deviceId)||(t.analytics.deviceId=r.payload.deviceId),X(r.payload.userDisplayName)||(t.analytics.userDisplayName=r.payload.userDisplayName)}).addCase($r,t=>{t.analytics.enabled=!1}).addCase(Br,t=>{t.analytics.enabled=!0}).addCase(Di,(t,r)=>{t.analytics.originLevel2=r.payload.originLevel2}).addCase(Ti,(t,r)=>{t.analytics.originLevel3=r.payload.originLevel3}).addCase(_r,(t,r)=>{t.analytics.originLevel2=r.payload}).addCase(K,(t,r)=>{t.analytics.originLevel2=r.payload.tab||t.analytics.originLevel2}));var zm=new Y({each:w,required:!0}),_s=(e,t)=>(h(e,w),Mr(t)?h(t,w):h(t,zm),{payload:{contextKey:e,contextValue:t}}),Hs=m("context/set",e=>{for(let[t,r]of Object.entries(e))_s(t,r);return{payload:e}}),zs=m("context/add",e=>_s(e.contextKey,e.contextValue)),Ws=m("context/remove",e=>h(e,w));function on(){return{contextValues:{}}}var Wm=x(on(),e=>{e.addCase(Hs,(t,r)=>{t.contextValues=r.payload}).addCase(zs,(t,r)=>{t.contextValues[r.payload.contextKey]=r.payload.contextValue}).addCase(Ws,(t,r)=>{delete t.contextValues[r.payload]}).addCase(W.fulfilled,(t,r)=>{!r.payload||(t.contextValues=r.payload.context.contextValues)})});var Ys=m("debug/enable"),Ks=m("debug/disable");var an=()=>!1;var Gs=x(an(),e=>{e.addCase(Ys,()=>!0).addCase(Ks,()=>!1).addCase(K,(t,r)=>{var n;return(n=r.payload.debug)!=null?n:t})});var Js=x(en,e=>e);var Zs=m("didYouMean/enable"),Xs=m("didYouMean/disable"),Lt=m("didYouMean/correction",e=>h(e,w));function Ym(e){return{statusCode:e.statusCode,type:e.name,message:e.message}}function sn(e){if(e instanceof Et)return{error:Ym(e)};throw e}var ba=(e,t,r,n)=>({accessToken:e.accessToken,method:t,contentType:r,url:`${e.url}${n}?${Km(e)}`}),Km=e=>`organizationId=${e.organizationId}`;function ec(e){return((e.headers.get("content-type")||"").split(";").find(n=>n.indexOf("charset=")!==-1)||"").split("=")[1]||"UTF-8"}var tc=TextDecoder;function Ra(e){let{url:t,accessToken:r,organizationId:n,...o}=e;return o}var xa=e=>{let{response:t}=e;return t.body?Gm(e):Jm(t)},Gm=e=>Xm(e)?eg(e):Zm(e)?e.body:{message:"unknown",statusCode:0,type:"unknown"},Jm=e=>{let t=JSON.parse(JSON.stringify(e,Object.getOwnPropertyNames(e)));return{...t,message:`Client side error: ${t.message||""}`,statusCode:400,type:"ClientError"}};function Zm(e){return e.body.statusCode!==void 0}function Xm(e){return e.body.exception!==void 0}var eg=e=>({message:e.body.exception.code,statusCode:e.response.status,type:e.body.exception.code});var Aa=async(e,t)=>{let r=await Ct.call({...ba(e,"POST","application/x-www-form-urlencoded","/html"),requestParams:Ra(e),...t});if(r instanceof Error)throw r;let n=ec(r),o=await r.arrayBuffer(),i=new tc(n).decode(o);return tg(i)?{success:i}:{error:xa({response:r,body:i})}};function tg(e){return typeof e=="string"}var J=e=>e.error!==void 0;var fr=()=>"";var cc=me(sc());function uc(e){return Array.isArray(e)}function lc(e,t){return Object.values(e.reduce((r,n,o)=>({...r,[t(n,o)]:n}),{}))}function dc(e){return(typeof btoa!="undefined"?btoa:cc.btoa)(encodeURI(e))}function Fa(e){let t=fc(e),r=[e,...t].filter(o=>o.parentResult).map(o=>o.parentResult);return lc([e,...t,...r],o=>o.uniqueId)}function fc(e){return e.childResults?e.childResults.flatMap(t=>[t,...fc(t)]):[]}var de=(n=>(n[n.Search=0]="Search",n[n.Custom=1]="Custom",n[n.Click=2]="Click",n))(de||{}),lg=e=>e(),fe=(e,t,r,n=o=>new tn(o))=>U(e,async(o,{getState:a,extra:{analyticsClientMiddleware:i,preprocessRequest:s,logger:u}})=>{let c=lg(a),d=Ns({state:c,logger:u,analyticsClientMiddleware:i,preprocessRequest:s,provider:n(c)}),l=await r(d,c);return u.info({client:d.coveoAnalyticsClient,response:l},"Analytics response"),{analyticsType:t}}),dg=e=>U("analytics/noop",async()=>({analyticsType:e})),iR=dg(0),Se=(e,t)=>U(e,async(r,{getState:n,extra:{analyticsClientMiddleware:o,preprocessRequest:a,logger:i}})=>{let s=n(),u=Ls({state:s,logger:i,analyticsClientMiddleware:o,preprocessRequest:a}),c=await t(u,s);i.info({client:u.coveoAnalyticsClient,response:c},"Analytics response")});var pc={urihash:new O,sourcetype:new O,permanentid:new O},cn={uniqueId:w,raw:new M({values:pc}),title:w,uri:w,clickUri:w,rankingModifier:new O({required:!1,emptyAllowed:!0})};function fg(e){return Object.assign({},...Object.keys(pc).map(t=>({[t]:e[t]})))}function pg(e){return Object.assign({},...Object.keys(cn).map(t=>({[t]:e[t]})),{raw:fg(e.raw)})}var wa=e=>new be(cn).validate(pg(e));var uR=fe("analytics/didyoumean/click",de.Search,e=>e.logDidYouMeanClick()),mc=fe("analytics/didyoumean/automatic",de.Search,e=>e.logDidYouMeanAutomatic());var pr=m("query/updateQuery",e=>h(e,{q:new O,enableQuerySyntax:new B}));function un(){return{contextValues:{}}}function Qt(){return{enabled:!0}}function ln(){return{freezeFacetOrder:!1,facets:{}}}function dn(){return[]}function mr(){return{firstResult:0,numberOfResults:10,totalCountFiltered:0}}function fn(){return{}}var gc=(r=>(r.Ascending="ascending",r.Descending="descending",r))(gc||{}),pn=(a=>(a.Relevancy="relevancy",a.QRE="qre",a.Date="date",a.Field="field",a.NoSort="nosort",a))(pn||{}),Ut=e=>{if(Lr(e))return e.map(t=>Ut(t)).join(",");switch(e.by){case"relevancy":case"qre":case"nosort":return e.by;case"date":return`date ${e.order}`;case"field":return`@${e.field} ${e.order}`;default:return""}},hc=()=>({by:"relevancy"});var bR=new M({values:{by:new De({enum:pn,required:!0}),order:new De({enum:gc}),field:new O}});function mn(){return Ut(hc())}function gn(){return{}}function hn(){return{}}function yc(){return $t({})}function $t(e){var t,r;return{context:e.context||on(),dictionaryFieldContext:e.dictionaryFieldContext||un(),facetSet:e.facetSet||Mt(),numericFacetSet:e.numericFacetSet||Nt(),dateFacetSet:e.dateFacetSet||jt(),categoryFacetSet:e.categoryFacetSet||Vt(),pagination:e.pagination||mr(),query:e.query||je(),tabSet:e.tabSet||hn(),advancedSearchQueries:e.advancedSearchQueries||St(),staticFilterSet:e.staticFilterSet||gn(),querySet:e.querySet||fn(),sortCriteria:e.sortCriteria||mn(),pipeline:e.pipeline||fr(),searchHub:e.searchHub||Ge(),facetOptions:e.facetOptions||ln(),facetOrder:(t=e.facetOrder)!=null?t:dn(),debug:(r=e.debug)!=null?r:an()}}var Sc=fe("search/logFetchMoreResults",de.Search,e=>e.logFetchMoreResults()),bt=e=>fe("search/queryError",de.Search,(t,r)=>{var n,o,a;return t.logQueryError({query:((n=r.query)==null?void 0:n.q)||je().q,aq:((o=r.advancedSearchQueries)==null?void 0:o.aq)||St().aq,cq:((a=r.advancedSearchQueries)==null?void 0:a.cq)||St().cq,dq:"",errorType:e.type,errorMessage:e.message})})();var gr=me(kt());var Ia=me(kt()),vc=me(Oa());Ia.default.extend(vc.default);var mg="YYYY/MM/DD@HH:mm:ss",gg="1401-01-01";function yn(e){return e.format(mg)}function Cc(e,t){let r=(0,Ia.default)(e,t);if(!r.isValid()){let n=". Please provide a date format string in the configuration options. See https://day.js.org/docs/en/parse/string-format for more information.",o=` with the format "${t}""`;throw new Error(`Could not parse the provided date "${e}"${t?o:n}`)}Ea(r)}function Ea(e){if(e.isBefore(gg))throw new Error(`Date is before year 1401, which is unsupported by the API: ${e}`)}var Rc=me(bc());gr.default.extend(Rc.default);var xc=["past","now","next"],Ac=["minute","hour","day","week","month","quarter","year"],hg=e=>{let t=e==="now";return{amount:new j({required:!t,min:1}),unit:new O({required:!t,constrainTo:Ac}),period:new O({required:!0,constrainTo:xc})}};function Ta(e){if(typeof e=="string"&&!st(e))throw new Error(`The value "${e}" is not respecting the relative date format "period-amount-unit"`);let t=typeof e=="string"?Oc(e):e;new be(hg(t.period)).validate(t);let r=wc(t),n=JSON.stringify(t);if(!r.isValid())throw new Error(`Date is invalid: ${n}`);Ea(r)}function Fc(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":case"next":return`${t}-${r}-${n}`;case"now":return t}}function wc(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":return(0,gr.default)().subtract(r,n);case"next":return(0,gr.default)().add(r,n);case"now":return(0,gr.default)()}}function hr(e){return yn(wc(Oc(e)))}function Pc(e){return e.toLocaleLowerCase().split("-")}function st(e){let[t,r,n]=Pc(e);if(t==="now")return!0;if(!xc.includes(t)||!Ac.includes(n))return!1;let o=parseInt(r);return!(isNaN(o)||o<=0)}function qc(e){return!!e&&typeof e=="object"&&"period"in e}function Oc(e){let[t,r,n]=Pc(e);return t==="now"?{period:"now"}:{period:t,amount:r?parseInt(r):void 0,unit:n||void 0}}function Ic(e){return e.type==="dateRange"}function Ec(e){return`start${e}`}function kc(e){return`end${e}`}var yg=()=>({dateFacetValueMap:{}});function Sg(e,t,r){let n=e.start,o=e.end;return st(n)&&(n=hr(n),r.dateFacetValueMap[t][Ec(n)]=e.start),st(o)&&(o=hr(o),r.dateFacetValueMap[t][kc(o)]=e.end),{...e,start:n,end:o}}function vg(e,t){if(Ic(e)){let{facetId:r,currentValues:n}=e;return t.dateFacetValueMap[r]={},{...e,currentValues:n.map(o=>Sg(o,r,t))}}return e}function Dc(e){var n;let t=yg();return{request:{...e,facets:(n=e.facets)==null?void 0:n.map(o=>vg(o,t))},mappings:t}}function Cg(e,t,r){return{...e,start:r.dateFacetValueMap[t][Ec(e.start)]||e.start,end:r.dateFacetValueMap[t][kc(e.end)]||e.end}}function bg(e,t){return e.facetId in t.dateFacetValueMap}function Rg(e,t){return bg(e,t)?{...e,values:e.values.map(r=>Cg(r,e.facetId,t))}:e}function Tc(e,t){var r;return"success"in e?{success:{...e.success,facets:(r=e.success.facets)==null?void 0:r.map(o=>Rg(o,t))}}:e}var Sn=new j({required:!0,min:0}),Vc=m("pagination/registerNumberOfResults",e=>h(e,Sn)),jc=m("pagination/updateNumberOfResults",e=>h(e,Sn)),Nc=m("pagination/registerPage",e=>h(e,Sn)),vn=m("pagination/updatePage",e=>h(e,Sn)),Mc=m("pagination/nextPage"),Lc=m("pagination/previousPage");function Cn(e,t){let r={};e.forEach(a=>r[a.facetId]=a);let n=[];t.forEach(a=>{a in r&&(n.push(r[a]),delete r[a])});let o=Object.values(r);return[...n,...o]}var bn=async e=>{var t,r,n,o;return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{visitorId:await se(),actionsHistory:Ie.getHistory()},...((t=e.advancedSearchQueries)==null?void 0:t.aq)&&{aq:e.advancedSearchQueries.aq},...((r=e.advancedSearchQueries)==null?void 0:r.cq)&&{cq:e.advancedSearchQueries.cq},...((n=e.advancedSearchQueries)==null?void 0:n.lq)&&{lq:e.advancedSearchQueries.lq},...((o=e.advancedSearchQueries)==null?void 0:o.dq)&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&await it(e.configuration.analytics),...e.excerptLength&&!X(e.excerptLength.length)&&{excerptLength:e.excerptLength.length}}};var Je=async e=>{var o;let t=Pg(e),r=xg(e),n=await bn(e);return Dc({...n,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},...t&&{cq:t},...r.length&&{facets:r},...e.pagination&&{numberOfResults:e.pagination.numberOfResults,firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:{freezeFacetOrder:e.facetOptions.freezeFacetOrder}},...((o=e.folding)==null?void 0:o.enabled)&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange}})};function xg(e){var t;return Cn(Ag(e),(t=e.facetOrder)!=null?t:[])}function Ag(e){return Fg(e).filter(({facetId:t})=>{var r,n,o;return(o=(n=(r=e.facetOptions)==null?void 0:r.facets[t])==null?void 0:n.enabled)!=null?o:!0})}function Fg(e){return[...Va(e.facetSet),...Va(e.numericFacetSet),...Va(e.dateFacetSet),...wg(e.categoryFacetSet)]}function wg(e){return Object.values(e||{}).map(t=>t.request)}function Va(e={}){return Object.keys(e).map(t=>e[t])}function Pg(e){var a;let t=((a=e.advancedSearchQueries)==null?void 0:a.cq.trim())||"",r=Object.values(e.tabSet||{}).find(i=>i.isActive),n=(r==null?void 0:r.expression.trim())||"",o=qg(e);return[t,n,...o].filter(i=>!!i).join(" AND ")}function qg(e){return Object.values(e.staticFilterSet||{}).map(r=>{let n=r.values.filter(a=>a.state==="selected"&&!!a.expression.trim()),o=n.map(a=>a.expression).join(" OR ");return n.length>1?`(${o})`:o})}var ge=m("breadcrumb/deselectAll");var Ne=m("facet/deselectAllFacets"),Bt=m("facet/updateFacetAutoSelection",e=>h(e,{allow:new B({required:!0})}));var Rn=async(e,t,{request:r,mappings:n})=>{var u;let o=new Date().getTime(),a=Tc(await e.search(r),n),i=new Date().getTime()-o,s=((u=t.query)==null?void 0:u.q)||"";return{response:a,duration:i,queryExecuted:s,requestExecuted:r}},Gx=U("search/prepareForSearchWithQuery",(e,t)=>{let{dispatch:r}=t;h(e,{q:new O,enableQuerySyntax:new B}),r(ge()),r(Bt({allow:!0})),r(pr(e)),r(vn(1))}),L=U("search/executeSearch",async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:o})=>{let a=t();Tg(a);let i=await Rn(o.apiClient,a,await Je(a));if(J(i.response))return r(bt(i.response.error)),n(i.response.error);if(!Eg(a,i.response.success))return r(Ye($t(a))),{...i,response:i.response.success,automaticallyCorrected:!1,originalQuery:xn(a),analyticsAction:e};let{correctedQuery:s}=i.response.success.queryCorrections[0],u=await Ig(o.apiClient,s,t,r);if(J(u.response))return r(bt(u.response.error)),n(u.response.error);let c=i.response.success;return e(r,()=>Og(i.queryExecuted,i.duration,a,c),o),r(Ye($t(t()))),{...u,response:{...u.response.success,queryCorrections:i.response.success.queryCorrections},automaticallyCorrected:!0,originalQuery:xn(a),analyticsAction:mc()}}),_t=U("search/fetchMoreResults",async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:{apiClient:o}})=>{let a=t(),i=await Rn(o,a,await kg(a));return J(i.response)?(r(bt(i.response.error)),n(i.response.error)):(r(Ye($t(a))),{...i,response:i.response.success,automaticallyCorrected:!1,originalQuery:xn(a),analyticsAction:Sc()})}),Ht=U("search/fetchFacetValues",async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:{apiClient:o}})=>{let a=t(),i=await Rn(o,a,await Dg(a));return J(i.response)?(r(bt(i.response.error)),n(i.response.error)):(r(Ye($t(a))),{...i,analyticsAction:e,response:i.response.success,automaticallyCorrected:!1,originalQuery:xn(a)})}),Og=(e,t,r,n)=>{var o,a;return{...r,query:{q:e,enableQuerySyntax:(a=(o=r.query)==null?void 0:o.enableQuerySyntax)!=null?a:je().enableQuerySyntax},search:{...Oe(),duration:t,response:n,results:n.results}}},Ig=async(e,t,r,n)=>{n(pr({q:t}));let o=await Rn(e,r(),await Je(r()));return n(Lt(t)),o},Eg=(e,t)=>{var r;return((r=e.didYouMean)==null?void 0:r.enableDidYouMean)===!0&&t.results.length===0&&t.queryCorrections.length!==0},kg=async e=>{var r,n,o,a;let t=await Je(e);return t.request={...t.request,firstResult:((n=(r=e.pagination)==null?void 0:r.firstResult)!=null?n:0)+((a=(o=e.search)==null?void 0:o.results.length)!=null?a:0)},t},Dg=async e=>{let t=await Je(e);return t.request.numberOfResults=0,t},Tg=e=>{var t;e.configuration.analytics.enabled&&Ie.addElement({name:"Query",...((t=e.query)==null?void 0:t.q)&&{value:e.query.q},time:JSON.stringify(new Date)})},xn=e=>{var t;return((t=e.query)==null?void 0:t.q)!==void 0?e.query.q:""};var An=()=>({correctedQuery:"",wordCorrections:[],originalQuery:""});function Qc(){return{enableDidYouMean:!1,wasCorrectedTo:"",wasAutomaticallyCorrected:!1,queryCorrection:An(),originalQuery:""}}var Vg=x(Qc(),e=>{e.addCase(Zs,t=>{t.enableDidYouMean=!0}).addCase(Xs,t=>{t.enableDidYouMean=!1}).addCase(L.pending,t=>{t.queryCorrection=An(),t.wasAutomaticallyCorrected=!1,t.wasCorrectedTo=""}).addCase(L.fulfilled,(t,r)=>{t.queryCorrection=r.payload.response.queryCorrections[0]||An(),t.originalQuery=r.payload.originalQuery,t.wasAutomaticallyCorrected=r.payload.automaticallyCorrected}).addCase(Lt,(t,r)=>{t.wasCorrectedTo=r.payload})});var $=w;var jg={state:new ne({required:!0}),numberOfResults:new j({required:!0,min:0}),value:new O({required:!0,emptyAllowed:!0}),path:new Y({required:!0,each:w}),moreValuesAvailable:new B({required:!1})};function ja(e){e.children.forEach(t=>{ja(t)}),Re({state:e.state,numberOfResults:e.numberOfResults,value:e.value,path:e.path,moreValuesAvailable:e.moreValuesAvailable},jg)}var Ng={facetId:$,field:w,delimitingCharacter:new O({required:!1,emptyAllowed:!0}),filterFacetCount:new B({required:!1}),injectionDepth:new j({required:!1,min:0}),numberOfValues:new j({required:!1,min:1}),sortCriteria:new ne({required:!1}),basePath:new Y({required:!1,each:w}),filterByBasePath:new B({required:!1})},Fn=m("categoryFacet/register",e=>h(e,Ng)),wn=m("categoryFacet/toggleSelectValue",e=>{try{return Re(e.facetId,w),ja(e.selection),{payload:e,error:null}}catch(t){return{payload:e,error:We(t)}}}),Pn=m("categoryFacet/deselectAll",e=>h(e,$)),Uc=m("categoryFacet/updateNumberOfValues",e=>h(e,{facetId:$,numberOfValues:new j({required:!0,min:1})})),$c=m("categoryFacet/updateSortCriterion",e=>h(e,{facetId:$,criterion:new ne}));var Bc={value:w,numberOfResults:new j({min:0}),state:w};var Mg={facetId:$,field:new O({required:!0,emptyAllowed:!0}),delimitingCharacter:new O({required:!1,emptyAllowed:!0}),filterFacetCount:new B({required:!1}),injectionDepth:new j({required:!1,min:0}),numberOfValues:new j({required:!1,min:1}),sortCriteria:new ne({required:!1})},qn=m("facet/register",e=>h(e,Mg)),On=m("facet/toggleSelectValue",e=>h(e,{facetId:$,selection:new M({values:Bc})})),ct=m("facet/deselectAll",e=>h(e,$)),_c=m("facet/updateSortCriterion",e=>h(e,{facetId:$,criterion:new ne({required:!0})})),Hc=m("facet/updateNumberOfValues",e=>h(e,{facetId:$,numberOfValues:new j({required:!0,min:1})})),zc=m("facet/updateIsFieldExpanded",e=>h(e,{facetId:$,isFieldExpanded:new B({required:!0})})),Wc=m("facet/updateFreezeCurrentValues",e=>h(e,{facetId:$,freezeCurrentValues:new B({required:!0})}));var Qa=me(kt());var Na={state:w,start:new j({required:!0}),end:new j({required:!0}),endInclusive:new B({required:!0}),numberOfResults:new j({required:!0,min:0})},Ma={start:w,end:w,endInclusive:new B({required:!0}),state:w,numberOfResults:new j({required:!0,min:0})};var In=m("rangeFacet/updateSortCriterion",e=>h(e,{facetId:$,criterion:new ne({required:!0})}));var La=me(kt()),Yc=me(Oa());La.default.extend(Yc.default);function Kc(e){var a,i;ce(e.useLocalTime)||console.warn('The "useLocalTime" option for "buildDateRange" is deprecated. Please use the "timezone" engine configuration option instead.');let t=Gc(e.start,e),r=Gc(e.end,e),n=(a=e.endInclusive)!=null?a:!1,o=(i=e.state)!=null?i:"idle";return{start:t,end:r,endInclusive:n,state:o}}function Gc(e,t){let{dateFormat:r}=t;return qc(e)?(Ta(e),Fc(e)):typeof e=="string"&&st(e)?(Ta(e),e):(Cc(e,r),yn((0,La.default)(e,r)))}var Lg={start:w,end:w,endInclusive:new B({required:!0}),state:w},Qg={facetId:$,field:w,currentValues:new Y({required:!1,each:new M({values:Lg})}),generateAutomaticRanges:new B({required:!0}),filterFacetCount:new B({required:!1}),injectionDepth:new j({required:!1,min:0}),numberOfValues:new j({required:!1,min:1}),sortCriteria:new ne({required:!1}),rangeAlgorithm:new ne({required:!1})};function Jc(e){return st(e)?hr(e):e}function Zc(e){!e.currentValues||e.currentValues.forEach(t=>{let{start:r,end:n}=Kc(t);if((0,Qa.default)(Jc(r)).isAfter((0,Qa.default)(Jc(n))))throw new Error(`The start value is greater than the end value for the date range ${t.start} to ${t.end}`)})}var En=m("dateFacet/register",e=>{try{return Re(e,Qg),Zc(e),{payload:e,error:null}}catch(t){return{payload:e,error:We(t)}}}),kn=m("dateFacet/toggleSelectValue",e=>h(e,{facetId:$,selection:new M({values:Ma})})),Dn=m("dateFacet/updateFacetValues",e=>{try{return Re(e,{facetId:$,values:new Y({each:new M({values:Ma})})}),Zc({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:We(t)}}}),Xc=In,eu=ct;var Ug={state:w,start:new j({required:!0}),end:new j({required:!0}),endInclusive:new B({required:!0})},$g={facetId:$,field:w,currentValues:new Y({required:!1,each:new M({values:Ug})}),generateAutomaticRanges:new B({required:!0}),filterFacetCount:new B({required:!1}),injectionDepth:new j({required:!1,min:0}),numberOfValues:new j({required:!1,min:1}),sortCriteria:new ne({required:!1}),rangeAlgorithm:new ne({required:!1})};function tu(e){!e.currentValues||e.currentValues.forEach(({start:t,end:r})=>{if(t>r)throw new Error(`The start value is greater than the end value for the numeric range ${t} to ${r}`)})}var Tn=m("numericFacet/register",e=>{try{return h(e,$g),tu(e),{payload:e,error:null}}catch(t){return{payload:e,error:We(t)}}}),Vn=m("numericFacet/toggleSelectValue",e=>h(e,{facetId:$,selection:new M({values:Na})})),jn=m("numericFacet/updateFacetValues",e=>{try{return Re(e,{facetId:$,values:new Y({each:new M({values:Na})})}),tu({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:We(t)}}}),ru=In,nu=ct;var ou=m("facetOptions/update",e=>h(e,{freezeFacetOrder:new B({required:!1})})),au=m("facetOptions/facet/enable",e=>h(e,$)),Me=m("facetOptions/facet/disable",e=>h(e,$));var Bg=x(ln(),e=>{e.addCase(ou,(t,r)=>({...t,...r.payload})).addCase(L.fulfilled,t=>{t.freezeFacetOrder=!1}).addCase(L.rejected,t=>{t.freezeFacetOrder=!1}).addCase(W.fulfilled,(t,r)=>{var n,o;return(o=(n=r.payload)==null?void 0:n.facetOptions)!=null?o:t}).addCase(Fn,(t,r)=>{t.facets[r.payload.facetId]=Qt()}).addCase(qn,(t,r)=>{t.facets[r.payload.facetId]=Qt()}).addCase(En,(t,r)=>{t.facets[r.payload.facetId]=Qt()}).addCase(Tn,(t,r)=>{t.facets[r.payload.facetId]=Qt()}).addCase(au,(t,r)=>{t.facets[r.payload].enabled=!0}).addCase(Me,(t,r)=>{t.facets[r.payload].enabled=!1}).addCase(K,(t,r)=>{var n,o,a,i;[...Object.keys((n=r.payload.f)!=null?n:{}),...Object.keys((o=r.payload.cf)!=null?o:{}),...Object.keys((a=r.payload.nf)!=null?a:{}),...Object.keys((i=r.payload.df)!=null?i:{})].forEach(s=>{s in t||(t.facets[s]=Qt()),t.facets[s].enabled=!0})})});function zt(e,t){let{facetId:r,criterion:n}=t,o=e[r];!o||(o.sortCriteria=n)}function yr(e){!e||(e.currentValues=e.currentValues.map(t=>({...t,state:"idle"})),e.preventAutoSelect=!0)}function Nn(e,t){!e||(e.numberOfValues=t)}var Sr={facetId:$,captions:new M({options:{required:!1}}),numberOfValues:new j({required:!1,min:1}),query:new O({required:!1,emptyAllowed:!0})};var _g={path:new Y({required:!0,each:w}),displayValue:ee,rawValue:ee,count:new j({required:!0,min:0})},Mn=m("categoryFacet/selectSearchResult",e=>h(e,{facetId:$,value:new M({values:_g})})),iu=m("categoryFacetSearch/register",e=>h(e,Sr));function vr(e,t){let r=e[t];!r||(r.request.numberOfValues=r.initialNumberOfValues,r.request.currentValues=[],r.request.preventAutoSelect=!0)}function Ua(e,t,r){e.currentValues=Hg(t,r),e.numberOfValues=t.length?1:r,e.preventAutoSelect=!0}function Hg(e,t){if(!e.length)return[];let r=su(e[0],t),n=r;for(let o of e.splice(1)){let a=su(o,t);n.children.push(a),n=a}return n.state="selected",n.retrieveChildren=!0,[r]}function su(e,t){return{value:e,retrieveCount:t,children:[],state:"idle",retrieveChildren:!1}}var zg=x(Vt(),e=>{e.addCase(Fn,(t,r)=>{let n=r.payload,{facetId:o}=n;if(o in t)return;let a=Kg(n),i=a.numberOfValues;t[o]={request:a,initialNumberOfValues:i}}).addCase(W.fulfilled,(t,r)=>{var n,o;return(o=(n=r.payload)==null?void 0:n.categoryFacetSet)!=null?o:t}).addCase(K,(t,r)=>{let n=r.payload.cf||{};Object.keys(t).forEach(o=>{let a=t[o].request,i=n[o]||[];(i.length||a.currentValues.length)&&Ua(a,i,t[o].initialNumberOfValues)})}).addCase($c,(t,r)=>{var i;let{facetId:n,criterion:o}=r.payload,a=(i=t[n])==null?void 0:i.request;!a||(a.sortCriteria=o)}).addCase(wn,(t,r)=>{var l;let{facetId:n,selection:o,retrieveCount:a}=r.payload,i=(l=t[n])==null?void 0:l.request;if(!i)return;let{path:s}=o,u=s.slice(0,s.length-1),c=Yg(i,u,a);if(c.length){let p=c[0];p.retrieveChildren=!0,p.state="selected",p.children=[];return}let d=cu(o.value,a);d.state="selected",c.push(d),i.numberOfValues=1}).addCase(Pn,(t,r)=>{let n=r.payload;vr(t,n)}).addCase(Ne,t=>{Object.keys(t).forEach(r=>vr(t,r))}).addCase(ge,t=>{Object.keys(t).forEach(r=>vr(t,r))}).addCase(Bt,(t,r)=>Object.keys(t).forEach(n=>{t[n].request.preventAutoSelect=!r.payload.allow})).addCase(Uc,(t,r)=>{var i;let{facetId:n,numberOfValues:o}=r.payload,a=(i=t[n])==null?void 0:i.request;if(!!a){if(!a.currentValues.length)return Nn(a,o);Gg(t,r.payload)}}).addCase(Mn,(t,r)=>{let{facetId:n,value:o}=r.payload,a=t[n];if(!a)return;let i=[...o.path,o.rawValue];Ua(a.request,i,a.initialNumberOfValues)}).addCase(Ht.fulfilled,(t,r)=>{uu(t,r.payload.response.facets)}).addCase(L.fulfilled,(t,r)=>{uu(t,r.payload.response.facets)}).addCase(Me,(t,r)=>{vr(t,r.payload)})}),Wg={delimitingCharacter:";",filterFacetCount:!0,injectionDepth:1e3,numberOfValues:5,sortCriteria:"occurrences",basePath:[],filterByBasePath:!0};function Yg(e,t,r){let n=e.currentValues;for(let o of t){let a=n[0];(!a||o!==a.value)&&(a=cu(o,r),n.length=0,n.push(a)),a.retrieveChildren=!1,a.state="idle",n=a.children}return n}function Kg(e){return{...Wg,currentValues:[],preventAutoSelect:!1,type:"hierarchical",...e}}function cu(e,t){return{value:e,state:"idle",children:[],retrieveChildren:!0,retrieveCount:t}}function uu(e,t){t.forEach(r=>{var i;if(!Jg(e,r))return;let n=r.facetId,o=(i=e[n])==null?void 0:i.request;if(!o)return;let a=Zg(o,r);o.currentValues=a?[]:o.currentValues,o.preventAutoSelect=!1})}function Gg(e,t){var a;let{facetId:r,numberOfValues:n}=t,o=(a=e[r])==null?void 0:a.request.currentValues[0];if(!!o){for(;o.children.length&&(o==null?void 0:o.state)!=="selected";)o=o.children[0];o.retrieveCount=n}}function Jg(e,t){return t.facetId in e}function Zg(e,t){let r=at(e.currentValues).parents,n=at(t.values).parents;return r.length!==n.length}var Xg=x(dn(),e=>{e.addCase(L.fulfilled,(t,r)=>r.payload.response.facets.map(n=>n.facetId)).addCase(W.fulfilled,(t,r)=>{var n,o;return(o=(n=r.payload)==null?void 0:n.facetOrder)!=null?o:t})});function Ln(e,t,r){let{facetId:n}=t;if(e[n])return;let o=!1,a={...lu,...t},i=r();e[n]={options:a,isLoading:o,response:i,initialNumberOfValues:a.numberOfValues,requestId:""}}function Qn(e,t){let{facetId:r,...n}=t,o=e[r];!o||(o.options={...o.options,...n})}function Un(e,t,r){let n=e[t];!n||(n.requestId=r,n.isLoading=!0)}function $n(e,t){let r=e[t];!r||(r.isLoading=!1)}function Bn(e,t,r){let{facetId:n,response:o}=t,a=e[n];!a||a.requestId===r&&(a.isLoading=!1,a.response=o)}function Cr(e,t,r){let{facetId:n}=t,o=e[n];!o||(o.requestId="",o.isLoading=!1,o.response=r(),o.options.numberOfValues=o.initialNumberOfValues,o.options.query=lu.query)}function _n(e,t){Object.keys(e).forEach(r=>Cr(e,{facetId:r},t))}var lu={captions:{},numberOfValues:10,query:""};var eh={facetId:$,value:new M({values:{displayValue:ee,rawValue:ee,count:new j({required:!0,min:0})}})},du=m("facetSearch/register",e=>h(e,Sr)),Hn=m("facetSearch/update",e=>h(e,Sr)),zn=m("facetSearch/toggleSelectValue",e=>h(e,eh));function fu(){return{}}var pu=e=>fe("analytics/facet/search",de.Search,(t,r)=>{h(e,$);let n=Xr(r),o=Ds(e,n);return t.logFacetSearch(o)})();var mu=async(e,t)=>{let{captions:r,query:n,numberOfValues:o}=t.facetSearchSet[e].options,{field:a,currentValues:i,filterFacetCount:s}=t.facetSet[e],u=(await Je(t)).request,c=i.filter(l=>l.state!=="idle").map(l=>l.value),d=`*${n}*`;return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,captions:r,numberOfValues:o,query:d,field:a,ignoreValues:c,searchContext:u,filterFacetCount:s,type:"specific"}};var gu=async(e,t)=>{let r=t.categoryFacetSearchSet[e].options,n=t.categoryFacetSet[e].request,{captions:o,query:a,numberOfValues:i}=r,{field:s,delimitingCharacter:u,basePath:c,filterFacetCount:d}=n,l=(await Je(t)).request,p=th(n),f=p.length?[p]:[],g=`*${a}*`;return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,basePath:c,captions:o,numberOfValues:i,query:g,field:s,delimitingCharacter:u,ignorePaths:f,searchContext:l,filterFacetCount:d,type:"hierarchical"}},th=e=>{let t=[],r=e.currentValues[0];for(;r;)t.push(r.value),r=r.children[0];return t};var ut=U("facetSearch/executeSearch",async(e,{dispatch:t,getState:r,extra:{apiClient:n,validatePayload:o}})=>{let a=r(),i;o(e,w),rh(a,e)?i=await mu(e,a):i=await gu(e,a);let s=await n.facetSearch(i);return t(pu(e)),{facetId:e,response:s}}),Wn=m("facetSearch/clearResults",e=>h(e,{facetId:$})),rh=(e,t)=>e.facetSearchSet!==void 0&&e.facetSet!==void 0&&e.facetSet[t]!==void 0;var nh=x(fu(),e=>{e.addCase(iu,(t,r)=>{let n=r.payload;Ln(t,n,$a)}).addCase(Hn,(t,r)=>{Qn(t,r.payload)}).addCase(ut.pending,(t,r)=>{let n=r.meta.arg;Un(t,n,r.meta.requestId)}).addCase(ut.rejected,(t,r)=>{let n=r.meta.arg;$n(t,n)}).addCase(ut.fulfilled,(t,r)=>{Bn(t,r.payload,r.meta.requestId)}).addCase(Wn,(t,{payload:{facetId:r}})=>{Cr(t,{facetId:r},$a)}).addCase(L.fulfilled,t=>{_n(t,$a)})});function $a(){return{moreValuesAvailable:!1,values:[]}}function hu(){return{}}var oh=x(hu(),e=>{e.addCase(du,(t,r)=>{let n=r.payload;Ln(t,n,Ba)}).addCase(Hn,(t,r)=>{Qn(t,r.payload)}).addCase(ut.pending,(t,r)=>{let n=r.meta.arg;Un(t,n,r.meta.requestId)}).addCase(ut.rejected,(t,r)=>{let n=r.meta.arg;$n(t,n)}).addCase(ut.fulfilled,(t,r)=>{Bn(t,r.payload,r.meta.requestId)}).addCase(Wn,(t,{payload:r})=>{Cr(t,r,Ba)}).addCase(L.fulfilled,t=>{_n(t,Ba)})});function Ba(){return{moreValuesAvailable:!1,values:[]}}var Rt=(r=>(r.Relevance="relevance",r.Fields="fields",r))(Rt||{}),yu=(r=>(r.Ascending="asc",r.Descending="desc",r))(yu||{}),Su=()=>({by:"relevance"});var Uw=new M({options:{required:!1},values:{by:new De({enum:Rt,required:!0}),fields:new Y({each:new M({values:{name:new O,direction:new De({enum:yu})}})})}});var vu=m("productlisting/setUrl",e=>h(e,{url:new O({required:!0,url:!0})})),Cu=m("productlisting/setAdditionalFields",e=>h(e,{additionalFields:new Y({required:!0,each:new O({required:!0,emptyAllowed:!1})})})),lt=U("productlisting/fetch",async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:o})=>{let a=t(),{apiClient:i}=o,s=await i.getProducts(await ah(a));return J(s)?(r(bt(s.error)),n(s.error)):{response:s.success}}),ah=async e=>{var n,o,a;let t=sh(e),r=await se();return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,platformUrl:e.configuration.platformUrl,url:(n=e.productListing)==null?void 0:n.url,...e.configuration.analytics.enabled&&r?{clientId:r}:{},...((o=e.productListing.additionalFields)==null?void 0:o.length)?{additionalFields:e.productListing.additionalFields}:{},...e.productListing.advancedParameters&&ih(e.productListing.advancedParameters)?{advancedParameters:e.productListing.advancedParameters||{}}:{},...t.length&&{facets:{requests:t}},...e.pagination&&{pagination:{numberOfValues:e.pagination.numberOfResults,page:Math.ceil(e.pagination.firstResult/(e.pagination.numberOfResults||1))+1}},...(((a=e.sort)==null?void 0:a.by)||Rt.Relevance)!==Rt.Relevance&&{sort:e.sort}}};function ih(e){return e.debug}function sh(e){var t;return Cn(ch(e),(t=e.facetOrder)!=null?t:[])}function ch(e){return[..._a(e.facetSet),..._a(e.numericFacetSet),..._a(e.dateFacetSet),...uh(e.categoryFacetSet)]}function uh(e){return Object.values(e||{}).map(t=>t.request)}function _a(e={}){return Object.keys(e).map(t=>e[t])}var lh=x(Mt(),e=>{e.addCase(qn,(t,r)=>{let{facetId:n}=r.payload;n in t||(t[n]=fh(r.payload))}).addCase(W.fulfilled,(t,r)=>{if(!!r.payload&&Object.keys(r.payload.facetSet).length!==0)return r.payload.facetSet}).addCase(K,(t,r)=>{let n=r.payload.f||{};Object.keys(t).forEach(a=>{let i=t[a],s=n[a]||[];i.currentValues=s.map(Ru),i.preventAutoSelect=s.length>0,i.numberOfValues=Math.max(s.length,i.numberOfValues)})}).addCase(On,(t,r)=>{let{facetId:n,selection:o}=r.payload,a=t[n];if(!a)return;a.preventAutoSelect=!0;let i=a.currentValues.find(u=>u.value===o.value);if(!i){bu(a,o);return}let s=i.state==="selected";i.state=s?"idle":"selected",a.freezeCurrentValues=!0}).addCase(Wc,(t,r)=>{let{facetId:n,freezeCurrentValues:o}=r.payload,a=t[n];!a||(a.freezeCurrentValues=o)}).addCase(ct,(t,r)=>{let n=t[r.payload];yr(n)}).addCase(Ne,t=>{Object.keys(t).forEach(r=>{let n=t[r];yr(n)})}).addCase(ge,t=>{Object.keys(t).forEach(r=>{let n=t[r];yr(n)})}).addCase(Bt,(t,r)=>Object.keys(t).forEach(n=>{t[n].preventAutoSelect=!r.payload.allow})).addCase(_c,(t,r)=>{zt(t,r.payload)}).addCase(Hc,(t,r)=>{let{facetId:n,numberOfValues:o}=r.payload;Nn(t[n],o)}).addCase(zc,(t,r)=>{let{facetId:n,isFieldExpanded:o}=r.payload,a=t[n];!a||(a.isFieldExpanded=o)}).addCase(L.fulfilled,(t,r)=>{r.payload.response.facets.forEach(o=>Ha(t[o.facetId],o))}).addCase(lt.fulfilled,(t,r)=>{var o,a;(((a=(o=r.payload.response)==null?void 0:o.facets)==null?void 0:a.results)||[]).forEach(i=>Ha(t[i.facetId],i))}).addCase(Ht.fulfilled,(t,r)=>{r.payload.response.facets.forEach(o=>Ha(t[o.facetId],o))}).addCase(zn,(t,r)=>{let{facetId:n,value:o}=r.payload,a=t[n];if(!a)return;let{rawValue:i}=o,{currentValues:s}=a,u=s.find(d=>d.value===i);if(u){u.state="selected";return}let c=Ru(i);bu(a,c),a.freezeCurrentValues=!0,a.preventAutoSelect=!0}).addCase(Me,(t,r)=>{if(!(r.payload in t))return;let n=t[r.payload];yr(n)})});function bu(e,t){let{currentValues:r}=e,n=r.findIndex(s=>s.state==="idle"),o=n===-1?r.length:n,a=r.slice(0,o),i=r.slice(o+1);e.currentValues=[...a,t,...i],e.numberOfValues=e.currentValues.length}function Ha(e,t){!e||(e.currentValues=t.values.map(ph),e.freezeCurrentValues=!1,e.preventAutoSelect=!1)}var dh={delimitingCharacter:">",filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"automatic"};function fh(e){return{...dh,type:"specific",currentValues:[],freezeCurrentValues:!1,isFieldExpanded:!1,preventAutoSelect:!1,...e}}function ph(e){let{value:t,state:r}=e;return{value:t,state:r}}function Ru(e){return{value:e,state:"selected"}}var Yn={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"ascending",rangeAlgorithm:"even"};function Kn(e,t){let{facetId:r}=t;if(r in e)return;let n=xu(t);e[r]={...t,numberOfValues:n}}function Gn(e,t,r){let n=e[t];!n||(n.currentValues=r,n.numberOfValues=xu(n))}function Jn(e,t,r){let n=e[t];if(!n)return;let o=za(n.currentValues,r);if(!o)return;let a=o.state==="selected";o.state=a?"idle":"selected",n.preventAutoSelect=!0}function Le(e,t){let r=e[t];!r||r.currentValues.forEach(n=>n.state="idle")}function Zn(e,t){Object.entries(e).forEach(([r,n])=>{let o=t[r]||[];n.currentValues.forEach(s=>{let u=!!za(o,s);return s.state=u?"selected":"idle",s});let a=o.filter(s=>!za(n.currentValues,s)),i=n.currentValues;i.push(...a),n.numberOfValues=Math.max(n.numberOfValues,i.length)})}function Xn(e,t,r){t.forEach(n=>{let o=n.facetId,a=e[o];if(!a)return;let i=r(n.values);a.currentValues=i,a.preventAutoSelect=!1})}function za(e,t){let{start:r,end:n}=t;return e.find(o=>o.start===r&&o.end===n)}function xu(e){let{generateAutomaticRanges:t,currentValues:r,numberOfValues:n}=e;return t?Math.max(n,r.length):r.length}var mh=x(jt(),e=>{e.addCase(En,(t,r)=>{let{payload:n}=r,o=gh(n);Kn(t,o)}).addCase(W.fulfilled,(t,r)=>{var n,o;return(o=(n=r.payload)==null?void 0:n.dateFacetSet)!=null?o:t}).addCase(K,(t,r)=>{let n=r.payload.df||{};Zn(t,n)}).addCase(kn,(t,r)=>{let{facetId:n,selection:o}=r.payload;Jn(t,n,o)}).addCase(Dn,(t,r)=>{let{facetId:n,values:o}=r.payload;Gn(t,n,o)}).addCase(eu,(t,r)=>{Le(t,r.payload)}).addCase(Ne,t=>{Object.keys(t).forEach(r=>{Le(t,r)})}).addCase(ge,t=>{Object.keys(t).forEach(r=>{Le(t,r)})}).addCase(Xc,(t,r)=>{zt(t,r.payload)}).addCase(L.fulfilled,(t,r)=>{let n=r.payload.response.facets;Xn(t,n,hh)}).addCase(Me,(t,r)=>{Le(t,r.payload)})});function gh(e){return{...Yn,currentValues:[],preventAutoSelect:!1,type:"dateRange",...e}}function hh(e){return e.map(t=>{let{numberOfResults:r,...n}=t;return n})}var yh=x(Nt(),e=>{e.addCase(Tn,(t,r)=>{let{payload:n}=r,o=Sh(n);Kn(t,o)}).addCase(W.fulfilled,(t,r)=>{var n,o;return(o=(n=r.payload)==null?void 0:n.numericFacetSet)!=null?o:t}).addCase(K,(t,r)=>{let n=r.payload.nf||{};Zn(t,n)}).addCase(Vn,(t,r)=>{let{facetId:n,selection:o}=r.payload;Jn(t,n,o)}).addCase(jn,(t,r)=>{let{facetId:n,values:o}=r.payload;Gn(t,n,o)}).addCase(nu,(t,r)=>{Le(t,r.payload)}).addCase(Ne,t=>{Object.keys(t).forEach(r=>{Le(t,r)})}).addCase(ge,t=>{Object.keys(t).forEach(r=>{Le(t,r)})}).addCase(ru,(t,r)=>{zt(t,r.payload)}).addCase(L.fulfilled,(t,r)=>{let n=r.payload.response.facets;Xn(t,n,vh)}).addCase(Me,(t,r)=>{Le(t,r.payload)})});function Sh(e){return{...Yn,currentValues:[],preventAutoSelect:!1,type:"numericalRange",...e}}function vh(e){return e.map(t=>{let{numberOfResults:r,...n}=t;return n})}var Au=["author","language","urihash","objecttype","collection","source","permanentid"],Ch=[...Au,"date","filetype","parents"],LP=[...Ch,"ec_price","ec_name","ec_description","ec_brand","ec_category","ec_item_group_id","ec_shortdesc","ec_thumbnails","ec_images","ec_promo_price","ec_in_stock","ec_rating"],Fu=()=>({fieldsToInclude:Au,fetchAllFields:!1,fieldsDescription:[]});var bh=new Y({each:w,required:!0}),wu=m("fields/registerFieldsToInclude",e=>h(e,bh)),Pu=m("fields/fetchall/enable"),qu=m("fields/fetchall/disable"),Ou=U("fields/description",async(e,{extra:t,getState:r,rejectWithValue:n})=>{let o=r(),{accessToken:a,organizationId:i}=o.configuration,{apiBaseUrl:s}=o.configuration.search,u=await t.apiClient.fieldDescriptions({accessToken:a,organizationId:i,url:s});return J(u)?n(u.error):u.success.fields});var Rh={collectionField:new O,parentField:new O,childField:new O,numberOfFoldedResults:new j({min:0})},eo=m("folding/register",e=>h(e,Rh)),to=U("folding/loadCollection",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let o=t(),a=await bn(o),i=await n.search({...a,q:xh(o),enableQuerySyntax:!0,cq:`@${o.folding.fields.collection}=${e}`,filterField:o.folding.fields.collection,childField:o.folding.fields.parent,parentField:o.folding.fields.child,filterFieldRange:100});return J(i)?r(i.error):{collectionId:e,results:i.success.results}});function xh(e){return e.query.q===""?"":e.query.enableQuerySyntax?`${e.query.q} OR @uri`:`( <@- ${e.query.q} -@> ) OR @uri`}var ro=()=>({enabled:!1,fields:{collection:"foldingcollection",parent:"foldingparent",child:"foldingchild"},filterFieldRange:2,collections:{}});var Ah=x(Fu(),e=>e.addCase(wu,(t,r)=>{t.fieldsToInclude=[...new Set(t.fieldsToInclude.concat(r.payload))]}).addCase(Pu,t=>{t.fetchAllFields=!0}).addCase(qu,t=>{t.fetchAllFields=!1}).addCase(Ou.fulfilled,(t,{payload:r})=>{t.fieldsDescription=r}).addCase(eo,(t,{payload:r})=>{var o,a,i;let n=ro().fields;t.fieldsToInclude.push((o=r.collectionField)!=null?o:n.collection,(a=r.parentField)!=null?a:n.parent,(i=r.childField)!=null?i:n.child)}));function Fh(e,t){return e.raw[t.collection]}function Wa(e,t){return e.raw[t.parent]}function br(e,t){let r=e.raw[t.child];return uc(r)?r[0]:r}function wh(e,t){return(e||t)!==void 0&&e===t}function Iu(e,t,r,n=[]){let o=br(e,r);return o?n.indexOf(o)!==-1?[]:t.filter(a=>{let i=br(a,r)===br(e,r);return Wa(a,r)===o&&!i}).map(a=>({result:a,children:Iu(a,t,r,[...n,o])})):[]}function Ph(e,t){return e.find(r=>{let n=Wa(r,t)===void 0,o=wh(Wa(r,t),br(r,t));return n||o})}function qh(e,t){var o;let r=Fa(e),n=(o=Ph(r,t))!=null?o:e;return{result:n,children:Iu(n,r,t),moreResultsAvailable:!0,isLoadingMoreResults:!1}}function Ya(e,t){let r={};return e.forEach(n=>{let o=Fh(n,t);!o||!br(n,t)||(r[o]=qh(n,t))}),r}var Oh=x(ro(),e=>e.addCase(L.fulfilled,(t,{payload:r})=>{t.collections=t.enabled?Ya(r.response.results,t.fields):{}}).addCase(_t.fulfilled,(t,{payload:r})=>{t.collections=t.enabled?{...t.collections,...Ya(r.response.results,t.fields)}:{}}).addCase(eo,(t,{payload:r})=>{var n,o,a,i;return t.enabled?t:{enabled:!0,collections:{},fields:{collection:(n=r.collectionField)!=null?n:t.fields.collection,parent:(o=r.parentField)!=null?o:t.fields.parent,child:(a=r.childField)!=null?a:t.fields.child},filterFieldRange:(i=r.numberOfFoldedResults)!=null?i:t.filterFieldRange}}).addCase(to.pending,(t,{meta:r})=>{let n=r.arg;t.collections[n].isLoadingMoreResults=!0}).addCase(to.rejected,(t,{meta:r})=>{let n=r.arg;t.collections[n].isLoadingMoreResults=!1}).addCase(to.fulfilled,(t,{payload:{collectionId:r,results:n}})=>{let o=Ya(n,t.fields);t.collections[r]=o[r],t.collections[r].moreResultsAvailable=!1}));var Du=me(ku());function Tu(e,t){return e.length===t.length&&e.findIndex((r,n)=>t[n]!==r)===-1}var vq=(0,Du.createCustomEqual)(e=>(t,r)=>Array.isArray(t)&&Array.isArray(r)?t.length!==r.length?!1:t.every(n=>r.findIndex(o=>e(n,o))!==-1):e(t,r));var Vu=x(yc(),e=>{e.addCase(Ye,(t,r)=>Ih(t,r.payload)?void 0:r.payload)}),Ih=(e,t)=>Eh(e.context,t.context)&&kh(e.dictionaryFieldContext,t.dictionaryFieldContext)&&Mh(e.advancedSearchQueries,t.advancedSearchQueries)&&Dh(e.tabSet,t.tabSet)&&Th(e.staticFilterSet,t.staticFilterSet)&&Ka(e.facetSet,t.facetSet)&&Ka(e.dateFacetSet,t.dateFacetSet)&&Ka(e.numericFacetSet,t.numericFacetSet)&&Vh(e.categoryFacetSet,t.categoryFacetSet)&&jh(e.pagination,t.pagination)&&Nh(e.query,t.query)&&Lh(e,t)&&Qh(e.pipeline,t.pipeline)&&Uh(e.searchHub,t.searchHub)&&$h(e.facetOrder,t.facetOrder)&&Bh(e.debug,t.debug),Eh=(e,t)=>JSON.stringify(e.contextValues)===JSON.stringify(t.contextValues),kh=(e,t)=>JSON.stringify(e.contextValues)===JSON.stringify(t.contextValues),Dh=(e,t)=>{let r=ju(e),n=ju(t);return(r==null?void 0:r.id)===(n==null?void 0:n.id)},ju=e=>Object.values(e).find(t=>t.isActive),Th=(e,t)=>{for(let[r,n]of Object.entries(t)){if(!e[r])return!1;let o=Nu(e[r]),a=Nu(n);if(JSON.stringify(o)!==JSON.stringify(a))return!1}return!0},Nu=e=>e.values.filter(t=>t.state!=="idle"),Ka=(e,t)=>{for(let[r,n]of Object.entries(t)){if(!e[r])return!1;let o=e[r].currentValues.filter(i=>i.state==="selected"),a=n.currentValues.filter(i=>i.state==="selected");if(JSON.stringify(o)!==JSON.stringify(a))return!1}return!0},Vh=(e,t)=>{var r;for(let[n,o]of Object.entries(t)){if(!e[n])return!1;let a=at((r=e[n])==null?void 0:r.request.currentValues).parents.map(({value:s})=>s),i=at(o==null?void 0:o.request.currentValues).parents.map(({value:s})=>s);if(JSON.stringify(a)!==JSON.stringify(i))return!1}return!0},jh=(e,t)=>e.firstResult===t.firstResult&&e.numberOfResults===t.numberOfResults,Nh=(e,t)=>JSON.stringify(e)===JSON.stringify(t),Mh=(e,t)=>JSON.stringify(e)===JSON.stringify(t),Lh=(e,t)=>e.sortCriteria===t.sortCriteria,Qh=(e,t)=>e===t,Uh=(e,t)=>e===t,$h=(e,t)=>Tu(e,t),Bh=(e,t)=>e===t;var _h=1,Hh=5e3,zh=x(mr(),e=>{e.addCase(Vc,(t,r)=>{let n=Ga(t),o=r.payload;t.numberOfResults=o,t.firstResult=Rr(n,o)}).addCase(jc,(t,r)=>{t.numberOfResults=r.payload,t.firstResult=0}).addCase(Nc,(t,r)=>{let n=r.payload;t.firstResult=Rr(n,t.numberOfResults)}).addCase(vn,(t,r)=>{let n=r.payload;t.firstResult=Rr(n,t.numberOfResults)}).addCase(Lc,t=>{let r=Ga(t),n=Math.max(r-1,_h);t.firstResult=Rr(n,t.numberOfResults)}).addCase(Mc,t=>{let r=Ga(t),n=Wh(t),o=Math.min(r+1,n);t.firstResult=Rr(o,t.numberOfResults)}).addCase(W.fulfilled,(t,r)=>{r.payload&&(t.numberOfResults=r.payload.pagination.numberOfResults,t.firstResult=r.payload.pagination.firstResult)}).addCase(K,(t,r)=>{var n,o;t.firstResult=(n=r.payload.firstResult)!=null?n:t.firstResult,t.numberOfResults=(o=r.payload.numberOfResults)!=null?o:t.numberOfResults}).addCase(L.fulfilled,(t,r)=>{let{response:n}=r.payload;t.totalCountFiltered=n.totalCountFiltered}).addCase(lt.fulfilled,(t,r)=>{let{response:n}=r.payload;t.totalCountFiltered=n.pagination.totalCount}).addCase(ct,t=>{Ae(t)}).addCase(On,t=>{Ae(t)}).addCase(Pn,t=>{Ae(t)}).addCase(wn,t=>{Ae(t)}).addCase(Mn,t=>{Ae(t)}).addCase(kn,t=>{Ae(t)}).addCase(Vn,t=>{Ae(t)}).addCase(Ne,t=>{Ae(t)}).addCase(ge,t=>{Ae(t)}).addCase(Dn,t=>{Ae(t)}).addCase(jn,t=>{Ae(t)}).addCase(zn,t=>{Ae(t)})});function Ae(e){e.firstResult=mr().firstResult}function Ga(e){let{firstResult:t,numberOfResults:r}=e;return Yh(t,r)}function Wh(e){let{totalCountFiltered:t,numberOfResults:r}=e;return Kh(t,r)}function Rr(e,t){return(e-1)*t}function Yh(e,t){return e/t+1}function Kh(e,t){let r=Math.min(e,Hh);return Math.ceil(r/t)}var Mu=m("pipeline/set",e=>h(e,new O({required:!0,emptyAllowed:!0})));var Gh=x(fr(),e=>{e.addCase(Mu,(t,r)=>r.payload).addCase(W.fulfilled,(t,r)=>{var n,o;return(o=(n=r.payload)==null?void 0:n.pipeline)!=null?o:t}).addCase(It,(t,r)=>r.payload.pipeline||t)});var Jh=x(Zr(),e=>{e.addCase(vu,(t,r)=>{t.url=r.payload.url}).addCase(Cu,(t,r)=>{t.additionalFields=r.payload.additionalFields}).addCase(lt.rejected,(t,r)=>{t.error=r.payload?r.payload:null,t.isLoading=!1}).addCase(lt.fulfilled,(t,r)=>{t.error=null,t.facets=r.payload.response.facets,t.products=r.payload.response.products,t.responseId=r.payload.response.responseId,t.isLoading=!1}).addCase(lt.pending,t=>{t.isLoading=!0})});var Lu=["permanentid","ec_name","ec_brand","ec_category","ec_price","ec_promo_price","ec_shortdesc","ec_thumbnails","ec_images","ec_in_stock","ec_rating","childResults","totalNumberOfChildResults"];var oo=()=>({id:"",skus:[],maxNumberOfRecommendations:5,filter:{brand:"",category:""},additionalFields:[],recommendations:[],error:null,isLoading:!1,searchUid:"",duration:0});var Ja=class{constructor(t){this.state=t;this.initialState=oo()}getLanguage(){return Jr(this.state)}getSearchEventRequestPayload(){return{queryText:"",responseTime:this.responseTime,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getBaseMetadata(){var t;return{recommendation:((t=this.state.productRecommendations)==null?void 0:t.id)||this.initialState.id}}getSearchUID(){var t;return((t=this.state.productRecommendations)==null?void 0:t.searchUid)||this.initialState.searchUid}getPipeline(){return""}getOriginContext(){return this.state.configuration.analytics.originContext}getOriginLevel1(){return this.state.searchHub||Ge()}getOriginLevel2(){return this.state.configuration.analytics.originLevel2}getOriginLevel3(){return this.state.configuration.analytics.originLevel3}getIsAnonymous(){return this.state.configuration.analytics.anonymous}mapResultsToAnalyticsDocument(){return[]}get responseTime(){var t;return((t=this.state.productRecommendations)==null?void 0:t.duration)||this.initialState.duration}get numberOfResults(){var t;return((t=this.state.productRecommendations)==null?void 0:t.recommendations.length)||this.initialState.recommendations.length}};var Qu=fe("analytics/productrecommendations/load",de.Search,e=>e.logRecommendationInterfaceLoad(),e=>new Ja(e));function Zh(e){return e&&"childResults"in e&&"totalNumberOfChildResults"in e}var Uu=m("productrecommendations/setId",e=>h(e,{id:w})),$u=m("productrecommendations/setSku",e=>h(e,{skus:new Y({required:!0,min:1,each:ie})})),Bu=m("productrecommendations/setBrand",e=>h(e,{brand:new O({required:!0,emptyAllowed:!0})})),_u=m("productrecommendations/setCategory",e=>h(e,{category:new O({required:!0,emptyAllowed:!0})})),Hu=m("productrecommendations/setAdditionalFields",e=>h(e,{additionalFields:new Y({required:!0,each:ie})})),zu=m("productrecommendations/setMaxNumberOfRecommendations",e=>h(e,{number:new j({required:!0,max:50,min:1})})),Wt=U("productrecommendations/get",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let o=t(),a=new Date().getTime(),i=await n.productRecommendations(await Xh(o)),s=new Date().getTime()-a;if(J(i))return r(i.error);let u=o.productRecommendations.additionalFields||[];return{recommendations:i.success.results.map(c=>Wu(c,{additionalFields:u})),analyticsAction:Qu(),searchUid:i.success.searchUid,duration:s}}),Wu=(e,{additionalFields:t})=>{let r=e.raw.ec_price,n=e.raw.ec_promo_price,o=e.raw.ec_in_stock,a={permanentid:e.raw.permanentid,clickUri:e.clickUri,ec_name:e.raw.ec_name,ec_brand:e.raw.ec_brand,ec_category:e.raw.ec_category,ec_price:r,ec_shortdesc:e.raw.ec_shortdesc,ec_thumbnails:e.raw.ec_thumbnails,ec_images:e.raw.ec_images,ec_promo_price:n===void 0||r!==void 0&&n>=r?void 0:n,ec_in_stock:o===void 0?void 0:o.toLowerCase()==="yes"||o.toLowerCase()==="true",ec_rating:e.raw.ec_rating,additionalFields:t.reduce((i,s)=>({...i,[s]:e.raw[s]}),{}),childResults:[],totalNumberOfChildResults:0};return Zh(e)&&(a.childResults=e.childResults.map(i=>Wu(i,{additionalFields:t})),a.totalNumberOfChildResults=e.totalNumberOfChildResults),a},Xh=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{visitorId:await se()},recommendation:e.productRecommendations.id,numberOfResults:e.productRecommendations.maxNumberOfRecommendations,fieldsToInclude:[...Lu,...e.productRecommendations.additionalFields||[]],mlParameters:{...e.productRecommendations.skus&&e.productRecommendations.skus.length>0&&{itemIds:e.productRecommendations.skus},...e.productRecommendations.filter.brand&&{brandFilter:e.productRecommendations.filter.brand},...e.productRecommendations.filter.category&&{categoryFilter:e.productRecommendations.filter.category}},actionsHistory:e.configuration.analytics.enabled?Ie.getHistory():[],...e.context&&{context:e.context.contextValues},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.searchHub&&{searchHub:e.searchHub}});var ey=x(oo(),e=>{e.addCase(Uu,(t,r)=>{t.id=r.payload.id}).addCase($u,(t,r)=>{t.skus=r.payload.skus}).addCase(Bu,(t,r)=>{t.filter.brand=r.payload.brand}).addCase(_u,(t,r)=>{t.filter.category=r.payload.category}).addCase(zu,(t,r)=>{t.maxNumberOfRecommendations=r.payload.number}).addCase(Hu,(t,r)=>{t.additionalFields=r.payload.additionalFields}).addCase(Wt.rejected,(t,r)=>{t.error=r.payload?r.payload:null,t.isLoading=!1}).addCase(Wt.fulfilled,(t,r)=>{t.error=null,t.searchUid=r.payload.searchUid,t.recommendations=r.payload.recommendations,t.isLoading=!1}).addCase(Wt.pending,t=>{t.isLoading=!0})});var Yu={id:w,query:ee},Ku=m("querySet/register",e=>h(e,Yu)),ao=m("querySet/update",e=>h(e,Yu));var xr={id:w},Gu=m("querySuggest/register",e=>h(e,{...xr,q:new O,count:new j({min:0})})),Ju=m("querySuggest/unregister",e=>h(e,xr)),Yt=m("querySuggest/selectSuggestion",e=>h(e,{...xr,expression:ee})),Zu=m("querySuggest/clear",e=>h(e,xr)),io=U("querySuggest/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,validatePayload:o}})=>{o(e,xr);let a=e.id,i=await ty(a,t()),s=await n.querySuggest(i);return J(s)?r(s.error):{id:a,q:i.q,...s.success}}),ty=async(e,t)=>{var r;return{accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.search.apiBaseUrl,count:t.querySuggest[e].count,q:(r=t.querySet)==null?void 0:r[e],locale:t.configuration.search.locale,timezone:t.configuration.search.timezone,actionsHistory:t.configuration.analytics.enabled?Ie.getHistory():[],...t.context&&{context:t.context.contextValues},...t.pipeline&&{pipeline:t.pipeline},...t.searchHub&&{searchHub:t.searchHub},...t.configuration.analytics.enabled&&{visitorId:await se(),...t.configuration.analytics.enabled&&await it(t.configuration.analytics)}}};var ry=x(fn(),e=>{e.addCase(Ku,(t,r)=>{let{id:n,query:o}=r.payload;n in t||(t[n]=o)}).addCase(ao,(t,r)=>{let{id:n,query:o}=r.payload;Za(t,n,o)}).addCase(Yt,(t,r)=>{let{id:n,expression:o}=r.payload;Za(t,n,o)}).addCase(L.fulfilled,(t,r)=>{let{queryExecuted:n}=r.payload;Xu(t,n)}).addCase(K,(t,r)=>{X(r.payload.q)||Xu(t,r.payload.q)}).addCase(W.fulfilled,(t,r)=>{if(!!r.payload)for(let[n,o]of Object.entries(r.payload.querySet))Za(t,n,o)})});function Xu(e,t){Object.keys(e).forEach(r=>e[r]=t)}var Za=(e,t,r)=>{t in e&&(e[t]=r)};var el=()=>({});var ny=x(el(),e=>e.addCase(Gu,(t,r)=>{let n=r.payload.id;n in t||(t[n]=oy(r.payload))}).addCase(Ju,(t,r)=>{delete t[r.payload.id]}).addCase(io.pending,(t,r)=>{let n=t[r.meta.arg.id];!n||(n.currentRequestId=r.meta.requestId,n.isLoading=!0)}).addCase(io.fulfilled,(t,r)=>{let n=t[r.meta.arg.id];if(!n||r.meta.requestId!==n.currentRequestId)return;let{q:o}=r.payload;o&&n.partialQueries.push(o.replace(/;/,encodeURIComponent(";"))),n.responseId=r.payload.responseId,n.completions=r.payload.completions,n.isLoading=!1,n.error=null}).addCase(io.rejected,(t,r)=>{let n=t[r.meta.arg.id];!n||(n.error=r.payload||null,n.isLoading=!1)}).addCase(ao,(t,r)=>{let{id:n,query:o}=r.payload;n in t&&tl(t[n],o)}).addCase(Zu,(t,r)=>{let n=t[r.payload.id];!n||(n.responseId="",n.completions=[],n.partialQueries=[])}).addCase(Yt,(t,r)=>{let{id:n,expression:o}=r.payload,a=t[n];!a||(a.q=o)}).addCase(K,(t,r)=>{X(r.payload.q)||rl(t,r.payload.q)}).addCase(L.fulfilled,(t,r)=>{let{queryExecuted:n}=r.payload;rl(t,n)}));function tl(e,t){e.q=t}function rl(e,t){Object.keys(e).forEach(r=>tl(e[r],t))}function oy(e){return{id:"",completions:[],responseId:"",count:5,q:"",currentRequestId:"",error:null,partialQueries:[],isLoading:!1,...e}}var ay=x(je(),e=>e.addCase(pr,(t,r)=>({...t,...r.payload})).addCase(Lt,(t,r)=>{t.q=r.payload}).addCase(Yt,(t,r)=>{t.q=r.payload.expression}).addCase(W.fulfilled,(t,r)=>{var n,o;return(o=(n=r.payload)==null?void 0:n.query)!=null?o:t}).addCase(K,(t,r)=>{var n,o;t.q=(n=r.payload.q)!=null?n:t.q,t.enableQuerySyntax=(o=r.payload.enableQuerySyntax)!=null?o:t.enableQuerySyntax}));var Xa=()=>new M({values:{documentId:new M({values:{contentIdKey:w,contentIdValue:w}})},options:{required:!0}});var nl=m("smartSnippet/expand"),ol=m("smartSnippet/collapse"),al=m("smartSnippet/like"),il=m("smartSnippet/dislike"),sl=m("smartSnippet/feedbackModal/open"),cl=m("smartSnippet/feedbackModal/close"),ul=m("smartSnippet/related/expand",e=>h(e,Xa())),ll=m("smartSnippet/related/collapse",e=>h(e,Xa()));var ei=()=>({liked:!1,disliked:!1,expanded:!1,feedbackModalOpen:!1,relatedQuestions:[]});var dl=(e,t)=>e.findIndex(r=>r.contentIdValue===t.contentIdValue&&r.contentIdKey===t.contentIdKey);function iy({question:e,answerSnippet:t,documentId:{contentIdKey:r,contentIdValue:n}}){return dc(JSON.stringify({question:e,answerSnippet:t,contentIdKey:r,contentIdValue:n}))}var sy=x(ei(),e=>e.addCase(nl,t=>{t.expanded=!0}).addCase(ol,t=>{t.expanded=!1}).addCase(al,t=>{t.liked=!0,t.disliked=!1,t.feedbackModalOpen=!1}).addCase(il,t=>{t.liked=!1,t.disliked=!0}).addCase(sl,t=>{t.feedbackModalOpen=!0}).addCase(cl,t=>{t.feedbackModalOpen=!1}).addCase(L.fulfilled,(t,r)=>{let n=r.payload.response.questionAnswer.relatedQuestions.map(a=>({contentIdKey:a.documentId.contentIdKey,contentIdValue:a.documentId.contentIdValue,expanded:!1})),o=iy(r.payload.response.questionAnswer);return t.questionAnswerId===o?{...t,relatedQuestions:n}:{...ei(),relatedQuestions:n,questionAnswerId:o}}).addCase(ul,(t,r)=>{let n=dl(t.relatedQuestions,r.payload);n!==-1&&(t.relatedQuestions[n].expanded=!0)}).addCase(ll,(t,r)=>{let n=dl(t.relatedQuestions,r.payload);n!==-1&&(t.relatedQuestions[n].expanded=!1)}));var cy={results:new Y({required:!0,each:new M({values:cn})}),maxLength:new j({required:!0,min:1,default:10})},fl=m("recentResults/registerRecentResults",e=>h(e,cy)),pl=m("recentResults/pushRecentResult",e=>(wa(e),{payload:e})),ml=m("recentResults/clearRecentResults");function gl(){return{results:[],maxLength:10}}var uy=x(gl(),e=>{e.addCase(fl,(t,r)=>{t.results=r.payload.results.slice(0,r.payload.maxLength),t.maxLength=r.payload.maxLength}).addCase(ml,t=>{t.results=[]}).addCase(pl,(t,r)=>{let n=r.payload;t.results=t.results.filter(a=>a.uniqueId!==n.uniqueId);let o=t.results.slice(0,t.maxLength-1);t.results=[n,...o]})});var ly={queries:new Y({required:!0,each:new O({emptyAllowed:!1})}),maxLength:new j({required:!0,min:1,default:10})},hl=m("recentQueries/registerRecentQueries",e=>h(e,ly)),yl=m("recentQueries/clearRecentQueries");function Sl(){return{queries:[],maxLength:10}}var dy=x(Sl(),e=>{e.addCase(hl,(t,r)=>{t.queries=r.payload.queries.slice(0,r.payload.maxLength),t.maxLength=r.payload.maxLength}).addCase(yl,t=>{t.queries=[]}).addCase(L.fulfilled,(t,r)=>{let n=r.payload.queryExecuted.trim();if(!n.length)return;t.queries=t.queries.filter(a=>a!==n);let o=t.queries.slice(0,t.maxLength-1);t.queries=[n,...o]})});var vl=fe("analytics/recommendation/update",de.Search,e=>e.logRecommendationInterfaceLoad());var Cl=m("recommendation/set",e=>h(e,{id:w})),Kt=U("recommendation/get",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let o=t(),a=new Date().getTime(),i=await n.recommendations(await fy(o)),s=new Date().getTime()-a;return J(i)?r(i.error):{recommendations:i.success.results,analyticsAction:vl(),duration:s,searchUid:i.success.searchUid}}),fy=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,recommendation:e.recommendation.id,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,locale:e.configuration.search.locale,actionsHistory:e.configuration.analytics.enabled?Ie.getHistory():[],...e.advancedSearchQueries&&{aq:e.advancedSearchQueries.aq,cq:e.advancedSearchQueries.cq},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub},...e.context&&{context:e.context.contextValues},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.fields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.configuration.analytics.enabled&&{visitorId:await se()},...e.configuration.analytics.enabled&&await it(e.configuration.analytics)});var bl=()=>({duration:0,error:null,isLoading:!1,id:"Recommendation",recommendations:[],searchUid:""});var py=x(bl(),e=>{e.addCase(Cl,(t,r)=>{t.id=r.payload.id}).addCase(Kt.rejected,(t,r)=>{t.error=r.payload?r.payload:null,t.isLoading=!1}).addCase(Kt.fulfilled,(t,r)=>{t.error=null,t.recommendations=r.payload.recommendations,t.duration=r.payload.duration,t.isLoading=!1,t.searchUid=r.payload.searchUid}).addCase(Kt.pending,t=>{t.isLoading=!0})});function Rl(e){return e.type==="notify"}function so(e){return e.type==="redirect"}function xl(e){return e.type==="query"}function Al(e){return e.type==="execute"}var Ar=class{constructor(t){this.response=t}get basicExpression(){return this.response.parsedInput.basicExpression}get largeExpression(){return this.response.parsedInput.largeExpression}get redirectionUrl(){let t=this.response.preprocessingOutput.triggers.filter(so);return t.length?t[0].content:null}};var Fl=fe("analytics/redirection",de.Search,(e,t)=>{var r;if((r=t.redirection)==null?void 0:r.redirectTo)return e.logTriggerRedirect({redirectedTo:t.redirection.redirectTo})});var wl=m("standaloneSearchBox/register",e=>h(e,{id:w,redirectionUrl:w})),Pl=m("standaloneSearchBox/updateAnalyticsToSearchFromLink",e=>h(e,{id:w})),ql=m("standaloneSearchBox/updateAnalyticsToOmniboxFromLink"),co=U("standaloneSearchBox/fetchRedirect",async(e,{dispatch:t,getState:r,rejectWithValue:n,extra:{apiClient:o,validatePayload:a}})=>{a(e,{id:new O({emptyAllowed:!1})});let i=await ti(r()),s=await o.plan(i);if(J(s))return n(s.error);let{redirectionUrl:u}=new Ar(s.success);return u&&t(my(u)),u||""}),my=e=>fe("analytics/standaloneSearchBox/redirect",de.Custom,t=>t.logTriggerRedirect({redirectedTo:e}))(),ti=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,timezone:e.configuration.search.timezone,q:e.query.q,...e.context&&{context:e.context.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub},...e.configuration.analytics.enabled&&{visitorId:await se()},...e.configuration.analytics.enabled&&await it(e.configuration.analytics)});var Ol=U("redirection/check",async(e,{dispatch:t,getState:r,rejectWithValue:n,extra:{apiClient:o,validatePayload:a}})=>{a(e,{defaultRedirectionUrl:new O({emptyAllowed:!1})});let i=await o.plan(await ti(r()));if(J(i))return n(i.error);let s=new Ar(i.success).redirectionUrl;return s&&t(Fl()),s||e.defaultRedirectionUrl});var Il=()=>({redirectTo:null});var gy=x(Il(),e=>e.addCase(Ol.fulfilled,(t,r)=>{t.redirectTo=r.payload}));async function El(e,t){var s;let{search:r,accessToken:n,organizationId:o,analytics:a}=e.configuration,i=((s=e.query)==null?void 0:s.q)||"";return{url:r.apiBaseUrl,accessToken:n,organizationId:o,enableNavigation:!1,...a.enabled&&{visitorId:await se()},q:i,...t,requestedOutputSize:t.requestedOutputSize||0}}var Fr=U("resultPreview/fetchResultContent",async(e,{extra:t,getState:r,rejectWithValue:n})=>{let o=r(),a=await El(o,e),i=await t.apiClient.html(a);return J(i)?n(i.error):{content:i.success,uniqueId:e.uniqueId}});function kl(){return{uniqueId:"",content:"",isLoading:!1}}var Dl=x(kl(),e=>{e.addCase(Fr.pending,t=>{t.isLoading=!0}).addCase(Fr.fulfilled,(t,r)=>{let{content:n,uniqueId:o}=r.payload;t.content=n,t.uniqueId=o,t.isLoading=!1})});var uo=m("searchHub/set",e=>h(e,new O({required:!0,emptyAllowed:!0})));var Tl=x(Ge(),e=>{e.addCase(uo,(t,r)=>r.payload).addCase(W.fulfilled,(t,r)=>{var n,o;return(o=(n=r.payload)==null?void 0:n.searchHub)!=null?o:t}).addCase(It,(t,r)=>r.payload.searchHub||t)});function Vl(e,t){var n;let r=(n=t.payload)!=null?n:null;r&&(e.response=Oe().response,e.results=[]),e.error=r,e.isLoading=!1}function jl(e,t){e.error=null,e.response=t.payload.response,e.queryExecuted=t.payload.queryExecuted,e.duration=t.payload.duration,e.isLoading=!1}function Nl(e,t){e.isLoading=!0,e.requestId=t.meta.requestId}var hy=x(Oe(),e=>{e.addCase(L.rejected,(t,r)=>Vl(t,r)),e.addCase(_t.rejected,(t,r)=>Vl(t,r)),e.addCase(L.fulfilled,(t,r)=>{jl(t,r),t.results=r.payload.response.results,t.searchResponseId=r.payload.response.searchUid}),e.addCase(_t.fulfilled,(t,r)=>{jl(t,r),t.results=[...t.results,...r.payload.response.results]}),e.addCase(Ht.fulfilled,(t,r)=>{t.response.facets=r.payload.response.facets,t.response.searchUid=r.payload.response.searchUid}),e.addCase(L.pending,Nl),e.addCase(_t.pending,Nl)});var Ml={by:new De({enum:pn,required:!0})},Ll=m("sortCriteria/register",e=>Ul(e)),Ql=m("sortCriteria/update",e=>Ul(e)),Ul=e=>Lr(e)?(e.forEach(t=>h(t,Ml)),{payload:e}):h(e,Ml);var yy=x(mn(),e=>{e.addCase(Ll,(t,r)=>Ut(r.payload)).addCase(Ql,(t,r)=>Ut(r.payload)).addCase(W.fulfilled,(t,r)=>{var n,o;return(o=(n=r.payload)==null?void 0:n.sortCriteria)!=null?o:t}).addCase(K,(t,r)=>{var n;return(n=r.payload.sortCriteria)!=null?n:t})});function $l(){return{}}var Sy=x($l(),e=>e.addCase(wl,(t,r)=>{let{id:n,redirectionUrl:o}=r.payload;n in t||(t[n]=vy(o))}).addCase(co.pending,(t,r)=>{let n=t[r.meta.arg.id];!n||(n.isLoading=!0)}).addCase(co.fulfilled,(t,r)=>{let n=r.payload,o=t[r.meta.arg.id];!o||(o.redirectTo=n||o.defaultRedirectionUrl,o.isLoading=!1)}).addCase(co.rejected,(t,r)=>{let n=t[r.meta.arg.id];!n||(n.isLoading=!1)}).addCase(Pl,(t,r)=>{let n=t[r.payload.id];!n||(n.analytics.cause="searchFromLink")}).addCase(ql,(t,r)=>{let n=t[r.payload.id];!n||(n.analytics.cause="omniboxFromLink",n.analytics.metadata=r.payload.metadata)}));function vy(e){return{defaultRedirectionUrl:e,redirectTo:"",isLoading:!1,analytics:{cause:"",metadata:null}}}var Bl=()=>({redirectTo:"",query:"",execute:{functionName:"",params:[]},notification:""});var Cy=x(Bl(),e=>e.addCase(L.fulfilled,(t,r)=>{let n=r.payload.response.triggers.filter(so);t.redirectTo=n.length?n[0].content:"";let o=r.payload.response.triggers.filter(xl);t.query=o.length?o[0].content:"";let a=r.payload.response.triggers.filter(Al);t.execute=a.length?{functionName:a[0].content.name,params:a[0].content.params}:{functionName:"",params:[]};let i=r.payload.response.triggers.filter(Rl);t.notification=i.length?i[0].content:""}));var _l=e=>({past:[],present:e,future:[]}),by=e=>{let{past:t,present:r,future:n}=e;if(!r||t.length===0)return e;let o=t[t.length-1];return{past:t.slice(0,t.length-1),present:o,future:[r,...n]}},Ry=e=>{let{past:t,present:r,future:n}=e;if(!r||n.length===0)return e;let o=n[0],a=n.slice(1);return{past:[...t,r],present:o,future:a}},xy=e=>{let{action:t,state:r,reducer:n}=e,{past:o,present:a}=r,i=n(a,t);return a?a===i?r:{past:[...o,a],present:i,future:[]}:_l(i)},Hl=e=>{let{actionTypes:t,reducer:r}=e,n=_l();return(o=n,a)=>{switch(a.type){case t.undo:return by(o);case t.redo:return Ry(o);case t.snapshot:return xy({state:o,reducer:r,action:a});default:return o}}};function zl(){return Su()}var Ay={by:new De({enum:Rt,required:!0})},Wl=m("sort/register",e=>Kl(e)),Yl=m("sort/update",e=>Kl(e)),Kl=e=>h(e,Ay);var Fy=x(zl(),e=>{e.addCase(Wl,(t,r)=>r.payload).addCase(Yl,(t,r)=>r.payload)});var Gl=m("dictionaryFieldContext/set",e=>{let t=new M({options:{required:!0}}),r=h(e,t).error;if(r)return{payload:e,error:r};let n=Object.values(e),o=new Y({each:ee}),a=h(n,o).error;return a?{payload:e,error:a}:{payload:e}}),Jl=m("dictionaryFieldContext/add",e=>{let t=new M({options:{required:!0},values:{field:ee,key:ee}});return h(e,t)}),Zl=m("dictionaryFieldContext/remove",e=>h(e,ee));var wy=x(un(),e=>{e.addCase(Gl,(t,r)=>{t.contextValues=r.payload}).addCase(Jl,(t,r)=>{let{field:n,key:o}=r.payload;t.contextValues[n]=o}).addCase(Zl,(t,r)=>{delete t.contextValues[r.payload]}).addCase(W.fulfilled,(t,r)=>{!r.payload||(t.contextValues=r.payload.dictionaryFieldContext.contextValues)})});var Py=x(hn(),e=>{e.addCase($i,(t,r)=>{let n=r.payload,{id:o}=n;o in t||(t[o]={...n,isActive:!1})}).addCase(_r,(t,r)=>{let n=r.payload;Xl(t,n)}).addCase(K,(t,r)=>{let n=r.payload.tab||"";Xl(t,n)})});function Xl(e,t){t in e&&Object.keys(e).forEach(n=>{e[n].isActive=n===t})}var lo=w,ri=new M({options:{required:!0},values:{caption:ee,expression:ee,state:new O({constrainTo:["idle","selected"]})}}),ed=new Y({required:!0,each:ri});var td=m("staticFilter/register",e=>h(e,{id:lo,values:ed})),rd=m("staticFilter/toggleSelect",e=>h(e,{id:lo,value:ri})),nd=m("staticFilter/deselectAllFilterValues",e=>h(e,lo));var qy=x(gn(),e=>e.addCase(td,(t,r)=>{let n=r.payload,{id:o}=n;o in t||(t[o]=n)}).addCase(rd,(t,r)=>{let{id:n,value:o}=r.payload,a=t[n];if(!a)return;let i=a.values.find(u=>u.caption===o.caption);if(!i)return;let s=i.state==="selected";i.state=s?"idle":"selected"}).addCase(nd,(t,r)=>{let n=r.payload,o=t[n];!o||o.values.forEach(a=>a.state="idle")}).addCase(ge,t=>{Object.values(t).forEach(r=>{r.values.forEach(n=>n.state="idle")})}).addCase(K,(t,r)=>{let n=r.payload.sf||{};Object.entries(t).forEach(([o,a])=>{let i=n[o]||[];a.values.forEach(s=>{s.state=i.includes(s.caption)?"selected":"idle"})})}));var fo=m("caseAssistConfiguration/set",e=>h(e,{caseAssistId:w,locale:ie}));var od=()=>({caseAssistId:"",locale:"en-US"});var ad=x(od(),e=>{e.addCase(fo,(t,r)=>{t.caseAssistId=r.payload.caseAssistId,t.locale=r.payload.locale})});var xt=m("caseAssist/caseInput/update",e=>h(e,{fieldName:w,fieldValue:ee}));var id=()=>({});var sd=x(id(),e=>{e.addCase(xt,(t,r)=>{t[r.payload.fieldName]={value:r.payload.fieldValue}})});var po=(e,t,r,n,o={})=>{Oy(e);let a=`${e.url}/rest/organizations/${e.organizationId}/caseassists/${e.caseAssistId}${n}`,i=Iy(o),s=i?`${a}?${i}`:a;return{accessToken:e.accessToken,method:t,contentType:r,url:s}},mo=e=>Object.keys(e).filter(t=>e[t].value!=="").reduce((t,r)=>({...t,[r]:e[r]}),{}),go=e=>Object.keys(e).filter(t=>e[t].value!=="").reduce((t,r)=>({...t,[r]:e[r].value}),{}),Oy=e=>{if(!e.url)throw new Error("The 'url' attribute must contain a valid platform URL.");if(!e.organizationId)throw new Error("The 'organizationId' attribute must contain a valid organization ID.");if(!e.accessToken)throw new Error("The 'accessToken' attribute must contain a valid platform access token.");if(!e.caseAssistId)throw new Error("The 'caseAssistId' attribute must contain a valid Case Assist configuration ID.")},Iy=e=>Object.keys(e).map(t=>`${t}=${encodeURIComponent(e[t])}`).join("&");var Gt=m("caseAssist/caseField/register",e=>h(e,{fieldName:w,fieldValue:ee})),Jt=m("caseAssist/caseField/update",e=>h(e,{fieldName:w,fieldValue:ee})),Qe=U("caseAssist/classifications/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let o=t(),a=await n.getCaseClassifications(await Ey(o));return J(a)?r(a.error):{response:a.success}}),Ey=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.platformUrl,caseAssistId:e.caseAssistConfiguration.caseAssistId,...e.configuration.analytics.enabled&&{visitorId:await se()},fields:e.caseInput,context:e.caseField?go(e.caseField.fields):void 0,locale:e.caseAssistConfiguration.locale,debug:e.debug});var cd=()=>({status:{loading:!1,error:null,lastResponseId:""},fields:{}});var ud=x(cd(),e=>{e.addCase(Gt,(t,r)=>{let{fieldName:n,fieldValue:o}=r.payload;t.fields[n]={value:o,suggestions:[]}}).addCase(Jt,(t,r)=>{let{fieldName:n,fieldValue:o}=r.payload;t.fields[n].value=o}).addCase(Qe.rejected,(t,r)=>{var n;t.status.error=(n=r.payload)!=null?n:null,t.status.loading=!1}).addCase(Qe.fulfilled,(t,r)=>{let n={value:"",suggestions:[]};Object.entries(r.payload.response.fields).forEach(([o,a])=>{t.fields[o]||(t.fields[o]={...n}),t.fields[o].suggestions=a.predictions}),t.status.lastResponseId=r.payload.response.responseId,t.status.error=null,t.status.loading=!1}).addCase(Qe.pending,t=>{t.status.loading=!0})});var Fe=U("caseAssist/documentSuggestions/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let o=t(),a=await n.getDocumentSuggestions(await ky(o));return J(a)?r(a.error):{response:a.success}}),ky=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.platformUrl,caseAssistId:e.caseAssistConfiguration.caseAssistId,...e.configuration.analytics.enabled&&{visitorId:await se()},fields:e.caseInput,context:e.caseField?go(e.caseField.fields):void 0,locale:e.caseAssistConfiguration.locale,debug:e.debug});var ld=()=>({status:{loading:!1,error:null,lastResponseId:""},documents:[]});var dd=x(ld(),e=>{e.addCase(Fe.rejected,(t,r)=>{var n;t.status.error=(n=r.payload)!=null?n:null,t.status.loading=!1}).addCase(Fe.fulfilled,(t,r)=>{t.documents=r.payload.response.documents,t.status.lastResponseId=r.payload.response.responseId,t.status.error=null,t.status.loading=!1}).addCase(Fe.pending,t=>{t.status.loading=!0})});var fd=m("excerptLength/set",e=>h(e,new j({min:0,required:!0})));function pd(){return{length:void 0}}var Dy=x(pd(),e=>{e.addCase(fd,(t,r)=>{t.length=r.payload})});var we=Bs;var md=Tl,gd=Gs,hd=Dl,yd=Js;var y0=Hl({actionTypes:{redo:Yo.type,undo:Wo.type,snapshot:Ye.type},reducer:Vu});var dt=ad,ft=sd,pt=ud,mt=dd;function ho(e,t,r){var n,o,a;t===void 0&&(t=50),r===void 0&&(r={});var i=(n=r.isImmediate)!=null&&n,s=(o=r.callback)!=null&&o,u=r.maxWait,c=Date.now(),d=[];function l(){if(u!==void 0){var f=Date.now()-c;if(f+t>=u)return u-f}return t}var p=function(){var f=[].slice.call(arguments),g=this;return new Promise(function(S,P){var q=i&&a===void 0;if(a!==void 0&&clearTimeout(a),a=setTimeout(function(){if(a=void 0,c=Date.now(),!i){var E=e.apply(g,f);s&&s(E),d.forEach(function(V){return(0,V.resolve)(E)}),d=[]}},l()),q){var D=e.apply(g,f);return s&&s(D),S(D)}d.push({resolve:S,reject:P})})};return p.cancel=function(f){a!==void 0&&clearTimeout(a),d.forEach(function(g){return(0,g.reject)(f)}),d=[]},p}function Sd(e,t){let r=0,n=ho(()=>r=0,500);return o=>a=>async i=>{if(!(typeof i=="function"))return a(i);let u=await a(i);if(!Ty(u))return u;if(typeof t!="function")return e.warn("Unable to renew the expired token because a renew function was not provided. Please specify the #renewAccessToken option when initializing the engine."),u;if(r>=5)return e.warn("Attempted to renew the token but was not successful. Please check the #renewAccessToken function."),u;r++,n();let c=await Vy(t);o.dispatch(Ot({accessToken:c})),o.dispatch(i)}}function Ty(e){var t;return((t=e.error)==null?void 0:t.name)===new ir().name}async function Vy(e){try{return await e()}catch(t){return""}}var vd=e=>t=>r=>{var a,i;let n=(a=r.payload)==null?void 0:a.analyticsAction;n!==void 0&&((i=r.payload)==null||delete i.analyticsAction);let o=t(r);return r.type===L.fulfilled.type&&n===void 0&&console.error("No analytics action associated with search:",r),r.type===Kt.fulfilled&&n===void 0&&console.error("No analytics action associated with recommendation:",r),r.type===Wt.fulfilled&&n===void 0&&console.error("No analytics action associated with product recommendation:",r),n!==void 0&&e.dispatch(n),o};var jy={configuration:we,version:yd};function Cd(e,t){let r=Ny(e,t),{accessToken:n,organizationId:o,platformUrl:a,analytics:i}=e.configuration;if(r.dispatch(Ot({accessToken:n,organizationId:o,platformUrl:a})),i){let{analyticsClientMiddleware:s,...u}=i;r.dispatch(Ur(u))}return r}function Ny(e,t){let{reducers:r}=e,n=Vi({...jy,...r});e.crossReducer&&n.addCrossReducer(e.crossReducer);let o=t.logger,a=My(e,t,n);return{addReducers(i){n.containsAll(i)||(n.add(i),a.replaceReducer(n.combinedReducer))},dispatch:a.dispatch,subscribe:a.subscribe,enableAnalytics(){a.dispatch(Br())},disableAnalytics(){a.dispatch($r())},get state(){return a.getState()},logger:o,store:a}}function My(e,t,r){let{preloadedState:n,configuration:o}=e,a=o.name||"coveo-headless",i=Ly(e,t.logger);return Mi({preloadedState:n,reducer:r.combinedReducer,middlewares:i,thunkExtraArguments:t,name:a})}function Ly(e,t){let{renewAccessToken:r}=e.configuration;return[Sd(t,r),ji(t),vd].concat(e.middlewares||[])}var bd={organizationId:w,accessToken:w,platformUrl:new O({required:!1,emptyAllowed:!1}),name:new O({required:!1,emptyAllowed:!1}),analytics:new M({options:{required:!1},values:{enabled:new B({required:!1}),originContext:new O({required:!1}),originLevel2:new O({required:!1}),originLevel3:new O({required:!1})}})};var Rd=new be({...bd,caseAssistId:w,locale:ie});var Id=me(Od());function Ed(e){return(0,Id.default)({name:"@coveo/headless",level:(e==null?void 0:e.level)||"warn",formatters:{log:e==null?void 0:e.logFormatter},browser:{transmit:{send:(e==null?void 0:e.browserPostLogHook)||(()=>{})}}})}var vo=e=>e;function kd(e,t){let r=Zy(e),n=Re,o=Xy(e);return{analyticsClientMiddleware:r,validatePayload:n,preprocessRequest:o,logger:t}}function Zy(e){let{analytics:t}=e,r=(n,o)=>o;return(t==null?void 0:t.analyticsClientMiddleware)||r}function Xy(e){return e.preprocessRequest||vo}var Dd=e=>{let t=e.debug?{debug:"1"}:{};return{...po(e,"POST","application/json","/classify",t),requestParams:eS(e)}},eS=e=>({visitorId:e.visitorId,locale:e.locale,fields:mo(e.fields)});var Td=e=>{let t={};return e.debug&&(t.debug="1"),e.numberOfResults&&(t.numberOfResults=e.numberOfResults.toString()),{...po(e,"POST","application/json","/documents/suggest",t),requestParams:tS(e)}},tS=e=>({visitorId:e.visitorId,locale:e.locale,fields:mo(e.fields),context:e.context});var ai=class{constructor(t){this.options=t}async getCaseClassifications(t){let r=await Ct.call({...Dd(t),...this.options});if(r instanceof Error)return sn(r);let n=await r.json();return r.ok?{success:n}:{error:n}}async getDocumentSuggestions(t){let r=await Ct.call({...Td(t),...this.options});if(r instanceof Error)return sn(r);let n=await r.json();return r.ok?{success:n}:{error:n}}async html(t){return Aa(t,this.options)}};var rS={debug:gd,caseAssistConfiguration:dt,searchHub:md};function Vd(e){let t=Ed(e.loggerOptions);nS(e.configuration,t);let r=oS(e.configuration,t),n={...kd(e.configuration,t),apiClient:r},o={...e,reducers:rS},a=Cd(o,n),{caseAssistId:i,locale:s,searchHub:u}=e.configuration;return a.dispatch(fo({caseAssistId:i,locale:s})),X(u)||a.dispatch(uo(u)),{...a,get state(){return a.state}}}function nS(e,t){try{Rd.validate(e)}catch(r){throw t.error(r,"Case Assist engine configuration error"),r}}function oS(e,t){return new ai({logger:t,preprocessRequest:e.preprocessRequest||vo})}function aS(e){return e.addReducers({caseInput:ft}),{updateCaseInput:xt}}function iS(e){return e.addReducers({caseField:pt}),{registerCaseField:Gt,updateCaseField:Jt,fetchCaseClassifications:Qe}}function sS(e){return e.addReducers({documentSuggestion:mt}),{fetchDocumentSuggestions:Fe}}var jd=(a=>(a.id="id",a.subject="subject",a.description="description",a.category="category",a.productId="productId",a))(jd||{}),Nd=e=>!Object.values(jd).includes(e),ve=e=>{let t=r=>{var n;return(n=cS(e,r))!=null?n:lS(e,r)};return{id:t("id"),subject:t("subject"),description:t("description"),category:t("category"),productId:t("productId"),custom:{...uS(e),...dS(e)}}},cS=(e,t)=>{var r,n;return(n=(r=e==null?void 0:e.caseInput)==null?void 0:r[t])==null?void 0:n.value},uS=e=>{var t;return Object.keys((t=e==null?void 0:e.caseInput)!=null?t:[]).reduce((r,n)=>{var o,a;if(Nd(n)){let i=(a=(o=e==null?void 0:e.caseInput)==null?void 0:o[n])==null?void 0:a.value;if(i)return{...r,[n]:i}}return r},{})},lS=(e,t)=>{var r,n;return(n=(r=e==null?void 0:e.caseField)==null?void 0:r.fields[t])==null?void 0:n.value},dS=e=>{var t,r;return Object.keys((r=(t=e==null?void 0:e.caseField)==null?void 0:t.fields)!=null?r:[]).reduce((n,o)=>{var a,i,s;if(Nd(o)){let u=(s=(i=(a=e==null?void 0:e.caseField)==null?void 0:a.fields)==null?void 0:i[o])==null?void 0:s.value;if(u)return{...n,[o]:u}}return n},{})},ii=(e,t,r=!1)=>{var s,u,c,d,l,p,f,g;let n=Object.keys((u=(s=e==null?void 0:e.caseField)==null?void 0:s.fields)!=null?u:{}).find(S=>{var P;return(P=e==null?void 0:e.caseField)==null?void 0:P.fields[S].suggestions.some(q=>q.id===t)});if(!n)throw new Error(`Classification with ID '${t}' could not be found.`);let o=(c=e==null?void 0:e.caseField)==null?void 0:c.fields[n],a=o==null?void 0:o.suggestions.find(S=>S.id===t),i={classificationId:(d=a==null?void 0:a.id)!=null?d:"",responseId:(p=(l=e.caseField)==null?void 0:l.status.lastResponseId)!=null?p:"",fieldName:n,classification:{value:(f=a==null?void 0:a.value)!=null?f:"",confidence:(g=a==null?void 0:a.confidence)!=null?g:0}};return r?{...i,autoSelection:r}:i},qr=(e,t,r=!1,n=!1)=>{var s,u,c;let o,a=(s=e.documentSuggestion)==null?void 0:s.documents.find((d,l)=>{let p=d.uniqueId===t;return p&&(o=l),p});if(!a)throw new Error(`Document Suggestion with ID '${t}' could not be found.`);let i={suggestionId:a.uniqueId,responseId:(c=(u=e.documentSuggestion)==null?void 0:u.status.lastResponseId)!=null?c:"",suggestion:{documentUri:a.fields.uri,documentUriHash:a.fields.urihash,documentTitle:a.title,documentUrl:a.clickUri,documentPosition:o!=null?o:0}};return r?{...i,fromQuickview:r}:n?{...i,openDocument:n}:i};var Md=Se("analytics/caseAssist/case/start",(e,t)=>e.logEnterInterface({ticket:ve(t)})),Ld=e=>Se("analytics/caseAssist/case/nextStage",(t,r)=>t.logMoveToNextCaseStep({ticket:ve(r),stage:e==null?void 0:e.stageName}))(),Qd=Se("analytics/caseAssist/case/create",(e,t)=>e.logCaseCreated({ticket:ve(t)})),Ud=Se("analytics/caseAssist/case/solve",(e,t)=>e.logCaseSolved({ticket:ve(t)})),$d=Se("analytics/caseAssist/case/abandon",(e,t)=>e.logCaseCancelled({ticket:ve(t)})),er=e=>Se("analytics/caseAssist/case/field/update",(t,r)=>t.logUpdateCaseField({fieldName:e,ticket:ve(r)}))(),Bd=e=>Se("analytics/caseAssist/classification/click",(t,r)=>t.logSelectFieldSuggestion({suggestion:ii(r,e,!0),ticket:ve(r)}))(),Co=e=>Se("analytics/caseAssist/classification/click",(t,r)=>t.logSelectFieldSuggestion({suggestion:ii(r,e),ticket:ve(r)}))(),_d=e=>Se("analytics/caseAssist/documentSuggestion/click",(t,r)=>t.logSelectDocumentSuggestion({suggestion:qr(r,e),ticket:ve(r)}))(),bo=e=>fS(e)(),fS=e=>Se("analytics/caseAssist/documentSuggestion/click",(t,r)=>t.logSelectDocumentSuggestion({suggestion:qr(r,e,!0),ticket:ve(r)})),Hd=e=>pS(e)(),pS=e=>Se("analytics/caseAssist/documentSuggestion/click",(t,r)=>t.logSelectDocumentSuggestion({suggestion:qr(r,e,!1,!0),ticket:ve(r)})),zd=(e,t)=>Se("analytics/caseAssist/documentSuggestion/rate",(r,n)=>r.logRateDocumentSuggestion({rating:t,suggestion:qr(n,e),ticket:ve(n)}))();function mS(e){return e.addReducers({}),{logCaseStart:Md,logCaseNextStage:Ld,logCreateCase:Qd,logSolveCase:Ud,logAbandonCase:$d,logUpdateCaseField:er,logClassificationClick:Co,logDocumentSuggestionClick:_d,logDocumentSuggestionRating:zd,logQuickviewDocumentSuggestionClick:bo}}function $e(e){let t,r=new Map,n=()=>r.size===0,o=a=>{try{let i=JSON.stringify(a),s=t!==i;return t=i,s}catch(i){return console.warn('Could not detect if state has changed, check the controller "get state method"',i),!0}};return{subscribe(a){a();let i=Symbol(),s;return n()&&(t=JSON.stringify(this.state),s=e.subscribe(()=>{o(this.state)&&r.forEach(u=>u())})),r.set(i,a),()=>{r.delete(i),n()&&s&&s()}},get state(){return{}}}}function gS(e,t){let r=new be({field:w});Qr(e,r,t,"buildCaseInput")}function Wd(e,t){var s;if(!hS(e))throw Te;let r=$e(e),{dispatch:n}=e,o=()=>e.state;gS(e,t.options);let a=t.options.field;return((s=o().caseInput)==null?void 0:s[a])||n(xt({fieldName:a,fieldValue:""})),{...r,update(u,c){n(xt({fieldName:a,fieldValue:u})),n(er(a)),(c==null?void 0:c.caseClassifications)&&n(Qe()),(c==null?void 0:c.documentSuggestions)&&n(Fe())},get state(){return o().caseInput[a]}}}function hS(e){return e.addReducers({configuration:we,caseAssistConfiguration:dt,caseInput:ft,caseField:pt,documentSuggestion:mt}),!0}var yS=new be({field:w});function Yd(e,t={}){var s,u;if(!SS(e))throw Te;let r=$e(e),{dispatch:n}=e,o=Qr(e,yS,t.options,"buildCaseField"),a=()=>e.state;return((u=(s=a().caseField)==null?void 0:s.fields)==null?void 0:u[o.field])||n(Gt({fieldName:o.field,fieldValue:""})),{...r,get state(){var g,S,P,q,D,E,V,_,z,N;let c=(P=(S=(g=a().caseField)==null?void 0:g.status)==null?void 0:S.loading)!=null?P:!1,d=(E=(D=(q=a().caseField)==null?void 0:q.status)==null?void 0:D.error)!=null?E:null,l=(_=(V=a().caseField)==null?void 0:V.fields)==null?void 0:_[o.field],p=(z=l==null?void 0:l.value)!=null?z:"",f=(N=l==null?void 0:l.suggestions)!=null?N:[];return{loading:c,error:d,value:p,suggestions:f}},update(c,d,l){var f,g,S,P,q;let p=(q=(P=(S=(g=(f=a().caseField)==null?void 0:f.fields)==null?void 0:g[o.field])==null?void 0:S.suggestions)==null?void 0:P.find(D=>D.value===c))==null?void 0:q.id;p&&n(l?Bd(p):Co(p)),n(Jt({fieldName:o.field,fieldValue:c})),!l&&n(er(o.field)),(d==null?void 0:d.caseClassifications)&&n(Qe()),(d==null?void 0:d.documentSuggestions)&&n(Fe())}}}function SS(e){return e.addReducers({configuration:we,caseAssistConfiguration:dt,caseInput:ft,caseField:pt,documentSuggestion:mt}),!0}function Kd(e,t,r){if(!vS(e))throw Te;let{dispatch:n}=e,o=()=>e.state,a=$e(e),{result:i,maximumPreviewSize:s}=t.options,u=i.uniqueId;return{...a,fetchResultContent(){n(Fr({uniqueId:u,requestedOutputSize:s})),r&&r()},get state(){let c=i.hasHtmlVersion,d=o().resultPreview,l=u===d.uniqueId?d.content:"",p=d.isLoading;return{content:l,resultHasPreview:c,isLoading:p}}}}function vS(e){return e.addReducers({configuration:we,resultPreview:hd}),!0}function Gd(e,t){return Kd(e,t,()=>{e.dispatch(bo(t.options.result.uniqueId))})}function si(e){if(!CS(e))throw Te;let t=$e(e),{dispatch:r}=e,n=()=>e.state;return{...t,fetch(){r(Fe())},get state(){let o=n().documentSuggestion;return{loading:o.status.loading,error:o.status.error,documents:o.documents}}}}function CS(e){return e.addReducers({configuration:we,caseAssistConfiguration:dt,caseInput:ft,caseField:pt,documentSuggestion:mt}),!0}function Jd(e,t,r){if(!bS(e))throw Te;let n=1e3,o={selectionDelay:n,debounceWait:n,...t.options},a;return{select:ho(r,o.debounceWait,{isImmediate:!0}),beginDelayedSelect(){a=setTimeout(r,o.selectionDelay)},cancelPendingSelect(){a&&clearTimeout(a)}}}function bS(e){return e.addReducers({configuration:we}),!0}function Zd(e,t){let r=!1;return Jd(e,t,()=>{r||(r=!0,e.dispatch(Hd(t.options.result.uniqueId)))})}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/**
 * @license
 *
 * Copyright 2022 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
}));
//# sourceMappingURL=headless.js.map
