/**
 * @license
 *
 * Copyright 2022 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
(function (global, factory) {
    const isCommonjs = typeof exports === 'object' && typeof module !== 'undefined';
    
    if (isCommonjs) {
      return factory(exports);
    }
    
    const isAmd = typeof define === 'function' && define.amd;

    if (isAmd) {
      return define(['exports'], factory);
    }

    global = typeof globalThis !== 'undefined' ? globalThis : global || self;
    factory(global.CoveoHeadless = {});
  })(this, (function (exports) { 'use strict';
var SS=Object.create;var $n=Object.defineProperty;var xS=Object.getOwnPropertyDescriptor;var FS=Object.getOwnPropertyNames;var bS=Object.getPrototypeOf,CS=Object.prototype.hasOwnProperty;var hd=e=>$n(e,"__esModule",{value:!0});var ce=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),_n=(e,t)=>{hd(e);for(var r in t)$n(e,r,{get:t[r],enumerable:!0})},M=(e,t,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of FS(t))!CS.call(e,a)&&a!=="default"&&$n(e,a,{get:()=>t[a],enumerable:!(r=xS(t,a))||r.enumerable});return e},xe=e=>M(hd($n(e!=null?SS(bS(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var Sd=ce((UE,yd)=>{yd.exports=fetch});var xd=ce(an=>{"use strict";var Hn=an&&an.__assign||function(){return Hn=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Hn.apply(this,arguments)};Object.defineProperty(an,"__esModule",{value:!0});var RS={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};function vS(e){var t=Hn(Hn({},RS),e);return t.numOfAttempts<1&&(t.numOfAttempts=1),t}an.getSanitizedOptions=vS});var Fd=ce(gu=>{"use strict";Object.defineProperty(gu,"__esModule",{value:!0});function AS(e){var t=Math.random()*e;return Math.round(t)}gu.fullJitter=AS});var bd=ce(hu=>{"use strict";Object.defineProperty(hu,"__esModule",{value:!0});function PS(e){return e}hu.noJitter=PS});var Cd=ce(yu=>{"use strict";Object.defineProperty(yu,"__esModule",{value:!0});var ES=Fd(),wS=bd();function OS(e){switch(e.jitter){case"full":return ES.fullJitter;case"none":default:return wS.noJitter}}yu.JitterFactory=OS});var xu=ce(Su=>{"use strict";Object.defineProperty(Su,"__esModule",{value:!0});var qS=Cd(),IS=function(){function e(t){this.options=t,this.attempt=0}return e.prototype.apply=function(){var t=this;return new Promise(function(r){return setTimeout(r,t.jitteredDelay)})},e.prototype.setAttemptNumber=function(t){this.attempt=t},Object.defineProperty(e.prototype,"jitteredDelay",{get:function(){var t=qS.JitterFactory(this.options);return t(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){var t=this.options.startingDelay,r=this.options.timeMultiple,a=this.numOfDelayedAttempts,o=t*Math.pow(r,a);return Math.min(o,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),e}();Su.Delay=IS});var Rd=ce(Wt=>{"use strict";var TS=Wt&&Wt.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var n in o)o.hasOwnProperty(n)&&(a[n]=o[n])},e(t,r)};return function(t,r){e(t,r);function a(){this.constructor=t}t.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}}(),kS=Wt&&Wt.__awaiter||function(e,t,r,a){function o(n){return n instanceof r?n:new r(function(i){i(n)})}return new(r||(r=Promise))(function(n,i){function s(l){try{u(a.next(l))}catch(d){i(d)}}function c(l){try{u(a.throw(l))}catch(d){i(d)}}function u(l){l.done?n(l.value):o(l.value).then(s,c)}u((a=a.apply(e,t||[])).next())})},DS=Wt&&Wt.__generator||function(e,t){var r={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},a,o,n,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(u){return function(l){return c([u,l])}}function c(u){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,o&&(n=u[0]&2?o.return:u[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,u[1])).done)return n;switch(o=0,n&&(u=[u[0]&2,n.value]),u[0]){case 0:case 1:n=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,o=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(n=r.trys,!(n=n.length>0&&n[n.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!n||u[1]>n[0]&&u[1]<n[3])){r.label=u[1];break}if(u[0]===6&&r.label<n[1]){r.label=n[1],n=u;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(u);break}n[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(l){u=[6,l],o=0}finally{a=n=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(Wt,"__esModule",{value:!0});var VS=xu(),NS=function(e){TS(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.apply=function(){return kS(this,void 0,void 0,function(){return DS(this,function(r){return[2,this.isFirstAttempt?!0:e.prototype.apply.call(this)]})})},Object.defineProperty(t.prototype,"isFirstAttempt",{get:function(){return this.attempt===0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),t}(VS.Delay);Wt.SkipFirstDelay=NS});var vd=ce(on=>{"use strict";var MS=on&&on.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var n in o)o.hasOwnProperty(n)&&(a[n]=o[n])},e(t,r)};return function(t,r){e(t,r);function a(){this.constructor=t}t.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}}();Object.defineProperty(on,"__esModule",{value:!0});var QS=xu(),LS=function(e){MS(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(QS.Delay);on.AlwaysDelay=LS});var Ad=ce(Fu=>{"use strict";Object.defineProperty(Fu,"__esModule",{value:!0});var jS=Rd(),BS=vd();function US(e,t){var r=$S(e);return r.setAttemptNumber(t),r}Fu.DelayFactory=US;function $S(e){return e.delayFirstAttempt?new BS.AlwaysDelay(e):new jS.SkipFirstDelay(e)}});var Pd=ce(Jr=>{"use strict";var bu=Jr&&Jr.__awaiter||function(e,t,r,a){function o(n){return n instanceof r?n:new r(function(i){i(n)})}return new(r||(r=Promise))(function(n,i){function s(l){try{u(a.next(l))}catch(d){i(d)}}function c(l){try{u(a.throw(l))}catch(d){i(d)}}function u(l){l.done?n(l.value):o(l.value).then(s,c)}u((a=a.apply(e,t||[])).next())})},Cu=Jr&&Jr.__generator||function(e,t){var r={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},a,o,n,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(u){return function(l){return c([u,l])}}function c(u){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,o&&(n=u[0]&2?o.return:u[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,u[1])).done)return n;switch(o=0,n&&(u=[u[0]&2,n.value]),u[0]){case 0:case 1:n=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,o=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(n=r.trys,!(n=n.length>0&&n[n.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!n||u[1]>n[0]&&u[1]<n[3])){r.label=u[1];break}if(u[0]===6&&r.label<n[1]){r.label=n[1],n=u;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(u);break}n[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(l){u=[6,l],o=0}finally{a=n=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(Jr,"__esModule",{value:!0});var _S=xd(),HS=Ad();function zS(e,t){return t===void 0&&(t={}),bu(this,void 0,void 0,function(){var r,a;return Cu(this,function(o){switch(o.label){case 0:return r=_S.getSanitizedOptions(t),a=new WS(e,r),[4,a.execute()];case 1:return[2,o.sent()]}})})}Jr.backOff=zS;var WS=function(){function e(t,r){this.request=t,this.options=r,this.attemptNumber=0}return e.prototype.execute=function(){return bu(this,void 0,void 0,function(){var t,r;return Cu(this,function(a){switch(a.label){case 0:if(this.attemptLimitReached)return[3,7];a.label=1;case 1:return a.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return a.sent(),[4,this.request()];case 3:return[2,a.sent()];case 4:return t=a.sent(),this.attemptNumber++,[4,this.options.retry(t,this.attemptNumber)];case 5:if(r=a.sent(),!r||this.attemptLimitReached)throw t;return[3,6];case 6:return[3,0];case 7:throw new Error("Something went wrong.")}})})},Object.defineProperty(e.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),e.prototype.applyDelay=function(){return bu(this,void 0,void 0,function(){var t;return Cu(this,function(r){switch(r.label){case 0:return t=HS.DelayFactory(this.options,this.attemptNumber),[4,t.apply()];case 1:return r.sent(),[2]}})})},e}()});var pa=ce((Ru,vu)=>{(function(e,t){typeof Ru=="object"&&typeof vu!="undefined"?vu.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self).dayjs=t()})(Ru,function(){"use strict";var e=1e3,t=6e4,r=36e5,a="millisecond",o="second",n="minute",i="hour",s="day",c="week",u="month",l="quarter",d="year",f="date",p="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,x={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},F=function(T,C,w){var V=String(T);return!V||V.length>=C?T:""+Array(C+1-V.length).join(w)+T},b={s:F,z:function(T){var C=-T.utcOffset(),w=Math.abs(C),V=Math.floor(w/60),O=w%60;return(C<=0?"+":"-")+F(V,2,"0")+":"+F(O,2,"0")},m:function T(C,w){if(C.date()<w.date())return-T(w,C);var V=12*(w.year()-C.year())+(w.month()-C.month()),O=C.clone().add(V,u),_=w-O<0,H=C.clone().add(V+(_?-1:1),u);return+(-(V+(w-O)/(_?O-H:H-O))||0)},a:function(T){return T<0?Math.ceil(T)||0:Math.floor(T)},p:function(T){return{M:u,y:d,w:c,d:s,D:f,h:i,m:n,s:o,ms:a,Q:l}[T]||String(T||"").toLowerCase().replace(/s$/,"")},u:function(T){return T===void 0}},N="en",Q={};Q[N]=x;var J=function(T){return T instanceof U},re=function(T,C,w){var V;if(!T)return N;if(typeof T=="string")Q[T]&&(V=T),C&&(Q[T]=C,V=T);else{var O=T.name;Q[O]=T,V=O}return!w&&V&&(N=V),V||!w&&N},X=function(T,C){if(J(T))return T.clone();var w=typeof C=="object"?C:{};return w.date=T,w.args=arguments,new U(w)},R=b;R.l=re,R.i=J,R.w=function(T,C){return X(T,{locale:C.$L,utc:C.$u,x:C.$x,$offset:C.$offset})};var U=function(){function T(w){this.$L=re(w.locale,null,!0),this.parse(w)}var C=T.prototype;return C.parse=function(w){this.$d=function(V){var O=V.date,_=V.utc;if(O===null)return new Date(NaN);if(R.u(O))return new Date;if(O instanceof Date)return new Date(O);if(typeof O=="string"&&!/Z$/i.test(O)){var H=O.match(m);if(H){var oe=H[2]-1||0,pe=(H[7]||"0").substring(0,3);return _?new Date(Date.UTC(H[1],oe,H[3]||1,H[4]||0,H[5]||0,H[6]||0,pe)):new Date(H[1],oe,H[3]||1,H[4]||0,H[5]||0,H[6]||0,pe)}}return new Date(O)}(w),this.$x=w.x||{},this.init()},C.init=function(){var w=this.$d;this.$y=w.getFullYear(),this.$M=w.getMonth(),this.$D=w.getDate(),this.$W=w.getDay(),this.$H=w.getHours(),this.$m=w.getMinutes(),this.$s=w.getSeconds(),this.$ms=w.getMilliseconds()},C.$utils=function(){return R},C.isValid=function(){return this.$d.toString()!==p},C.isSame=function(w,V){var O=X(w);return this.startOf(V)<=O&&O<=this.endOf(V)},C.isAfter=function(w,V){return X(w)<this.startOf(V)},C.isBefore=function(w,V){return this.endOf(V)<X(w)},C.$g=function(w,V,O){return R.u(w)?this[V]:this.set(O,w)},C.unix=function(){return Math.floor(this.valueOf()/1e3)},C.valueOf=function(){return this.$d.getTime()},C.startOf=function(w,V){var O=this,_=!!R.u(V)||V,H=R.p(w),oe=function(ht,Ae){var Ue=R.w(O.$u?Date.UTC(O.$y,Ae,ht):new Date(O.$y,Ae,ht),O);return _?Ue:Ue.endOf(s)},pe=function(ht,Ae){return R.w(O.toDate()[ht].apply(O.toDate("s"),(_?[0,0,0,0]:[23,59,59,999]).slice(Ae)),O)},ge=this.$W,ve=this.$M,gt=this.$D,ot="set"+(this.$u?"UTC":"");switch(H){case d:return _?oe(1,0):oe(31,11);case u:return _?oe(1,ve):oe(0,ve+1);case c:var lr=this.$locale().weekStart||0,zt=(ge<lr?ge+7:ge)-lr;return oe(_?gt-zt:gt+(6-zt),ve);case s:case f:return pe(ot+"Hours",0);case i:return pe(ot+"Minutes",1);case n:return pe(ot+"Seconds",2);case o:return pe(ot+"Milliseconds",3);default:return this.clone()}},C.endOf=function(w){return this.startOf(w,!1)},C.$set=function(w,V){var O,_=R.p(w),H="set"+(this.$u?"UTC":""),oe=(O={},O[s]=H+"Date",O[f]=H+"Date",O[u]=H+"Month",O[d]=H+"FullYear",O[i]=H+"Hours",O[n]=H+"Minutes",O[o]=H+"Seconds",O[a]=H+"Milliseconds",O)[_],pe=_===s?this.$D+(V-this.$W):V;if(_===u||_===d){var ge=this.clone().set(f,1);ge.$d[oe](pe),ge.init(),this.$d=ge.set(f,Math.min(this.$D,ge.daysInMonth())).$d}else oe&&this.$d[oe](pe);return this.init(),this},C.set=function(w,V){return this.clone().$set(w,V)},C.get=function(w){return this[R.p(w)]()},C.add=function(w,V){var O,_=this;w=Number(w);var H=R.p(V),oe=function(ve){var gt=X(_);return R.w(gt.date(gt.date()+Math.round(ve*w)),_)};if(H===u)return this.set(u,this.$M+w);if(H===d)return this.set(d,this.$y+w);if(H===s)return oe(1);if(H===c)return oe(7);var pe=(O={},O[n]=t,O[i]=r,O[o]=e,O)[H]||1,ge=this.$d.getTime()+w*pe;return R.w(ge,this)},C.subtract=function(w,V){return this.add(-1*w,V)},C.format=function(w){var V=this;if(!this.isValid())return p;var O=w||"YYYY-MM-DDTHH:mm:ssZ",_=R.z(this),H=this.$locale(),oe=this.$H,pe=this.$m,ge=this.$M,ve=H.weekdays,gt=H.months,ot=function(Ae,Ue,Gr,dr){return Ae&&(Ae[Ue]||Ae(V,O))||Gr[Ue].substr(0,dr)},lr=function(Ae){return R.s(oe%12||12,Ae,"0")},zt=H.meridiem||function(Ae,Ue,Gr){var dr=Ae<12?"AM":"PM";return Gr?dr.toLowerCase():dr},ht={YY:String(this.$y).slice(-2),YYYY:this.$y,M:ge+1,MM:R.s(ge+1,2,"0"),MMM:ot(H.monthsShort,ge,gt,3),MMMM:ot(gt,ge),D:this.$D,DD:R.s(this.$D,2,"0"),d:String(this.$W),dd:ot(H.weekdaysMin,this.$W,ve,2),ddd:ot(H.weekdaysShort,this.$W,ve,3),dddd:ve[this.$W],H:String(oe),HH:R.s(oe,2,"0"),h:lr(1),hh:lr(2),a:zt(oe,pe,!0),A:zt(oe,pe,!1),m:String(pe),mm:R.s(pe,2,"0"),s:String(this.$s),ss:R.s(this.$s,2,"0"),SSS:R.s(this.$ms,3,"0"),Z:_};return O.replace(y,function(Ae,Ue){return Ue||ht[Ae]||_.replace(":","")})},C.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},C.diff=function(w,V,O){var _,H=R.p(V),oe=X(w),pe=(oe.utcOffset()-this.utcOffset())*t,ge=this-oe,ve=R.m(this,oe);return ve=(_={},_[d]=ve/12,_[u]=ve,_[l]=ve/3,_[c]=(ge-pe)/6048e5,_[s]=(ge-pe)/864e5,_[i]=ge/r,_[n]=ge/t,_[o]=ge/e,_)[H]||ge,O?ve:R.a(ve)},C.daysInMonth=function(){return this.endOf(u).$D},C.$locale=function(){return Q[this.$L]},C.locale=function(w,V){if(!w)return this.$L;var O=this.clone(),_=re(w,V,!0);return _&&(O.$L=_),O},C.clone=function(){return R.w(this.$d,this)},C.toDate=function(){return new Date(this.valueOf())},C.toJSON=function(){return this.isValid()?this.toISOString():null},C.toISOString=function(){return this.$d.toISOString()},C.toString=function(){return this.$d.toUTCString()},T}(),se=U.prototype;return X.prototype=se,[["$ms",a],["$s",o],["$m",n],["$H",i],["$W",s],["$M",u],["$y",d],["$D",f]].forEach(function(T){se[T[1]]=function(C){return this.$g(C,T[0],T[1])}}),X.extend=function(T,C){return T.$i||(T(C,U,X),T.$i=!0),X},X.locale=re,X.isDayjs=J,X.unix=function(T){return X(1e3*T)},X.en=Q[N],X.Ls=Q,X.p={},X})});var kd=ce((Au,Pu)=>{(function(e,t){typeof Au=="object"&&typeof Pu!="undefined"?Pu.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self).dayjs_plugin_utc=t()})(Au,function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(a,o,n){var i=o.prototype;n.utc=function(p){var m={date:p,utc:!0,args:arguments};return new o(m)},i.utc=function(p){var m=n(this.toDate(),{locale:this.$L,utc:!0});return p?m.add(this.utcOffset(),e):m},i.local=function(){return n(this.toDate(),{locale:this.$L,utc:!1})};var s=i.parse;i.parse=function(p){p.utc&&(this.$u=!0),this.$utils().u(p.$offset)||(this.$offset=p.$offset),s.call(this,p)};var c=i.init;i.init=function(){if(this.$u){var p=this.$d;this.$y=p.getUTCFullYear(),this.$M=p.getUTCMonth(),this.$D=p.getUTCDate(),this.$W=p.getUTCDay(),this.$H=p.getUTCHours(),this.$m=p.getUTCMinutes(),this.$s=p.getUTCSeconds(),this.$ms=p.getUTCMilliseconds()}else c.call(this)};var u=i.utcOffset;i.utcOffset=function(p,m){var y=this.$utils().u;if(y(p))return this.$u?0:y(this.$offset)?u.call(this):this.$offset;if(typeof p=="string"&&(p=function(N){N===void 0&&(N="");var Q=N.match(t);if(!Q)return null;var J=(""+Q[0]).match(r)||["-",0,0],re=J[0],X=60*+J[1]+ +J[2];return X===0?0:re==="+"?X:-X}(p))===null)return this;var x=Math.abs(p)<=16?60*p:p,F=this;if(m)return F.$offset=x,F.$u=p===0,F;if(p!==0){var b=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(F=this.local().add(x+b,e)).$offset=x,F.$x.$localOffset=b}else F=this.utc();return F};var l=i.format;i.format=function(p){var m=p||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,m)},i.valueOf=function(){var p=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||new Date().getTimezoneOffset());return this.$d.valueOf()-6e4*p},i.isUTC=function(){return!!this.$u},i.toISOString=function(){return this.toDate().toISOString()},i.toString=function(){return this.toDate().toUTCString()};var d=i.toDate;i.toDate=function(p){return p==="s"&&this.$offset?n(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var f=i.diff;i.diff=function(p,m,y){if(p&&this.$u===p.$u)return f.call(this,p,m,y);var x=this.local(),F=n(p).local();return f.call(x,F,m,y)}}})});var Dd=ce((Eu,wu)=>{(function(e,t){typeof Eu=="object"&&typeof wu!="undefined"?wu.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self).dayjs_plugin_timezone=t()})(Eu,function(){"use strict";var e={year:0,month:1,day:2,hour:3,minute:4,second:5},t={};return function(r,a,o){var n,i=function(l,d,f){f===void 0&&(f={});var p=new Date(l);return function(m,y){y===void 0&&(y={});var x=y.timeZoneName||"short",F=m+"|"+x,b=t[F];return b||(b=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:m,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:x}),t[F]=b),b}(d,f).formatToParts(p)},s=function(l,d){for(var f=i(l,d),p=[],m=0;m<f.length;m+=1){var y=f[m],x=y.type,F=y.value,b=e[x];b>=0&&(p[b]=parseInt(F,10))}var N=p[3],Q=N===24?0:N,J=p[0]+"-"+p[1]+"-"+p[2]+" "+Q+":"+p[4]+":"+p[5]+":000",re=+l;return(o.utc(J).valueOf()-(re-=re%1e3))/6e4},c=a.prototype;c.tz=function(l,d){l===void 0&&(l=n);var f=this.utcOffset(),p=this.toDate(),m=p.toLocaleString("en-US",{timeZone:l}),y=Math.round((p-new Date(m))/1e3/60),x=o(m).$set("millisecond",this.$ms).utcOffset(15*-Math.round(p.getTimezoneOffset()/15)-y,!0);if(d){var F=x.utcOffset();x=x.add(f-F,"minute")}return x.$x.$timezone=l,x},c.offsetName=function(l){var d=this.$x.$timezone||o.tz.guess(),f=i(this.valueOf(),d,{timeZoneName:l}).find(function(p){return p.type.toLowerCase()==="timezonename"});return f&&f.value};var u=c.startOf;c.startOf=function(l,d){if(!this.$x||!this.$x.$timezone)return u.call(this,l,d);var f=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"));return u.call(f,l,d).tz(this.$x.$timezone,!0)},o.tz=function(l,d,f){var p=f&&d,m=f||d||n,y=s(+o(),m);if(typeof l!="string")return o(l).tz(m);var x=function(Q,J,re){var X=Q-60*J*1e3,R=s(X,re);if(J===R)return[X,J];var U=s(X-=60*(R-J)*1e3,re);return R===U?[X,R]:[Q-60*Math.min(R,U)*1e3,Math.max(R,U)]}(o.utc(l,p).valueOf(),y,m),F=x[0],b=x[1],N=o(F).utcOffset(b);return N.$x.$timezone=m,N},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(l){n=l}}})});var Rp=ce(Uu=>{"use strict";Object.defineProperty(Uu,"__esModule",{value:!0});Uu.default=AF;function AF(e){var t,r=e.Symbol;return typeof r=="function"?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}});var vp=ce(($u,_u)=>{"use strict";Object.defineProperty($u,"__esModule",{value:!0});var PF=Rp(),EF=wF(PF);function wF(e){return e&&e.__esModule?e:{default:e}}var qa;typeof self!="undefined"?qa=self:typeof window!="undefined"?qa=window:typeof global!="undefined"?qa=global:typeof _u!="undefined"?qa=_u:qa=Function("return this")();var OF=(0,EF.default)(qa);$u.default=OF});var xi=ce(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});function qF(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var Ap=qF(vp()),Hu=function(){return Math.random().toString(36).substring(7).split("").join(".")},Ia={INIT:"@@redux/INIT"+Hu(),REPLACE:"@@redux/REPLACE"+Hu(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Hu()}};function IF(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Pp(e,t,r){var a;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if(typeof t=="function"&&typeof r=="undefined"&&(r=t,t=void 0),typeof r!="undefined"){if(typeof r!="function")throw new Error("Expected the enhancer to be a function.");return r(Pp)(e,t)}if(typeof e!="function")throw new Error("Expected the reducer to be a function.");var o=e,n=t,i=[],s=i,c=!1;function u(){s===i&&(s=i.slice())}function l(){if(c)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return n}function d(y){if(typeof y!="function")throw new Error("Expected the listener to be a function.");if(c)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var x=!0;return u(),s.push(y),function(){if(!!x){if(c)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");x=!1,u();var b=s.indexOf(y);s.splice(b,1),i=null}}}function f(y){if(!IF(y))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(typeof y.type=="undefined")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(c)throw new Error("Reducers may not dispatch actions.");try{c=!0,n=o(n,y)}finally{c=!1}for(var x=i=s,F=0;F<x.length;F++){var b=x[F];b()}return y}function p(y){if(typeof y!="function")throw new Error("Expected the nextReducer to be a function.");o=y,f({type:Ia.REPLACE})}function m(){var y,x=d;return y={subscribe:function(b){if(typeof b!="object"||b===null)throw new TypeError("Expected the observer to be an object.");function N(){b.next&&b.next(l())}N();var Q=x(N);return{unsubscribe:Q}}},y[Ap]=function(){return this},y}return f({type:Ia.INIT}),a={dispatch:f,subscribe:d,getState:l,replaceReducer:p},a[Ap]=m,a}function TF(e,t){var r=t&&t.type,a=r&&'action "'+String(r)+'"'||"an action";return"Given "+a+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function kF(e){Object.keys(e).forEach(function(t){var r=e[t],a=r(void 0,{type:Ia.INIT});if(typeof a=="undefined")throw new Error('Reducer "'+t+`" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.`);if(typeof r(void 0,{type:Ia.PROBE_UNKNOWN_ACTION()})=="undefined")throw new Error('Reducer "'+t+'" returned undefined when probed with a random type. '+("Don't try to handle "+Ia.INIT+' or other actions in "redux/*" ')+"namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.")})}function DF(e){for(var t=Object.keys(e),r={},a=0;a<t.length;a++){var o=t[a];typeof e[o]=="function"&&(r[o]=e[o])}var n=Object.keys(r),i,s;try{kF(r)}catch(c){s=c}return function(u,l){if(u===void 0&&(u={}),s)throw s;if(!1)var d;for(var f=!1,p={},m=0;m<n.length;m++){var y=n[m],x=r[y],F=u[y],b=x(F,l);if(typeof b=="undefined"){var N=TF(y,l);throw new Error(N)}p[y]=b,f=f||b!==F}return f=f||n.length!==Object.keys(u).length,f?p:u}}function Ep(e,t){return function(){return t(e.apply(this,arguments))}}function VF(e,t){if(typeof e=="function")return Ep(e,t);if(typeof e!="object"||e===null)throw new Error("bindActionCreators expected an object or a function, instead received "+(e===null?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var r={};for(var a in e){var o=e[a];typeof o=="function"&&(r[a]=Ep(o,t))}return r}function NF(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wp(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r}function MF(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wp(r,!0).forEach(function(a){NF(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wp(r).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Op(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(a){return a}:t.length===1?t[0]:t.reduce(function(a,o){return function(){return a(o.apply(void 0,arguments))}})}function QF(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(a){return function(){var o=a.apply(void 0,arguments),n=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},i={getState:o.getState,dispatch:function(){return n.apply(void 0,arguments)}},s=t.map(function(c){return c(i)});return n=Op.apply(void 0,s)(o.dispatch),MF({},o,{dispatch:n})}}}yr.__DO_NOT_USE__ActionTypes=Ia;yr.applyMiddleware=QF;yr.bindActionCreators=VF;yr.combineReducers=DF;yr.compose=Op;yr.createStore=Pp});var kp=ce((Rq,Tp)=>{var LF="[object Object]";function jF(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function BF(e,t){return function(r){return e(t(r))}}var UF=Function.prototype,qp=Object.prototype,Ip=UF.toString,$F=qp.hasOwnProperty,_F=Ip.call(Object),HF=qp.toString,zF=BF(Object.getPrototypeOf,Object);function WF(e){return!!e&&typeof e=="object"}function YF(e){if(!WF(e)||HF.call(e)!=LF||jF(e))return!1;var t=zF(e);if(t===null)return!0;var r=$F.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&Ip.call(r)==_F}Tp.exports=YF});var Dp=ce(Wu=>{"use strict";Object.defineProperty(Wu,"__esModule",{value:!0});Wu.default=eb;var KF=xi(),GF=kp(),JF=XF(GF);function XF(e){return e&&e.__esModule?e:{default:e}}function ZF(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}else return Array.from(e)}var zu=function(t){return typeof t=="function"};function eb(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};function a(){var n=[],i=[],s={getState:function(){return zu(r)?r(n):r},getActions:function(){return n},dispatch:function(u){if(!(0,JF.default)(u))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(typeof u.type=="undefined")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant? Action: '+JSON.stringify(u));n.push(u);for(var l=0;l<i.length;l++)i[l]();return u},clearActions:function(){n=[]},subscribe:function(u){return zu(u)&&i.push(u),function(){var l=i.indexOf(u);l<0||i.splice(l,1)}},replaceReducer:function(u){if(!zu(u))throw new Error("Expected the nextReducer to be a function.")}};return s}var o=KF.applyMiddleware.apply(void 0,ZF(e))(a);return o()}}});var mf=ce((tI,pl)=>{"use strict";var ki=typeof self!="undefined"?self:typeof window!="undefined"?window:void 0;if(!ki)throw new Error("Unable to find global scope. Are you sure this is running in the browser?");if(!ki.AbortController)throw new Error('Could not find "AbortController" in the global scope. You need to polyfill it first');pl.exports=ki.AbortController;pl.exports.default=ki.AbortController});var yf=ce((hI,hf)=>{"use strict";function eC(e){if(e=`${e}`,e=e.replace(/[ \t\n\f\r]/g,""),e.length%4==0&&(e=e.replace(/==?$/,"")),e.length%4==1||/[^+/0-9A-Za-z]/.test(e))return null;let t="",r=0,a=0;for(let o=0;o<e.length;o++)r<<=6,r|=rC(e[o]),a+=6,a===24&&(t+=String.fromCharCode((r&16711680)>>16),t+=String.fromCharCode((r&65280)>>8),t+=String.fromCharCode(r&255),r=a=0);return a===12?(r>>=4,t+=String.fromCharCode(r)):a===18&&(r>>=2,t+=String.fromCharCode((r&65280)>>8),t+=String.fromCharCode(r&255)),t}var tC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function rC(e){let t=tC.indexOf(e);return t<0?void 0:t}hf.exports=eC});var xf=ce((yI,Sf)=>{"use strict";function aC(e){let t;for(e=`${e}`,t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return null;let r="";for(t=0;t<e.length;t+=3){let a=[void 0,void 0,void 0,void 0];a[0]=e.charCodeAt(t)>>2,a[1]=(e.charCodeAt(t)&3)<<4,e.length>t+1&&(a[1]|=e.charCodeAt(t+1)>>4,a[2]=(e.charCodeAt(t+1)&15)<<2),e.length>t+2&&(a[2]|=e.charCodeAt(t+2)>>6,a[3]=e.charCodeAt(t+2)&63);for(let o=0;o<a.length;o++)typeof a[o]=="undefined"?r+="=":r+=nC(a[o])}return r}var oC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function nC(e){if(e>=0&&e<64)return oC[e]}Sf.exports=aC});var ml=ce((SI,Ff)=>{"use strict";var iC=yf(),sC=xf();Ff.exports={atob:iC,btoa:sC}});var xl=ce((yl,Sl)=>{(function(e,t){typeof yl=="object"&&typeof Sl!="undefined"?Sl.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self).dayjs_plugin_customParseFormat=t()})(yl,function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-:/.()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d\d/,a=/\d\d?/,o=/\d*[^\s\d-_:/()]+/,n={},i=function(f){return function(p){this[f]=+p}},s=[/[+-]\d\d:?(\d\d)?|Z/,function(f){(this.zone||(this.zone={})).offset=function(p){if(!p||p==="Z")return 0;var m=p.match(/([+-]|\d\d)/g),y=60*m[1]+(+m[2]||0);return y===0?0:m[0]==="+"?-y:y}(f)}],c=function(f){var p=n[f];return p&&(p.indexOf?p:p.s.concat(p.f))},u=function(f,p){var m,y=n.meridiem;if(y){for(var x=1;x<=24;x+=1)if(f.indexOf(y(x,0,p))>-1){m=x>12;break}}else m=f===(p?"pm":"PM");return m},l={A:[o,function(f){this.afternoon=u(f,!1)}],a:[o,function(f){this.afternoon=u(f,!0)}],S:[/\d/,function(f){this.milliseconds=100*+f}],SS:[r,function(f){this.milliseconds=10*+f}],SSS:[/\d{3}/,function(f){this.milliseconds=+f}],s:[a,i("seconds")],ss:[a,i("seconds")],m:[a,i("minutes")],mm:[a,i("minutes")],H:[a,i("hours")],h:[a,i("hours")],HH:[a,i("hours")],hh:[a,i("hours")],D:[a,i("day")],DD:[r,i("day")],Do:[o,function(f){var p=n.ordinal,m=f.match(/\d+/);if(this.day=m[0],p)for(var y=1;y<=31;y+=1)p(y).replace(/\[|\]/g,"")===f&&(this.day=y)}],M:[a,i("month")],MM:[r,i("month")],MMM:[o,function(f){var p=c("months"),m=(c("monthsShort")||p.map(function(y){return y.substr(0,3)})).indexOf(f)+1;if(m<1)throw new Error;this.month=m%12||m}],MMMM:[o,function(f){var p=c("months").indexOf(f)+1;if(p<1)throw new Error;this.month=p%12||p}],Y:[/[+-]?\d+/,i("year")],YY:[r,function(f){f=+f,this.year=f+(f>68?1900:2e3)}],YYYY:[/\d{4}/,i("year")],Z:s,ZZ:s};function d(f){var p,m;p=f,m=n&&n.formats;for(var y=(f=p.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(re,X,R){var U=R&&R.toUpperCase();return X||m[R]||e[R]||m[U].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(se,T,C){return T||C.slice(1)})})).match(t),x=y.length,F=0;F<x;F+=1){var b=y[F],N=l[b],Q=N&&N[0],J=N&&N[1];y[F]=J?{regex:Q,parser:J}:b.replace(/^\[|\]$/g,"")}return function(re){for(var X={},R=0,U=0;R<x;R+=1){var se=y[R];if(typeof se=="string")U+=se.length;else{var T=se.regex,C=se.parser,w=re.substr(U),V=T.exec(w)[0];C.call(X,V),re=re.replace(V,"")}}return function(O){var _=O.afternoon;if(_!==void 0){var H=O.hours;_?H<12&&(O.hours+=12):H===12&&(O.hours=0),delete O.afternoon}}(X),X}}return function(f,p,m){m.p.customParseFormat=!0;var y=p.prototype,x=y.parse;y.parse=function(F){var b=F.date,N=F.utc,Q=F.args;this.$u=N;var J=Q[1];if(typeof J=="string"){var re=Q[2]===!0,X=Q[3]===!0,R=re||X,U=Q[2];X&&(U=Q[2]),n=this.$locale(),!re&&U&&(n=m.Ls[U]),this.$d=function(w,V,O){try{var _=d(V)(w),H=_.year,oe=_.month,pe=_.day,ge=_.hours,ve=_.minutes,gt=_.seconds,ot=_.milliseconds,lr=_.zone,zt=new Date,ht=pe||(H||oe?1:zt.getDate()),Ae=H||zt.getFullYear(),Ue=0;H&&!oe||(Ue=oe>0?oe-1:zt.getMonth());var Gr=ge||0,dr=ve||0,fu=gt||0,mu=ot||0;return lr?new Date(Date.UTC(Ae,Ue,ht,Gr,dr,fu,mu+60*lr.offset*1e3)):O?new Date(Date.UTC(Ae,Ue,ht,Gr,dr,fu,mu)):new Date(Ae,Ue,ht,Gr,dr,fu,mu)}catch{return new Date("")}}(b,J,N),this.init(),U&&U!==!0&&(this.$L=this.locale(U).$L),R&&b!==this.format(J)&&(this.$d=new Date("")),n={}}else if(J instanceof Array)for(var se=J.length,T=1;T<=se;T+=1){Q[1]=J[T-1];var C=m.apply(this,Q);if(C.isValid()){this.$d=C.$d,this.$L=C.$L,this.init();break}T===se&&(this.$d=new Date(""))}else x.call(this,F)}}})});var kf=ce((Cl,Rl)=>{(function(e,t){typeof Cl=="object"&&typeof Rl!="undefined"?Rl.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self).dayjs_plugin_quarterOfYear=t()})(Cl,function(){"use strict";var e="month",t="quarter";return function(r,a){var o=a.prototype;o.quarter=function(s){return this.$utils().u(s)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(s-1))};var n=o.add;o.add=function(s,c){return s=Number(s),this.$utils().p(c)===t?this.add(3*s,e):n.bind(this)(s,c)};var i=o.startOf;o.startOf=function(s,c){var u=this.$utils(),l=!!u.u(c)||c;if(u.p(s)===t){var d=this.quarter()-1;return l?this.month(3*d).startOf(e).startOf("day"):this.month(3*d+2).endOf(e).endOf("day")}return i.bind(this)(s,c)}}})});var nm=ce((Yk,om)=>{"use strict";function LC(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}om.exports=jC;function jC(e,t,r){var a=r&&r.stringify||LC,o=1;if(typeof e=="object"&&e!==null){var n=t.length+o;if(n===1)return e;var i=new Array(n);i[0]=a(e);for(var s=1;s<n;s++)i[s]=a(t[s]);return i.join(" ")}if(typeof e!="string")return e;var c=t.length;if(c===0)return e;for(var u="",l=1-o,d=-1,f=e&&e.length||0,p=0;p<f;){if(e.charCodeAt(p)===37&&p+1<f){switch(d=d>-1?d:0,e.charCodeAt(p+1)){case 100:case 102:if(l>=c||(d<p&&(u+=e.slice(d,p)),t[l]==null))break;u+=Number(t[l]),d=p=p+2;break;case 105:if(l>=c||(d<p&&(u+=e.slice(d,p)),t[l]==null))break;u+=Math.floor(Number(t[l])),d=p=p+2;break;case 79:case 111:case 106:if(l>=c||(d<p&&(u+=e.slice(d,p)),t[l]===void 0))break;var m=typeof t[l];if(m==="string"){u+="'"+t[l]+"'",d=p+2,p++;break}if(m==="function"){u+=t[l].name||"<anonymous>",d=p+2,p++;break}u+=a(t[l]),d=p+2,p++;break;case 115:if(l>=c)break;d<p&&(u+=e.slice(d,p)),u+=String(t[l]),d=p+2,p++;break;case 37:d<p&&(u+=e.slice(d,p)),u+="%",d=p+2,p++,l--;break}++l}++p}return d===-1?e:(d<f&&(u+=e.slice(d)),u)}});var Zi=ce((Kk,um)=>{"use strict";var im=nm();um.exports=kt;var En=GC().console||{},BC={mapHttpRequest:Xi,mapHttpResponse:Xi,wrapRequestSerializer:wl,wrapResponseSerializer:wl,wrapErrorSerializer:wl,req:Xi,res:Xi,err:zC};function UC(e,t){return Array.isArray(e)?e.filter(function(a){return a!=="!stdSerializers.err"}):e===!0?Object.keys(t):!1}function kt(e){e=e||{},e.browser=e.browser||{};let t=e.browser.transmit;if(t&&typeof t.send!="function")throw Error("pino: transmit option must have a send function");let r=e.browser.write||En;e.browser.write&&(e.browser.asObject=!0);let a=e.serializers||{},o=UC(e.browser.serialize,a),n=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(n=!1);let i=["error","fatal","warn","info","debug","trace"];typeof r=="function"&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),e.enabled===!1&&(e.level="silent");let s=e.level||"info",c=Object.create(r);c.log||(c.log=wn),Object.defineProperty(c,"levelVal",{get:l}),Object.defineProperty(c,"level",{get:d,set:f});let u={transmit:t,serialize:o,asObject:e.browser.asObject,levels:i,timestamp:WC(e)};c.levels=kt.levels,c.level=s,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=wn,c.serializers=a,c._serialize=o,c._stdErrSerialize=n,c.child=p,t&&(c._logEvent=El());function l(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function f(m){if(m!=="silent"&&!this.levels.values[m])throw Error("unknown level "+m);this._level=m,Wa(u,c,"error","log"),Wa(u,c,"fatal","error"),Wa(u,c,"warn","error"),Wa(u,c,"info","log"),Wa(u,c,"debug","log"),Wa(u,c,"trace","log")}function p(m){if(!m)throw new Error("missing bindings for child Pino");let y=m.serializers;if(o&&y){var x=Object.assign({},a,y),F=e.browser.serialize===!0?Object.keys(x):o;delete m.serializers,Ji([m],F,x,this._stdErrSerialize)}function b(N){this._childLevel=(N._childLevel|0)+1,this.error=Ya(N,m,"error"),this.fatal=Ya(N,m,"fatal"),this.warn=Ya(N,m,"warn"),this.info=Ya(N,m,"info"),this.debug=Ya(N,m,"debug"),this.trace=Ya(N,m,"trace"),x&&(this.serializers=x,this._serialize=F),t&&(this._logEvent=El([].concat(N._logEvent.bindings,m)))}return b.prototype=this,new b(this)}return c}kt.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};kt.stdSerializers=BC;kt.stdTimeFunctions=Object.assign({},{nullTime:sm,epochTime:cm,unixTime:YC,isoTime:KC});function Wa(e,t,r,a){let o=Object.getPrototypeOf(t);t[r]=t.levelVal>t.levels.values[r]?wn:o[r]?o[r]:En[r]||En[a]||wn,$C(e,t,r)}function $C(e,t,r){!e.transmit&&t[r]===wn||(t[r]=function(a){return function(){let n=e.timestamp(),i=new Array(arguments.length),s=Object.getPrototypeOf&&Object.getPrototypeOf(this)===En?En:this;for(var c=0;c<i.length;c++)i[c]=arguments[c];if(e.serialize&&!e.asObject&&Ji(i,this._serialize,this.serializers,this._stdErrSerialize),e.asObject?a.call(s,_C(this,r,i,n)):a.apply(s,i),e.transmit){let u=e.transmit.level||t.level,l=kt.levels.values[u],d=kt.levels.values[r];if(d<l)return;HC(this,{ts:n,methodLevel:r,methodValue:d,transmitLevel:u,transmitValue:kt.levels.values[e.transmit.level||t.level],send:e.transmit.send,val:t.levelVal},i)}}}(t[r]))}function _C(e,t,r,a){e._serialize&&Ji(r,e._serialize,e.serializers,e._stdErrSerialize);let o=r.slice(),n=o[0],i={};a&&(i.time=a),i.level=kt.levels.values[t];let s=(e._childLevel|0)+1;if(s<1&&(s=1),n!==null&&typeof n=="object"){for(;s--&&typeof o[0]=="object";)Object.assign(i,o.shift());n=o.length?im(o.shift(),o):void 0}else typeof n=="string"&&(n=im(o.shift(),o));return n!==void 0&&(i.msg=n),i}function Ji(e,t,r,a){for(let o in e)if(a&&e[o]instanceof Error)e[o]=kt.stdSerializers.err(e[o]);else if(typeof e[o]=="object"&&!Array.isArray(e[o]))for(let n in e[o])t&&t.indexOf(n)>-1&&n in r&&(e[o][n]=r[n](e[o][n]))}function Ya(e,t,r){return function(){let a=new Array(1+arguments.length);a[0]=t;for(var o=1;o<a.length;o++)a[o]=arguments[o-1];return e[r].apply(this,a)}}function HC(e,t,r){let a=t.send,o=t.ts,n=t.methodLevel,i=t.methodValue,s=t.val,c=e._logEvent.bindings;Ji(r,e._serialize||Object.keys(e.serializers),e.serializers,e._stdErrSerialize===void 0?!0:e._stdErrSerialize),e._logEvent.ts=o,e._logEvent.messages=r.filter(function(u){return c.indexOf(u)===-1}),e._logEvent.level.label=n,e._logEvent.level.value=i,a(n,e._logEvent,s),e._logEvent=El(c)}function El(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function zC(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let r in e)t[r]===void 0&&(t[r]=e[r]);return t}function WC(e){return typeof e.timestamp=="function"?e.timestamp:e.timestamp===!1?sm:cm}function Xi(){return{}}function wl(e){return e}function wn(){}function sm(){return!1}function cm(){return Date.now()}function YC(){return Math.round(Date.now()/1e3)}function KC(){return new Date(Date.now()).toISOString()}function GC(){function e(t){return typeof t!="undefined"&&t}try{return typeof globalThis!="undefined"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}});var ig=ce((js,ng)=>{(function(e,t){typeof js=="object"&&typeof ng!="undefined"?t(js):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis!="undefined"?globalThis:e||self,t(e["fast-equals"]={}))})(js,function(e){"use strict";var t=typeof WeakSet=="function",r=Object.keys;function a(R,U){return R===U||R!==R&&U!==U}function o(R){return R.constructor===Object||R.constructor==null}function n(R){return!!R&&typeof R.then=="function"}function i(R){return!!(R&&R.$$typeof)}function s(){var R=[];return{add:function(U){R.push(U)},has:function(U){return R.indexOf(U)!==-1}}}var c=function(R){return R?function(){return new WeakSet}:s}(t);function u(R){return function(se){var T=R||se;return function(w,V,O){O===void 0&&(O=c());var _=!!w&&typeof w=="object",H=!!V&&typeof V=="object";if(_||H){var oe=_&&O.has(w),pe=H&&O.has(V);if(oe||pe)return oe&&pe;_&&O.add(w),H&&O.add(V)}return T(w,V,O)}}}function l(R,U,se,T){var C=R.length;if(U.length!==C)return!1;for(;C-- >0;)if(!se(R[C],U[C],T))return!1;return!0}function d(R,U,se,T){var C=R.size===U.size;return C&&R.size&&R.forEach(function(w,V){C&&(C=!1,U.forEach(function(O,_){!C&&se(V,_,T)&&(C=se(w,O,T))}))}),C}var f="_owner",p=Function.prototype.bind.call(Function.prototype.call,Object.prototype.hasOwnProperty);function m(R,U,se,T){var C=r(R),w=C.length;if(r(U).length!==w)return!1;if(w)for(var V=void 0;w-- >0;){if(V=C[w],V===f){var O=i(R),_=i(U);if((O||_)&&O!==_)return!1}if(!p(U,V)||!se(R[V],U[V],T))return!1}return!0}function y(R,U){return R.source===U.source&&R.global===U.global&&R.ignoreCase===U.ignoreCase&&R.multiline===U.multiline&&R.unicode===U.unicode&&R.sticky===U.sticky&&R.lastIndex===U.lastIndex}function x(R,U,se,T){var C=R.size===U.size;return C&&R.size&&R.forEach(function(w){C&&(C=!1,U.forEach(function(V){C||(C=se(w,V,T))}))}),C}var F=typeof Map=="function",b=typeof Set=="function";function N(R){var U=typeof R=="function"?R(se):se;function se(T,C,w){if(T===C)return!0;if(T&&C&&typeof T=="object"&&typeof C=="object"){if(o(T)&&o(C))return m(T,C,U,w);var V=Array.isArray(T),O=Array.isArray(C);return V||O?V===O&&l(T,C,U,w):(V=T instanceof Date,O=C instanceof Date,V||O?V===O&&a(T.getTime(),C.getTime()):(V=T instanceof RegExp,O=C instanceof RegExp,V||O?V===O&&y(T,C):n(T)||n(C)?T===C:F&&(V=T instanceof Map,O=C instanceof Map,V||O)?V===O&&d(T,C,U,w):b&&(V=T instanceof Set,O=C instanceof Set,V||O)?V===O&&x(T,C,U,w):m(T,C,U,w)))}return T!==T&&C!==C}return se}var Q=N(),J=N(function(){return a}),re=N(u()),X=N(u(a));e.circularDeepEqual=re,e.circularShallowEqual=X,e.createCustomEqual=N,e.deepEqual=Q,e.sameValueZeroEqual=a,e.shallowEqual=J,Object.defineProperty(e,"__esModule",{value:!0})})});_n(exports,{DefaultFieldsToInclude:()=>Bu,EcommerceDefaultFieldsToInclude:()=>bp,HighlightUtils:()=>kl,MinimumFieldsToInclude:()=>li,ResultTemplatesHelpers:()=>gd,SortBy:()=>ut,SortOrder:()=>Yt,TestUtils:()=>ql,VERSION:()=>ha,analyticsUrl:()=>zn,baseFacetResponseSelector:()=>it,buildBreadcrumbManager:()=>yy,buildCategoryFacet:()=>Rc,buildCategoryFieldSuggestions:()=>Zy,buildContext:()=>wh,buildController:()=>B,buildCriterionExpression:()=>Rt,buildDateFacet:()=>Yh,buildDateFilter:()=>ty,buildDateRange:()=>Ir,buildDateSortCriterion:()=>oi,buildDictionaryFieldContext:()=>Oh,buildDidYouMean:()=>qh,buildExecuteTrigger:()=>jy,buildFacet:()=>vc,buildFacetConditionsManager:()=>Jy,buildFacetManager:()=>hy,buildFieldSortCriterion:()=>ni,buildFieldSuggestions:()=>Xy,buildFoldedResultList:()=>ky,buildHistoryManager:()=>ry,buildInteractiveRecentResult:()=>Gy,buildInteractiveResult:()=>cy,buildInteractiveResultCore:()=>en,buildNoSortCriterion:()=>si,buildNotifyTrigger:()=>By,buildNumericFacet:()=>Jh,buildNumericFilter:()=>Zh,buildNumericRange:()=>Go,buildPager:()=>ny,buildQueryError:()=>iy,buildQueryExpression:()=>QE,buildQueryRankingExpressionSortCriterion:()=>ii,buildQuerySummary:()=>sy,buildQueryTrigger:()=>Ly,buildQuickview:()=>Ty,buildQuickviewCore:()=>ru,buildRecentQueriesList:()=>zy,buildRecentResultsList:()=>Ky,buildRedirectionTrigger:()=>Qy,buildRelevanceInspector:()=>Eh,buildRelevanceSortCriterion:()=>Fa,buildResultList:()=>Uc,buildResultTemplatesManager:()=>eS,buildResultsPerPage:()=>ly,buildSearchBox:()=>zc,buildSearchEngine:()=>Ch,buildSearchParameterManager:()=>Zc,buildSearchParameterSerializer:()=>Bn,buildSearchStatus:()=>Zo,buildSmartSnippet:()=>Uy,buildSmartSnippetQuestionsList:()=>$y,buildSort:()=>py,buildStandaloneSearchBox:()=>xy,buildStaticFilter:()=>fy,buildStaticFilterValue:()=>dd,buildTab:()=>gy,buildUrlManager:()=>qy,createAction:()=>h,createAsyncThunk:()=>Z,createReducer:()=>E,currentPageSelector:()=>ur,currentPagesSelector:()=>Lc,deserializeRelativeDate:()=>Bf,facetRequestSelector:()=>Jn,facetResponseSelectedValuesSelector:()=>Xn,facetResponseSelector:()=>dn,getSampleSearchEngineConfiguration:()=>rd,loadAdvancedSearchQueryActions:()=>XP,loadBreadcrumbActions:()=>AE,loadCategoryFacetSetActions:()=>ZP,loadClickAnalyticsActions:()=>TE,loadConfigurationActions:()=>tE,loadContextActions:()=>aE,loadDateFacetSetActions:()=>iE,loadDebugActions:()=>nE,loadDictionaryFieldContextActions:()=>oE,loadDidYouMeanActions:()=>cE,loadExcerptLengthActions:()=>wE,loadFacetOptionsActions:()=>sE,loadFacetSetActions:()=>eE,loadFieldActions:()=>uE,loadFoldingActions:()=>pE,loadGenericAnalyticsActions:()=>kE,loadHistoryActions:()=>lE,loadNumericFacetSetActions:()=>dE,loadPaginationActions:()=>fE,loadPipelineActions:()=>mE,loadQueryActions:()=>gE,loadQuerySetActions:()=>hE,loadQuerySuggestActions:()=>yE,loadQuestionAnsweringActions:()=>vE,loadRecentQueriesActions:()=>PE,loadRecentResultsActions:()=>EE,loadRedirectionActions:()=>SE,loadSearchActions:()=>xE,loadSearchAnalyticsActions:()=>IE,loadSearchConfigurationActions:()=>rE,loadSearchHubActions:()=>FE,loadSortCriteriaActions:()=>bE,loadStandaloneSearchBoxSetActions:()=>CE,loadStaticFilterSetActions:()=>RE,maxPageSelector:()=>Ln,parseCriterionExpression:()=>iS,platformUrl:()=>sn,validateRelativeDate:()=>Cr});var ql={};_n(ql,{buildMockCaseAssistEngine:()=>bm,buildMockProductListingEngine:()=>Fm,buildMockProductRecommendationsAppEngine:()=>xm,buildMockRaw:()=>ls,buildMockRecommendationAppEngine:()=>Sm,buildMockResult:()=>Rm,buildMockSearchAppEngine:()=>ym,createMockState:()=>Si});var Od=xe(Sd()),qd=xe(Pd());var q=new Error("Failed to load reducers."),nn=class extends Error{constructor(){super();this.name="ExpiredToken",this.message="The token being used to perform the request is expired."}},da=class extends Error{constructor(t,r){super();this.name="Disconnected",this.message=`Client could not connect to the following URL: ${t}`,this.statusCode=r!=null?r:0}};function Ed(e){let t=[];for(let r in e){let a=encodeURIComponent(r),o=encodeURIComponent(e[r]);t.push(`${a}=${o}`)}return t.join("&")}function wd(e){return typeof e!="object"||!e?!1:Object.values(e).every(YS)}function YS(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"}function Id(e){return e===429}var nt=class{static async call(t){let r=KS(t),{preprocessRequest:a,logger:o}=t,n={...r,...a?await a(r,"searchApiFetch"):{}};o.info(n,"Platform request");let{url:i,...s}=n,c=async()=>{let u=await(0,Od.default)(i,s);if(Id(u.status))throw u;return u};try{let u=await(0,qd.backOff)(c,{retry:l=>{let d=l&&Id(l.status);return d&&o.info("Platform retrying request"),d}});if(u.status===419)throw o.info("Platform renewing token"),new nn;if(u.status===404)throw new da(i,u.status);return o.info({response:u,requestInfo:n},"Platform response"),u}catch(u){return u.message==="Failed to fetch"?new da(i):u}}};function Td(e,t){let r=!t||!t.environment||t.environment==="prod"?"":t.environment,a=!t||!t.region||t.region==="us"?"":`-${t.region}`;return`https://${e}${r}${a}.cloud.coveo.com`}function sn(e){return(e==null?void 0:e.multiRegionSubDomain)?`https://${e.multiRegionSubDomain}.org.coveo.com`:Td("platform",e)}function zn(e){return Td("analytics",e)}function KS(e){let{url:t,method:r,requestParams:a,contentType:o,accessToken:n,signal:i}=e,s=e.method==="POST"||e.method==="PUT",c=GS(a,o);return{url:t,method:r,headers:{"Content-Type":o,Authorization:`Bearer ${n}`,...e.headers},...s&&{body:c},signal:i}}function GS(e,t){return t==="application/x-www-form-urlencoded"?wd(e)?Ed(e):"":JSON.stringify(e)}var ti=xe(pa()),gp=xe(kd()),hp=xe(Dd());function Wn(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(r[a[o]]=e[a[o]]);return r}function ee(e,t,r,a){function o(n){return n instanceof r?n:new r(function(i){i(n)})}return new(r||(r=Promise))(function(n,i){function s(l){try{u(a.next(l))}catch(d){i(d)}}function c(l){try{u(a.throw(l))}catch(d){i(d)}}function u(l){l.done?n(l.value):o(l.value).then(s,c)}u((a=a.apply(e,t||[])).next())})}var Se;(function(e){e.search="search",e.click="click",e.custom="custom",e.view="view",e.collect="collect"})(Se||(Se={}));function JS(){return typeof window!="undefined"}function Ou(){return typeof navigator!="undefined"}function Vd(){return typeof document!="undefined"}function qu(){try{return typeof localStorage!="undefined"}catch{return!1}}function XS(){try{return typeof sessionStorage!="undefined"}catch{return!1}}function Nd(){return Ou()&&navigator.cookieEnabled}function ZS(){return typeof crypto!="undefined"}function ex(){return ZS()&&typeof crypto.getRandomValues!="undefined"}var tx=[Se.click,Se.custom,Se.search,Se.view],rx=(e,t)=>tx.indexOf(e)!==-1?Object.assign({language:Vd()?document.documentElement.lang:"unknown",userAgent:Ou()?navigator.userAgent:"unknown"},t):t,pr=class{static set(t,r,a){var o,n,i,s,c;a?(i=new Date,i.setTime(i.getTime()+a),s="; expires="+i.toGMTString()):s="",c=location.hostname,c.indexOf(".")===-1?document.cookie=t+"="+r+s+"; path=/":(n=c.split("."),n.shift(),o="."+n.join("."),Md({name:t,value:r,expires:s,domain:o}),(pr.get(t)==null||pr.get(t)!=r)&&(o="."+c,Md({name:t,value:r,expires:s,domain:o})))}static get(t){for(var r=t+"=",a=document.cookie.split(";"),o=0;o<a.length;o++){var n=a[o];if(n=n.replace(/^\s+/,""),n.indexOf(r)==0)return n.substring(r.length,n.length)}return null}static erase(t){pr.set(t,"",-1)}};function Md(e){let{name:t,value:r,expires:a,domain:o}=e;document.cookie=`${t}=${r}${a}; path=/; domain=${o}; SameSite=Lax`}function ax(){return qu()?localStorage:Nd()?new fr:XS()?sessionStorage:new fa}var fr=class{getItem(t){return pr.get(`${fr.prefix}${t}`)}removeItem(t){pr.erase(`${fr.prefix}${t}`)}setItem(t,r){pr.set(`${fr.prefix}${t}`,r)}};fr.prefix="coveo_";var Qd=class{constructor(){this.cookieStorage=new fr}getItem(t){return localStorage.getItem(t)||this.cookieStorage.getItem(t)}removeItem(t){this.cookieStorage.removeItem(t),localStorage.removeItem(t)}setItem(t,r){localStorage.setItem(t,r),this.cookieStorage.setItem(t,r)}},fa=class{getItem(t){return null}removeItem(t){}setItem(t,r){}},cn="__coveo.analytics.history",Ld=20,jd=1e3*60,Bd=75,un=class{constructor(t){this.store=t||ax()}addElement(t){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=this.getHistoryWithInternalTime();r!=null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t])}addElementAsync(t){return ee(this,void 0,void 0,function*(){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=yield this.getHistoryWithInternalTimeAsync();r!=null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t])})}getHistory(){let t=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(t))}getHistoryAsync(){return ee(this,void 0,void 0,function*(){let t=yield this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(t))})}getHistoryWithInternalTime(){try{let t=this.store.getItem(cn);return t&&typeof t=="string"?JSON.parse(t):[]}catch{return[]}}getHistoryWithInternalTimeAsync(){return ee(this,void 0,void 0,function*(){try{let t=yield this.store.getItem(cn);return t?JSON.parse(t):[]}catch{return[]}})}setHistory(t){try{this.store.setItem(cn,JSON.stringify(t.slice(0,Ld)))}catch{}}clear(){try{this.store.removeItem(cn)}catch{}}getMostRecentElement(){let t=this.getHistoryWithInternalTime();return t!=null?t.sort((a,o)=>(o.internalTime||0)-(a.internalTime||0))[0]:null}cropQueryElement(t){return t.name&&t.value&&t.name.toLowerCase()==="query"&&(t.value=t.value.slice(0,Bd)),t}isValidEntry(t){let r=this.getMostRecentElement();return r&&r.value==t.value?(t.internalTime||0)-(r.internalTime||0)>jd:!0}stripInternalTime(t){return t.map(r=>{let{name:a,time:o,value:n}=r;return{name:a,time:o,value:n}})}stripEmptyQuery(t){let{name:r,time:a,value:o}=t;return r&&typeof o=="string"&&r.toLowerCase()==="query"&&o.trim()===""?{name:r,time:a}:t}stripEmptyQueries(t){return t.map(r=>this.stripEmptyQuery(r))}},Ud=Object.freeze({__proto__:null,STORE_KEY:cn,MAX_NUMBER_OF_HISTORY_ELEMENTS:Ld,MIN_THRESHOLD_FOR_DUPLICATE_VALUE:jd,MAX_VALUE_SIZE:Bd,HistoryStore:un,default:un}),ox=(e,t)=>ee(void 0,void 0,void 0,function*(){return e===Se.view?(yield nx(t.contentIdValue),Object.assign({location:window.location.toString(),referrer:document.referrer,title:document.title},t)):t}),nx=e=>ee(void 0,void 0,void 0,function*(){let t=new un,r={name:"PageView",value:e,time:JSON.stringify(new Date)};yield t.addElementAsync(r)}),ma=e=>e?(Number(e)^ix(new Uint8Array(1))[0]%16>>Number(e)/4).toString(16):(`${1e7}`+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,ma),ix=e=>{if(ex())return crypto.getRandomValues(e);for(var t=0,r=0;t<e.length;t++)(t&3)==0&&(r=Math.random()*4294967296),e[t]=r>>>((t&3)<<3)&255;return e},He=Object.keys,Iu={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},sx=He(Iu).map(e=>Iu[e]),cx=[...sx].join("|"),ux=new RegExp(`^(${cx}$)`),lx={svcAction:"svc_action",svcActionData:"svc_action_data"},dx=e=>He(e).filter(t=>e[t]!==void 0).reduce((t,r)=>{let a=Iu[r]||r;return Object.assign(Object.assign({},t),{[a]:e[r]})},{}),px=e=>ux.test(e),fx=[px],$d={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps",group:"group"},_d={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr",group:"group"},De={action:"pa",list:"pal",listSource:"pls"},Yn={id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"},mx=["loyaltyCardId","loyaltyTier","thirdPartyPersona","companyName","favoriteStore","storeName","userIndustry","userRole","userDepartment","businessUnit"],Tu={id:"quoteId",affiliation:"quoteAffiliation"},ku={id:"reviewId",rating:"reviewRating",comment:"reviewComment"},gx={add:De,bookmark_add:De,bookmark_remove:De,click:De,checkout:De,checkout_option:De,detail:De,impression:De,remove:De,refund:Object.assign(Object.assign({},De),Yn),purchase:Object.assign(Object.assign({},De),Yn),quickview:De,quote:Object.assign(Object.assign({},De),Tu),review:Object.assign(Object.assign({},De),ku)},hx=He($d).map(e=>$d[e]),yx=He(_d).map(e=>_d[e]),Sx=He(De).map(e=>De[e]),xx=He(Yn).map(e=>Yn[e]),Fx=He(ku).map(e=>ku[e]),bx=He(Tu).map(e=>Tu[e]),Cx=[...hx,"custom"].join("|"),Rx=[...yx,"custom"].join("|"),Hd="(pr[0-9]+)",zd="(il[0-9]+pi[0-9]+)",vx=new RegExp(`^${Hd}(${Cx})$`),Ax=new RegExp(`^(${zd}(${Rx}))|(il[0-9]+nm)$`),Px=new RegExp(`^(${Sx.join("|")})$`),Ex=new RegExp(`^(${xx.join("|")})$`),wx=new RegExp(`^${Hd}custom$`),Ox=new RegExp(`^${zd}custom$`),qx=new RegExp(`^(${[...mx,...Fx,...bx].join("|")})$`),Ix=e=>vx.test(e),Tx=e=>Ax.test(e),kx=e=>Px.test(e),Dx=e=>Ex.test(e),Vx=e=>qx.test(e),Nx=[Tx,Ix,kx,Dx,Vx],Mx=[wx,Ox],Qx={anonymizeIp:"aip"},Lx={eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"},jx={hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"},Bx=["contentId","contentIdKey","contentType","searchHub","tab","searchUid","permanentId","contentLocale"],Ux=Object.assign(Object.assign(Object.assign(Object.assign({},Qx),Lx),jx),Bx.reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:t}),{})),Du=Object.assign(Object.assign({},Ux),lx),$x=e=>{let t=!!e.action&&gx[e.action]||{};return He(e).reduce((r,a)=>{let o=t[a]||Du[a]||a;return Object.assign(Object.assign({},r),{[o]:e[a]})},{})},_x=He(Du).map(e=>Du[e]),Hx=e=>_x.indexOf(e)!==-1,zx=e=>e==="custom",Wx=e=>[...Nx,...fx,Hx,zx].some(t=>t(e)),Yx=e=>He(e).reduce((t,r)=>{let a=Kx(r);return a?Object.assign(Object.assign({},t),Gx(a,e[r])):Object.assign(Object.assign({},t),{[r]:e[r]})},{}),Kx=e=>{let t;return[...Mx].every(r=>{var a;return t=(a=r.exec(e))===null||a===void 0?void 0:a[1],!Boolean(t)}),t},Gx=(e,t)=>He(t).reduce((r,a)=>Object.assign(Object.assign({},r),{[`${e}${a}`]:t[a]}),{}),Wd=class{constructor(t){this.opts=t}sendEvent(t,r){return ee(this,void 0,void 0,function*(){if(!navigator.sendBeacon)throw new Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');let{baseUrl:a,preprocessRequest:o}=this.opts,n=this.encodeForEventType(t,r),i=yield this.getQueryParamsForEventType(t),s={url:`${a}/analytics/${t}?${i}`,body:new Blob([n],{type:"application/x-www-form-urlencoded"})},{url:c,body:u}=Object.assign(Object.assign({},s),o?yield o(s,"analyticsBeacon"):{});console.log(`Sending beacon for "${t}" with: `,JSON.stringify(r)),navigator.sendBeacon(c,u)})}encodeForEventType(t,r){return this.isEventTypeLegacy(t)?this.encodeForLegacyType(t,r):this.encodeForFormUrlEncoded(Object.assign({access_token:this.opts.token},r))}getQueryParamsForEventType(t){return ee(this,void 0,void 0,function*(){let{token:r,visitorIdProvider:a}=this.opts,o=yield a.getCurrentVisitorId();return[r&&this.isEventTypeLegacy(t)?`access_token=${r}`:"",o?`visitorId=${o}`:"","discardVisitInfo=true"].filter(n=>!!n).join("&")})}isEventTypeLegacy(t){return[Se.click,Se.custom,Se.search,Se.view].indexOf(t)!==-1}encodeForLegacyType(t,r){return`${t}Event=${encodeURIComponent(JSON.stringify(r))}`}encodeForFormUrlEncoded(t){return Object.keys(t).filter(r=>!!t[r]).map(r=>`${encodeURIComponent(r)}=${encodeURIComponent(this.encodeValue(t[r]))}`).join("&")}encodeValue(t){return typeof t=="number"||typeof t=="string"||typeof t=="boolean"?t:JSON.stringify(t)}},Yd=class{sendEvent(t,r){return ee(this,void 0,void 0,function*(){return Promise.resolve()})}},Jx=window.fetch,Vu=class{constructor(t){this.opts=t}sendEvent(t,r){return ee(this,void 0,void 0,function*(){let{baseUrl:a,visitorIdProvider:o,preprocessRequest:n}=this.opts,i=this.shouldAppendVisitorId(t)?yield this.getVisitorIdParam():"",s={url:`${a}/analytics/${t}${i}`,credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(r)},c=Object.assign(Object.assign({},s),n?yield n(s,"analyticsFetch"):{}),{url:u}=c,l=Wn(c,["url"]),d=yield Jx(u,l);if(d.ok){let f=yield d.json();return f.visitorId&&o.setCurrentVisitorId(f.visitorId),f}else{try{d.json()}catch{}throw console.error(`An error has occured when sending the "${t}" event.`,d,r),new Error(`An error has occurred when sending the "${t}" event. Check the console logs for more details.`)}})}shouldAppendVisitorId(t){return[Se.click,Se.custom,Se.search,Se.view].indexOf(t)!==-1}getVisitorIdParam(){return ee(this,void 0,void 0,function*(){let{visitorIdProvider:t}=this.opts,r=yield t.getCurrentVisitorId();return r?`?visitor=${r}`:""})}getHeaders(){let{token:t}=this.opts;return Object.assign(Object.assign({},t?{Authorization:`Bearer ${t}`}:{}),{"Content-Type":"application/json"})}},Kd=class{constructor(t,r){qu()&&Nd()?this.storage=new Qd:qu()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new fa),this.client=new Vu(t),this.beaconClient=new Wd(t),window.addEventListener("beforeunload",()=>{let a=r();for(let{eventType:o,payload:n}of a)this.beaconClient.sendEvent(o,n)})}},Gd=class{constructor(t,r){this.storage=r||new fa,this.client=new Vu(t)}},Jd=class{constructor(){this.storage=new fa,this.client=new Yd}},Xx="xx",Zx=e=>(e==null?void 0:e.startsWith(Xx))||!1,eF=`
        We've detected you're using React Native but have not provided the corresponding runtime, 
        for an optimal experience please install @react-native-async-storage/async-storage and instantiate 
        your analytics client as follows:
        
        import {ReactNativeRuntime} from 'coveo.analytics/react-native';
        
        const analytics = new CoveoAnalytics({
            ...your options,
            runtimeEnvironment: new ReactNativeRuntime();
        })
    `;function tF(){return typeof navigator!="undefined"&&navigator.product=="ReactNative"}var rF=["1",1,"yes",!0];function aF(){return Ou()&&[navigator.globalPrivacyControl,navigator.doNotTrack,navigator.msDoNotTrack,window.doNotTrack].some(e=>rF.indexOf(e)!==-1)}var oF="v15",nF={default:"https://analytics.cloud.coveo.com/rest/ua",production:"https://analytics.cloud.coveo.com/rest/ua",hipaa:"https://analyticshipaa.cloud.coveo.com/rest/ua"},Xr=class{constructor(t){if(!t)throw new Error("You have to pass options to this constructor");this.options=Object.assign(Object.assign({},this.defaultOptions),t),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[ox,rx].concat(this.options.beforeSendHooks),this.afterSendHooks=this.options.afterSendHooks,this.eventTypeMapping={};let r={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};this.runtime=this.options.runtimeEnvironment||this.initRuntime(r),aF()&&(this.clear(),this.runtime.storage=new fa)}get defaultOptions(){return{endpoint:nF.default,token:"",version:oF,beforeSendHooks:[],afterSendHooks:[]}}initRuntime(t){return JS()&&Vd()?new Kd(t,()=>{let r=[...this.bufferedRequests];return this.bufferedRequests=[],r}):(tF()&&console.warn(eF),new Gd(t))}get storage(){return this.runtime.storage}determineVisitorId(){return ee(this,void 0,void 0,function*(){try{return(yield this.storage.getItem("visitorId"))||ma()}catch(t){return console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",t),ma()}})}getCurrentVisitorId(){return ee(this,void 0,void 0,function*(){if(!this.visitorId){let t=yield this.determineVisitorId();yield this.setCurrentVisitorId(t)}return this.visitorId})}setCurrentVisitorId(t){return ee(this,void 0,void 0,function*(){this.visitorId=t,yield this.storage.setItem("visitorId",t)})}getParameters(t,...r){return ee(this,void 0,void 0,function*(){return yield this.resolveParameters(t,...r)})}getPayload(t,...r){return ee(this,void 0,void 0,function*(){let a=yield this.resolveParameters(t,...r);return yield this.resolvePayloadForParameters(t,a)})}get currentVisitorId(){return typeof(this.visitorId||this.storage.getItem("visitorId"))!="string"&&this.setCurrentVisitorId(ma()),this.visitorId}set currentVisitorId(t){this.visitorId=t,this.storage.setItem("visitorId",t)}resolveParameters(t,...r){return ee(this,void 0,void 0,function*(){let{variableLengthArgumentsNames:a=[],addVisitorIdParameter:o=!1,usesMeasurementProtocol:n=!1}=this.eventTypeMapping[t]||{};return yield[d=>a.length>0?this.parseVariableArgumentsPayload(a,d):d[0],d=>ee(this,void 0,void 0,function*(){return Object.assign(Object.assign({},d),{visitorId:o?yield this.getCurrentVisitorId():""})}),d=>n?this.ensureAnonymousUserWhenUsingApiKey(d):d,d=>this.beforeSendHooks.reduce((f,p)=>ee(this,void 0,void 0,function*(){let m=yield f;return yield p(t,m)}),d)].reduce((d,f)=>ee(this,void 0,void 0,function*(){let p=yield d;return yield f(p)}),Promise.resolve(r))})}resolvePayloadForParameters(t,r){return ee(this,void 0,void 0,function*(){let{usesMeasurementProtocol:a=!1}=this.eventTypeMapping[t]||{};return yield[l=>this.removeEmptyPayloadValues(l,t),l=>this.validateParams(l),l=>a?$x(l):l,l=>a?this.removeUnknownParameters(l):l,l=>a?this.processCustomParameters(l):l].reduce((l,d)=>ee(this,void 0,void 0,function*(){let f=yield l;return yield d(f)}),Promise.resolve(r))})}sendEvent(t,...r){return ee(this,void 0,void 0,function*(){let{newEventType:a=t}=this.eventTypeMapping[t]||{},o=yield this.resolveParameters(t,...r),n=yield this.resolvePayloadForParameters(t,o);return this.bufferedRequests.push({eventType:a,payload:n}),yield Promise.all(this.afterSendHooks.map(i=>i(t,o))),yield this.deferExecution(),yield this.sendFromBufferWithFetch()})}deferExecution(){return new Promise(t=>setTimeout(t,0))}sendFromBufferWithFetch(){return ee(this,void 0,void 0,function*(){let t=this.bufferedRequests.shift();if(t){let{eventType:r,payload:a}=t;return this.runtime.client.sendEvent(r,a)}})}clear(){this.storage.removeItem("visitorId"),new un().clear()}sendSearchEvent(t){return ee(this,void 0,void 0,function*(){return this.sendEvent(Se.search,t)})}sendClickEvent(t){return ee(this,void 0,void 0,function*(){return this.sendEvent(Se.click,t)})}sendCustomEvent(t){return ee(this,void 0,void 0,function*(){return this.sendEvent(Se.custom,t)})}sendViewEvent(t){return ee(this,void 0,void 0,function*(){return this.sendEvent(Se.view,t)})}getVisit(){return ee(this,void 0,void 0,function*(){let r=yield(yield fetch(`${this.baseUrl}/analytics/visit`)).json();return this.visitorId=r.visitorId,r})}getHealth(){return ee(this,void 0,void 0,function*(){return yield(yield fetch(`${this.baseUrl}/analytics/monitoring/health`)).json()})}registerBeforeSendEventHook(t){this.beforeSendHooks.push(t)}registerAfterSendEventHook(t){this.afterSendHooks.push(t)}addEventTypeMapping(t,r){this.eventTypeMapping[t]=r}parseVariableArgumentsPayload(t,r){let a={};for(let o=0,n=r.length;o<n;o++){let i=r[o];if(typeof i=="string")a[t[o]]=i;else if(typeof i=="object")return Object.assign(Object.assign({},a),i)}return a}isKeyAllowedEmpty(t,r){return({[Se.search]:["queryText"]}[t]||[]).indexOf(r)!==-1}removeEmptyPayloadValues(t,r){let a=o=>typeof o!="undefined"&&o!==null&&o!=="";return Object.keys(t).filter(o=>this.isKeyAllowedEmpty(r,o)||a(t[o])).reduce((o,n)=>Object.assign(Object.assign({},o),{[n]:t[n]}),{})}removeUnknownParameters(t){return Object.keys(t).filter(a=>{if(Wx(a))return!0;console.log(a,"is not processed by coveoua")}).reduce((a,o)=>Object.assign(Object.assign({},a),{[o]:t[o]}),{})}processCustomParameters(t){let{custom:r}=t,a=Wn(t,["custom"]),o=this.lowercaseKeys(r),n=Yx(a);return Object.assign(Object.assign({},o),n)}lowercaseKeys(t){return Object.keys(t||{}).reduce((a,o)=>Object.assign(Object.assign({},a),{[o.toLowerCase()]:t[o]}),{})}validateParams(t){let{anonymizeIp:r}=t,a=Wn(t,["anonymizeIp"]);return r!==void 0&&["0","false","undefined","null","{}","[]",""].indexOf(`${r}`.toLowerCase())==-1&&(a.anonymizeIp=1),a}ensureAnonymousUserWhenUsingApiKey(t){let{userId:r}=t,a=Wn(t,["userId"]);return Zx(this.options.token)&&!r?(a.userId="anonymous",a):t}get baseUrl(){let{version:t,endpoint:r}=this.options,a=r.indexOf(".cloud.coveo.com")!==-1;return`${r}${a?"":"/rest"}/${t}`}},P;(function(e){e.interfaceLoad="interfaceLoad",e.interfaceChange="interfaceChange",e.didyoumeanAutomatic="didyoumeanAutomatic",e.didyoumeanClick="didyoumeanClick",e.resultsSort="resultsSort",e.searchboxSubmit="searchboxSubmit",e.searchboxClear="searchboxClear",e.searchboxAsYouType="searchboxAsYouType",e.breadcrumbFacet="breadcrumbFacet",e.breadcrumbResetAll="breadcrumbResetAll",e.documentQuickview="documentQuickview",e.documentOpen="documentOpen",e.omniboxAnalytics="omniboxAnalytics",e.omniboxFromLink="omniboxFromLink",e.searchFromLink="searchFromLink",e.triggerNotify="notify",e.triggerExecute="execute",e.triggerQuery="query",e.triggerRedirect="redirect",e.pagerResize="pagerResize",e.pagerNumber="pagerNumber",e.pagerNext="pagerNext",e.pagerPrevious="pagerPrevious",e.pagerScrolling="pagerScrolling",e.staticFilterClearAll="staticFilterClearAll",e.staticFilterSelect="staticFilterSelect",e.staticFilterDeselect="staticFilterDeselect",e.facetClearAll="facetClearAll",e.facetSearch="facetSearch",e.facetSelect="facetSelect",e.facetSelectAll="facetSelectAll",e.facetDeselect="facetDeselect",e.facetExclude="facetExclude",e.facetUnexclude="facetUnexclude",e.facetUpdateSort="facetUpdateSort",e.facetShowMore="showMoreFacetResults",e.facetShowLess="showLessFacetResults",e.queryError="query",e.queryErrorBack="errorBack",e.queryErrorClear="errorClearQuery",e.queryErrorRetry="errorRetry",e.recommendation="recommendation",e.recommendationInterfaceLoad="recommendationInterfaceLoad",e.recommendationOpen="recommendationOpen",e.likeSmartSnippet="likeSmartSnippet",e.dislikeSmartSnippet="dislikeSmartSnippet",e.expandSmartSnippet="expandSmartSnippet",e.collapseSmartSnippet="collapseSmartSnippet",e.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",e.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",e.sendSmartSnippetReason="sendSmartSnippetReason",e.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",e.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",e.openSmartSnippetSource="openSmartSnippetSource",e.recentQueryClick="recentQueriesClick",e.clearRecentQueries="clearRecentQueries",e.recentResultClick="recentResultClick",e.clearRecentResults="clearRecentResults",e.noResultsBack="noResultsBack"})(P||(P={}));var iF={[P.triggerNotify]:"queryPipelineTriggers",[P.triggerExecute]:"queryPipelineTriggers",[P.triggerQuery]:"queryPipelineTriggers",[P.triggerRedirect]:"queryPipelineTriggers",[P.queryError]:"errors",[P.queryErrorBack]:"errors",[P.queryErrorClear]:"errors",[P.queryErrorRetry]:"errors",[P.pagerNext]:"getMoreResults",[P.pagerPrevious]:"getMoreResults",[P.pagerNumber]:"getMoreResults",[P.pagerResize]:"getMoreResults",[P.pagerScrolling]:"getMoreResults",[P.facetSearch]:"facet",[P.facetShowLess]:"facet",[P.facetShowMore]:"facet",[P.recommendation]:"recommendation",[P.likeSmartSnippet]:"smartSnippet",[P.dislikeSmartSnippet]:"smartSnippet",[P.expandSmartSnippet]:"smartSnippet",[P.collapseSmartSnippet]:"smartSnippet",[P.openSmartSnippetFeedbackModal]:"smartSnippet",[P.closeSmartSnippetFeedbackModal]:"smartSnippet",[P.sendSmartSnippetReason]:"smartSnippet",[P.expandSmartSnippetSuggestion]:"smartSnippetSuggestions",[P.collapseSmartSnippetSuggestion]:"smartSnippetSuggestions",[P.clearRecentQueries]:"recentQueries",[P.recentResultClick]:"recentlyClickedDocuments",[P.clearRecentResults]:"recentlyClickedDocuments"},Nu=class{constructor(){this.runtime=new Jd,this.currentVisitorId=""}getPayload(){return Promise.resolve()}getParameters(){return Promise.resolve()}sendEvent(){return Promise.resolve()}sendSearchEvent(){return Promise.resolve()}sendClickEvent(){return Promise.resolve()}sendCustomEvent(){return Promise.resolve()}sendViewEvent(){return Promise.resolve()}getVisit(){return Promise.resolve({id:"",visitorId:""})}getHealth(){return Promise.resolve({status:""})}registerBeforeSendEventHook(){}registerAfterSendEventHook(){}addEventTypeMapping(){}};function sF(e){let t="";return e.filter(r=>{let a=r!==t;return t=r,a})}function cF(e){return e.map(t=>t.replace(/;/g,""))}function Xd(e){let t=256,r=e.join(";");return r.length<=t?r:Xd(e.slice(1))}var Zd=e=>{let t=cF(e),r=sF(t);return Xd(r)};function ep(e){let t=typeof e.partialQueries=="string"?e.partialQueries:Zd(e.partialQueries),r=typeof e.suggestions=="string"?e.suggestions:Zd(e.suggestions);return Object.assign(Object.assign({},e),{partialQueries:t,suggestions:r})}var Mu=class{constructor(t,r){this.opts=t,this.provider=r,this.coveoAnalyticsClient=t.enableAnalytics===!1?new Nu:new Xr(t)}disable(){this.coveoAnalyticsClient instanceof Xr&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new Nu}enable(){this.coveoAnalyticsClient=new Xr(this.opts)}logInterfaceLoad(){return this.logSearchEvent(P.interfaceLoad)}logRecommendationInterfaceLoad(){return this.logSearchEvent(P.recommendationInterfaceLoad)}logRecommendation(){return this.logCustomEvent(P.recommendation)}logRecommendationOpen(t,r){return this.logClickEvent(P.recommendationOpen,t,r)}logStaticFilterClearAll(t){return this.logSearchEvent(P.staticFilterClearAll,t)}logStaticFilterSelect(t){return this.logSearchEvent(P.staticFilterSelect,t)}logStaticFilterDeselect(t){return this.logSearchEvent(P.staticFilterDeselect,t)}logFetchMoreResults(){return this.logCustomEvent(P.pagerScrolling,{type:"getMoreResults"})}logInterfaceChange(t){return this.logSearchEvent(P.interfaceChange,t)}logDidYouMeanAutomatic(){return this.logSearchEvent(P.didyoumeanAutomatic)}logDidYouMeanClick(){return this.logSearchEvent(P.didyoumeanClick)}logResultsSort(t){return this.logSearchEvent(P.resultsSort,t)}logSearchboxSubmit(){return this.logSearchEvent(P.searchboxSubmit)}logSearchboxClear(){return this.logSearchEvent(P.searchboxClear)}logSearchboxAsYouType(){return this.logSearchEvent(P.searchboxAsYouType)}logBreadcrumbFacet(t){return this.logSearchEvent(P.breadcrumbFacet,t)}logBreadcrumbResetAll(){return this.logSearchEvent(P.breadcrumbResetAll)}logDocumentQuickview(t,r){return this.logClickEvent(P.documentQuickview,t,r)}logDocumentOpen(t,r){return this.logClickEvent(P.documentOpen,t,r)}logOmniboxAnalytics(t){return this.logSearchEvent(P.omniboxAnalytics,ep(t))}logOmniboxFromLink(t){return this.logSearchEvent(P.omniboxFromLink,ep(t))}logSearchFromLink(){return this.logSearchEvent(P.searchFromLink)}logTriggerNotify(t){return this.logCustomEvent(P.triggerNotify,t)}logTriggerExecute(t){return this.logCustomEvent(P.triggerExecute,t)}logTriggerQuery(){let t={query:this.provider.getSearchEventRequestPayload().queryText};return this.logCustomEvent(P.triggerQuery,t)}logTriggerRedirect(t){let r=Object.assign(Object.assign({},t),{query:this.provider.getSearchEventRequestPayload().queryText});return this.logCustomEvent(P.triggerRedirect,r)}logPagerResize(t){return this.logCustomEvent(P.pagerResize,t)}logPagerNumber(t){return this.logCustomEvent(P.pagerNumber,t)}logPagerNext(t){return this.logCustomEvent(P.pagerNext,t)}logPagerPrevious(t){return this.logCustomEvent(P.pagerPrevious,t)}logPagerScrolling(){return this.logCustomEvent(P.pagerScrolling)}logFacetClearAll(t){return this.logSearchEvent(P.facetClearAll,t)}logFacetSearch(t){return this.logSearchEvent(P.facetSearch,t)}logFacetSelect(t){return this.logSearchEvent(P.facetSelect,t)}logFacetDeselect(t){return this.logSearchEvent(P.facetDeselect,t)}logFacetExclude(t){return this.logSearchEvent(P.facetExclude,t)}logFacetUnexclude(t){return this.logSearchEvent(P.facetUnexclude,t)}logFacetSelectAll(t){return this.logSearchEvent(P.facetSelectAll,t)}logFacetUpdateSort(t){return this.logSearchEvent(P.facetUpdateSort,t)}logFacetShowMore(t){return this.logCustomEvent(P.facetShowMore,t)}logFacetShowLess(t){return this.logCustomEvent(P.facetShowLess,t)}logQueryError(t){return this.logCustomEvent(P.queryError,t)}logQueryErrorBack(){return ee(this,void 0,void 0,function*(){return yield this.logCustomEvent(P.queryErrorBack),this.logSearchEvent(P.queryErrorBack)})}logQueryErrorRetry(){return ee(this,void 0,void 0,function*(){return yield this.logCustomEvent(P.queryErrorRetry),this.logSearchEvent(P.queryErrorRetry)})}logQueryErrorClear(){return ee(this,void 0,void 0,function*(){return yield this.logCustomEvent(P.queryErrorClear),this.logSearchEvent(P.queryErrorClear)})}logLikeSmartSnippet(){return this.logCustomEvent(P.likeSmartSnippet)}logDislikeSmartSnippet(){return this.logCustomEvent(P.dislikeSmartSnippet)}logExpandSmartSnippet(){return this.logCustomEvent(P.expandSmartSnippet)}logCollapseSmartSnippet(){return this.logCustomEvent(P.collapseSmartSnippet)}logOpenSmartSnippetFeedbackModal(){return this.logCustomEvent(P.openSmartSnippetFeedbackModal)}logCloseSmartSnippetFeedbackModal(){return this.logCustomEvent(P.closeSmartSnippetFeedbackModal)}logSmartSnippetFeedbackReason(t,r){return this.logCustomEvent(P.sendSmartSnippetReason,{reason:t,details:r})}logExpandSmartSnippetSuggestion(t){return this.logCustomEvent(P.expandSmartSnippetSuggestion,{documentId:t})}logCollapseSmartSnippetSuggestion(t){return this.logCustomEvent(P.collapseSmartSnippetSuggestion,{documentId:t})}logOpenSmartSnippetSource(t,r){return this.logClickEvent(P.openSmartSnippetSource,t,r)}logRecentQueryClick(){return this.logSearchEvent(P.recentQueryClick)}logClearRecentQueries(){return this.logCustomEvent(P.clearRecentQueries)}logRecentResultClick(t,r){return this.logCustomEvent(P.recentResultClick,{info:t,identifier:r})}logClearRecentResults(){return this.logCustomEvent(P.clearRecentResults)}logNoResultsBack(){return this.logSearchEvent(P.noResultsBack)}logCustomEvent(t,r){return ee(this,void 0,void 0,function*(){let a=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),o=Object.assign(Object.assign({},yield this.getBaseCustomEventRequest(a)),{eventType:iF[t],eventValue:t});return this.coveoAnalyticsClient.sendCustomEvent(o)})}logCustomEventWithType(t,r,a){return ee(this,void 0,void 0,function*(){let o=Object.assign(Object.assign({},this.provider.getBaseMetadata()),a),n=Object.assign(Object.assign({},yield this.getBaseCustomEventRequest(o)),{eventType:r,eventValue:t});return this.coveoAnalyticsClient.sendCustomEvent(n)})}logSearchEvent(t,r){return ee(this,void 0,void 0,function*(){return this.coveoAnalyticsClient.sendSearchEvent(yield this.getBaseSearchEventRequest(t,r))})}logClickEvent(t,r,a,o){return ee(this,void 0,void 0,function*(){let n=Object.assign(Object.assign(Object.assign({},r),yield this.getBaseEventRequest(Object.assign(Object.assign({},a),o))),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:t});return this.coveoAnalyticsClient.sendClickEvent(n)})}getBaseSearchEventRequest(t,r){return ee(this,void 0,void 0,function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(r)),this.provider.getSearchEventRequestPayload()),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:t})})}getBaseCustomEventRequest(t){return ee(this,void 0,void 0,function*(){return Object.assign(Object.assign({},yield this.getBaseEventRequest(t)),{lastSearchQueryUid:this.provider.getSearchUID()})})}getBaseEventRequest(t){return ee(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t);return Object.assign(Object.assign({},this.getOrigins()),{customData:r,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})})}getOrigins(){var t,r;return{originContext:(r=(t=this.provider).getOriginContext)===null||r===void 0?void 0:r.call(t),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof Xr?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}},tp=e=>`${e.protocol}//${e.hostname}${e.pathname.indexOf("/")===0?e.pathname:`/${e.pathname}`}${e.search}`,ln={pageview:"pageview",event:"event"},rp=class{constructor({client:t,uuidGenerator:r=ma}){this.actionData={},this.client=t,this.uuidGenerator=r,this.pageViewId=r(),this.nextPageViewId=this.pageViewId,this.currentLocation=tp(window.location),this.lastReferrer=document.referrer,this.addHooks()}setAction(t,r){this.action=t,this.actionData=r}clearData(){this.clearPluginData(),this.action=void 0,this.actionData={}}getLocationInformation(t,r){return Object.assign({hitType:t},this.getNextValues(t,r))}updateLocationInformation(t,r){this.updateLocationForNextPageView(t,r)}getDefaultContextInformation(t){let r={title:document.title,encoding:document.characterSet},a={screenResolution:`${screen.width}x${screen.height}`,screenColor:`${screen.colorDepth}-bit`},o={language:navigator.language,userAgent:navigator.userAgent},n={time:Date.now().toString(),eventId:this.uuidGenerator()};return Object.assign(Object.assign(Object.assign(Object.assign({},n),a),o),r)}updateLocationForNextPageView(t,r){let{pageViewId:a,referrer:o,location:n}=this.getNextValues(t,r);this.lastReferrer=o,this.pageViewId=a,this.currentLocation=n,t===ln.pageview&&(this.nextPageViewId=this.uuidGenerator(),this.hasSentFirstPageView=!0)}getNextValues(t,r){return{pageViewId:t===ln.pageview?this.nextPageViewId:this.pageViewId,referrer:t===ln.pageview&&this.hasSentFirstPageView?this.currentLocation:this.lastReferrer,location:t===ln.pageview?this.getCurrentLocationFromPayload(r):this.currentLocation}}getCurrentLocationFromPayload(t){if(t.page){let r=o=>o.replace(/^\/?(.*)$/,"/$1");return`${(o=>o.split("/").slice(0,3).join("/"))(this.currentLocation)}${r(t.page)}`}else return tp(window.location)}},Kn=Object.assign({},ln),ap=Object.keys(Kn).map(e=>Kn[e]),op=class extends rp{constructor({client:t,uuidGenerator:r=ma}){super({client:t,uuidGenerator:r});this.ticket={}}addHooks(){this.addHooksForEvent(),this.addHooksForPageView(),this.addHooksForSVCEvents()}setTicket(t){this.ticket=t}clearPluginData(){this.ticket={}}addHooksForSVCEvents(){this.client.registerBeforeSendEventHook((t,...[r])=>ap.indexOf(t)!==-1?this.addSVCDataToPayload(t,r):r),this.client.registerAfterSendEventHook((t,...[r])=>(ap.indexOf(t)!==-1&&this.updateLocationInformation(t,r),r))}addHooksForPageView(){this.client.addEventTypeMapping(Kn.pageview,{newEventType:Se.collect,variableLengthArgumentsNames:["page"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addHooksForEvent(){this.client.addEventTypeMapping(Kn.event,{newEventType:Se.collect,variableLengthArgumentsNames:["eventCategory","eventAction","eventLabel","eventValue"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addSVCDataToPayload(t,r){var a;let o=Object.assign(Object.assign(Object.assign(Object.assign({},this.getLocationInformation(t,r)),this.getDefaultContextInformation(t)),this.action?{svcAction:this.action}:{}),Object.keys((a=this.actionData)!==null&&a!==void 0?a:{}).length>0?{svcActionData:this.actionData}:{}),n=this.getTicketPayload();return this.clearData(),Object.assign(Object.assign(Object.assign({},n),o),r)}getTicketPayload(){return dx(this.ticket)}};op.Id="svc";var np;(function(e){e.click="click",e.flowStart="flowStart"})(np||(np={}));var ip;(function(e){e.enterInterface="ticket_create_start",e.fieldUpdate="ticket_field_update",e.fieldSuggestionClick="ticket_classification_click",e.suggestionClick="suggestion_click",e.suggestionRate="suggestion_rate",e.nextCaseStep="ticket_next_stage",e.caseCancelled="ticket_cancel",e.caseSolved="ticket_cancel",e.caseCreated="ticket_create"})(ip||(ip={}));var sp;(function(e){e.quit="Quit",e.solved="Solved"})(sp||(sp={}));var Pe=()=>({q:"",enableQuerySyntax:!1});var Ee=()=>"default";function Qu(){return{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}}function $e(){return{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],queryCorrections:[],triggers:[],questionAnswer:Qu(),pipeline:""},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:""}}var Gn=e=>{let t=e.configuration.search.locale.split("-")[0];return!t||t.length!==2?"en":t};function yt(){return{}}function St(){return{}}function xt(){return{}}function Ft(){return{}}var it=(e,t)=>{if("productListing"in e&&e.productListing)return e.productListing.facets.results.find(r=>r.facetId===t);if("search"in e&&e.search)return e.search.response.facets.find(r=>r.facetId===t)},Jn=(e,t)=>e.facetSet[t];function uF(e,t){return!!t&&t.facetId in e.facetSet}var dn=(e,t)=>{let r=it(e,t);if(uF(e,r))return r},Xn=(e,t)=>{let r=dn(e,t);return r?r.values.filter(a=>a.state==="selected"):[]},bt=e=>"productListing"in e?e.productListing.isLoading:e.search.isLoading;function ze(e){if(!e)return{parents:[],values:[]};let t=[],r=e;for(;r.length&&r[0].children.length;)t=[...t,...r],r=r[0].children;let a=r.find(o=>o.state==="selected");return a&&(t=[...t,a],r=[]),{parents:t,values:r}}function lF(e,t){return!!t&&t.facetId in e.categoryFacetSet}var Lu=(e,t)=>{let r=it(e,t);if(lF(e,r))return r},cp=(e,t)=>{var r;return(r=e.categoryFacetSet[t])==null?void 0:r.request},pn=(e,t)=>{let r=Lu(e,t);return ze(r==null?void 0:r.values).parents};var ga=()=>({url:"",clientId:"",additionalFields:[],advancedParameters:{debug:!1},products:[],facets:{results:[]},error:null,isLoading:!1,responseId:""});var Zr=(e,t)=>{let r=dp(t,e),a=r?r.field:"",o=`${a}_${e}`;return{facetId:e,facetField:a,facetTitle:o}};function Zn(e,t){let{facetId:r,facetValue:a}=e,o=Zr(r,t),n=pp(t,r);return{...o,facetValue:n==="hierarchical"?lp(t,r):a}}function st(e){return{facetSet:e.facetSet||Ft(),categoryFacetSet:e.categoryFacetSet||yt(),dateFacetSet:e.dateFacetSet||St(),numericFacetSet:e.numericFacetSet||xt(),..."search"in e&&{search:e.search?e.search:$e()},..."productListing"in e&&{productListing:e.productListing?e.productListing:ga()}}}var up=e=>{let t=[];return dF(e).forEach((r,a)=>{let o=pp(e,r.facetId),n=hF(r,a+1);if(o==="hierarchical"){if(!!!pn(e,r.facetId).length)return;t.push({...n,...gF(e,r.facetId),facetType:o,state:"selected"});return}r.values.forEach((i,s)=>{if(i.state==="idle")return;let c=pF(i,s+1,o),u=o==="specific"?mF(i):fF(i);t.push({...n,...c,...u})})}),t},dF=e=>"productListing"in e&&e.productListing?e.productListing.facets.results:"search"in e&&e.search?e.search.response.facets:[],pF=(e,t,r)=>({state:e.state,valuePosition:t,facetType:r}),fF=e=>({displayValue:`${e.start}..${e.end}`,value:`${e.start}..${e.end}`,start:e.start,end:e.end,endInclusive:e.endInclusive}),mF=e=>({displayValue:e.value,value:e.value}),lp=(e,t)=>pn(e,t).map(a=>a.value).join(";"),gF=(e,t)=>{let r=1,a=lp(e,t);return{value:a,valuePosition:r,displayValue:a}},hF=(e,t)=>({title:`${e.field}_${e.facetId}`,field:e.field,id:e.facetId,facetPosition:t}),dp=(e,t)=>{var r;return e.facetSet[t]||((r=e.categoryFacetSet[t])==null?void 0:r.request)||e.dateFacetSet[t]||e.numericFacetSet[t]},pp=(e,t)=>{let r=dp(e,t);return r?r.type:"specific"};var ha="1.58.0";var ei=class{constructor(t){this.state=t}getLanguage(){return Gn(this.state)}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getBaseMetadata(){let{context:t}=this.state,r=(t==null?void 0:t.contextValues)||{},a={};for(let[o,n]of Object.entries(r)){let i=`context_${o}`;a[i]=n}return a.coveoHeadlessVersion=ha,a}getSearchUID(){var t,r,a;return((t=this.state.search)==null?void 0:t.response.searchUid)||((r=this.state.recommendation)==null?void 0:r.searchUid)||((a=this.state.productListing)==null?void 0:a.responseId)||$e().response.searchUid}getPipeline(){var t;return this.state.pipeline||((t=this.state.search)==null?void 0:t.response.pipeline)||"default"}getOriginContext(){return this.state.configuration.analytics.originContext}getOriginLevel1(){return this.state.searchHub||Ee()}getOriginLevel2(){return this.state.configuration.analytics.originLevel2}getOriginLevel3(){return this.state.configuration.analytics.originLevel3}getFacetState(){return up(st(this.state))}getIsAnonymous(){return this.state.configuration.analytics.anonymous}mapResultsToAnalyticsDocument(){var t;return(t=this.state.search)==null?void 0:t.response.results.map(r=>({documentUri:r.uri,documentUriHash:r.raw.urihash}))}get queryText(){var t;return((t=this.state.query)==null?void 0:t.q)||Pe().q}get responseTime(){var t;return((t=this.state.search)==null?void 0:t.duration)||$e().duration}get numberOfResults(){var t;return((t=this.state.search)==null?void 0:t.response.results.length)||$e().response.results.length}};var fp=({logger:e,state:t,analyticsClientMiddleware:r=(n,i)=>i,preprocessRequest:a,provider:o=new ei(t)})=>{let n=t.configuration.accessToken,i=t.configuration.analytics.apiBaseUrl,s=t.configuration.analytics.runtimeEnvironment,c=t.configuration.analytics.enabled,u=new Mu({token:n,endpoint:i,runtimeEnvironment:s,preprocessRequest:a,beforeSendHooks:[r,(l,d)=>(e.info({...d,type:l,endpoint:i,token:n},"Analytics request"),d)]},o);return c||u.disable(),u},be=()=>new Xr({}).getCurrentVisitorId(),ct=new Ud.HistoryStore,mp=()=>{let t=ct.getHistory().reverse().find(r=>r.name==="PageView"&&r.value);return t?t.value:""};ti.default.extend(gp.default);ti.default.extend(hp.default);var ju="/rest/search/v2",ri="/rest/ua",Ve=()=>({organizationId:"",accessToken:"",platformUrl:sn(),search:{apiBaseUrl:`${sn()}${ju}`,locale:"en-US",timezone:ti.default.tz.guess()},analytics:{enabled:!0,apiBaseUrl:`${zn()}${ri}`,originContext:"Search",originLevel2:"default",originLevel3:"default",anonymous:!1,deviceId:"",userDisplayName:""}}),mr=async e=>({analytics:{clientId:await be(),deviceId:e.deviceId,pageId:mp(),clientTimestamp:new Date().toISOString(),documentReferrer:e.originLevel3,originContext:e.originContext,userDisplayName:e.userDisplayName}});var ai=()=>({redirectTo:null});function ya(){return{}}function Te(){return{firstResult:0,numberOfResults:10,totalCountFiltered:0}}function yF(e,t){let r=`
  The following properties are invalid:

    ${e.join(`
	`)}
  
  ${t}
  `;return new fn(r)}var fn=class extends Error{constructor(e){super(e);this.name="SchemaValidationError"}},W=class{constructor(e){this.definition=e}validate(e={},t=""){let r={...this.default,...e},a=[];for(let o in this.definition){let n=this.definition[o].validate(r[o]);n&&a.push(`${o}: ${n}`)}if(a.length)throw yF(a,t);return r}get default(){let e={};for(let t in this.definition){let r=this.definition[t].default;r!==void 0&&(e[t]=r)}return e}},fe=class{constructor(e={}){this.baseConfig=e}validate(e){return this.baseConfig.required&&te(e)?"value is required.":null}get default(){return this.baseConfig.default instanceof Function?this.baseConfig.default():this.baseConfig.default}get required(){return this.baseConfig.required===!0}};function Ce(e){return e===void 0}function SF(e){return e===null}function te(e){return Ce(e)||SF(e)}var L=class{constructor(e={}){this.config=e,this.value=new fe(e)}validate(e){let t=this.value.validate(e);return t||(xF(e)?e<this.config.min?`minimum value of ${this.config.min} not respected.`:e>this.config.max?`maximum value of ${this.config.max} not respected.`:null:"value is not a number.")}get default(){return this.value.default}get required(){return this.value.required}};function xF(e){return Ce(e)||yp(e)}function yp(e){return typeof e=="number"&&!isNaN(e)}var Y=class{constructor(e={}){this.value=new fe(e)}validate(e){let t=this.value.validate(e);return t||(FF(e)?null:"value is not a boolean.")}get default(){return this.value.default}get required(){return this.value.required}};function FF(e){return Ce(e)||Sp(e)}function Sp(e){return typeof e=="boolean"}var bF=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i,A=class{constructor(e={}){this.config={emptyAllowed:!0,url:!1,...e},this.value=new fe(this.config)}validate(e){let{emptyAllowed:t,url:r,regex:a,constrainTo:o}=this.config,n=this.value.validate(e);return n||(Ce(e)?null:Sa(e)?!t&&!e.length?"value is an empty string.":r&&!bF.test(e)?"value is not a valid URL.":a&&!a.test(e)?`value did not match provided regex ${a}`:o&&!o.includes(e)?`value should be one of: ${o.join(", ")}.`:null:"value is not a string.")}get default(){return this.value.default}get required(){return this.value.required}};function Sa(e){return Object.prototype.toString.call(e)==="[object String]"}var j=class{constructor(e={}){this.config={options:{required:!1},values:{},...e}}validate(e){if(Ce(e))return this.config.options.required?"value is required and is currently undefined":null;if(!xp(e))return"value is not an object";for(let[r,a]of Object.entries(this.config.values))if(a.required&&te(e[r]))return`value does not contain ${r}`;let t="";for(let[r,a]of Object.entries(this.config.values)){let o=e[r],n=a.validate(o);n!==null&&(t+=" "+n)}return t===""?null:t}get default(){}get required(){return!!this.config.options.required}};function xp(e){return e!==void 0&&typeof e=="object"}var K=class{constructor(e={}){this.config=e,this.value=new fe(this.config)}validate(e){if(!te(e)&&!Array.isArray(e))return"value is not an array";let t=this.value.validate(e);if(t!==null)return t;if(te(e))return null;if(this.config.max!==void 0&&e.length>this.config.max)return`value contains more than ${this.config.max}`;if(this.config.min!==void 0&&e.length<this.config.min)return`value contains less than ${this.config.min}`;if(this.config.each!==void 0){let r="";return e.forEach(a=>{this.config.each.required&&te(a)&&(r=`value is null or undefined: ${e.join(",")}`);let o=this.validatePrimitiveValue(a,this.config.each);o!==null&&(r+=" "+o)}),r===""?null:r}return null}validatePrimitiveValue(e,t){return Sp(e)||Sa(e)||yp(e)||xp(e)?t.validate(e):"value is not a primitive value"}get default(){}get required(){return this.value.required}};function xa(e){return Array.isArray(e)}var Ct=class{constructor(e){this.config=e,this.value=new fe(e)}validate(e){let t=this.value.validate(e);return t!==null?t:Ce(e)||Object.values(this.config.enum).find(a=>a===e)?null:"value is not in enum."}get default(){return this.value.default}get required(){return this.value.required}};var Yt=(r=>(r.Ascending="ascending",r.Descending="descending",r))(Yt||{}),ut=(n=>(n.Relevancy="relevancy",n.QRE="qre",n.Date="date",n.Field="field",n.NoSort="nosort",n))(ut||{}),Rt=e=>{if(xa(e))return e.map(t=>Rt(t)).join(",");switch(e.by){case"relevancy":case"qre":case"nosort":return e.by;case"date":return`date ${e.order}`;case"field":return`@${e.field} ${e.order}`;default:return""}},Fa=()=>({by:"relevancy"}),oi=e=>({by:"date",order:e}),ni=(e,t)=>({by:"field",order:t,field:e}),ii=()=>({by:"qre"}),si=()=>({by:"nosort"}),Fp=new j({values:{by:new Ct({enum:ut,required:!0}),order:new Ct({enum:Yt}),field:new A}});function We(){return Rt(Fa())}function vt(){return{contextValues:{}}}var ci=()=>({correctedQuery:"",wordCorrections:[],originalQuery:""});function ui(){return{enableDidYouMean:!1,wasCorrectedTo:"",wasAutomaticallyCorrected:!1,queryCorrection:ci(),originalQuery:""}}var li=["author","language","urihash","objecttype","collection","source","permanentid"],Bu=[...li,"date","filetype","parents"],bp=[...Bu,"ec_price","ec_name","ec_description","ec_brand","ec_category","ec_item_group_id","ec_shortdesc","ec_thumbnails","ec_images","ec_promo_price","ec_in_stock","ec_rating"],ba=()=>({fieldsToInclude:li,fetchAllFields:!1,fieldsDescription:[]});var Ye=()=>"";var di=e=>({past:[],present:e,future:[]}),CF=e=>{let{past:t,present:r,future:a}=e;if(!r||t.length===0)return e;let o=t[t.length-1];return{past:t.slice(0,t.length-1),present:o,future:[r,...a]}},RF=e=>{let{past:t,present:r,future:a}=e;if(!r||a.length===0)return e;let o=a[0],n=a.slice(1);return{past:[...t,r],present:o,future:n}},vF=e=>{let{action:t,state:r,reducer:a}=e,{past:o,present:n}=r,i=a(n,t);return n?n===i?r:{past:[...o,n],present:i,future:[]}:di(i)},Cp=e=>{let{actionTypes:t,reducer:r}=e,a=di();return(o=a,n)=>{switch(n.type){case t.undo:return CF(o);case t.redo:return RF(o);case t.snapshot:return vF({state:o,reducer:r,action:n});default:return o}}};function Ca(){return{}}function Ra(){return{}}var Qe=()=>({cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,lq:"",lqWasSet:!1,dq:"",dqWasSet:!1,defaultFilters:{cq:"",aq:"",lq:"",dq:""}});function va(){return{enabled:!0}}function gr(){return{freezeFacetOrder:!1,facets:{}}}var Le=()=>!1;function At(){return{contextValues:{}}}function hr(){return[]}function Aa(){return{}}function Pa(){return{}}function pi(){return Ea({})}function Ea(e){var t,r;return{context:e.context||vt(),dictionaryFieldContext:e.dictionaryFieldContext||At(),facetSet:e.facetSet||Ft(),numericFacetSet:e.numericFacetSet||xt(),dateFacetSet:e.dateFacetSet||St(),categoryFacetSet:e.categoryFacetSet||yt(),pagination:e.pagination||Te(),query:e.query||Pe(),tabSet:e.tabSet||Pa(),advancedSearchQueries:e.advancedSearchQueries||Qe(),staticFilterSet:e.staticFilterSet||Aa(),querySet:e.querySet||ya(),sortCriteria:e.sortCriteria||We(),pipeline:e.pipeline||Ye(),searchHub:e.searchHub||Ee(),facetOptions:e.facetOptions||gr(),facetOrder:(t=e.facetOrder)!=null?t:hr(),debug:(r=e.debug)!=null?r:Le()}}function wa(){return{uniqueId:"",content:"",isLoading:!1}}var Oa=()=>({enabled:!1,fields:{collection:"foldingcollection",parent:"foldingparent",child:"foldingchild"},filterFieldRange:2,collections:{}});var fi=()=>({redirectTo:"",query:"",execute:{functionName:"",params:[]},notification:""});var mn=()=>({liked:!1,disliked:!1,expanded:!1,feedbackModalOpen:!1,relatedQuestions:[]});function mi(){return{}}function gi(){return{results:[],maxLength:10}}function hi(){return{queries:[],maxLength:10}}function yi(){return{length:void 0}}function Si(e={}){return{configuration:Ve(),advancedSearchQueries:Qe(),staticFilterSet:Aa(),facetSet:Ft(),dateFacetSet:St(),numericFacetSet:xt(),categoryFacetSet:yt(),facetSearchSet:Ca(),categoryFacetSearchSet:Ra(),facetOptions:gr(),pagination:Te(),query:Pe(),querySet:ya(),tabSet:Pa(),querySuggest:{},redirection:ai(),search:$e(),sortCriteria:We(),context:vt(),dictionaryFieldContext:At(),didYouMean:ui(),fields:ba(),history:di(pi()),pipeline:Ye(),facetOrder:hr(),searchHub:Ee(),debug:Le(),resultPreview:wa(),version:"unit-testing-version",folding:Oa(),triggers:fi(),questionAnswering:mn(),standaloneSearchBoxSet:mi(),recentResults:gi(),recentQueries:hi(),excerptLength:yi(),...e}}var gm=xe(Dp());var g={};_n(g,{MiddlewareArray:()=>Gp,configureStore:()=>ll,createAction:()=>h,createAsyncThunk:()=>Z,createDraftSafeSelector:()=>Jt,createEntityAdapter:()=>Vb,createImmutableStateInvariantMiddleware:()=>Fb,createNextState:()=>Sn,createReducer:()=>E,createSelector:()=>vi,createSerializableStateInvariantMiddleware:()=>bb,createSlice:()=>Ob,current:()=>hn,findNonSerializableValue:()=>Ei,freeze:()=>gn,getDefaultMiddleware:()=>wi,getType:()=>Eb,isAllOf:()=>dl,isAnyOf:()=>Fn,isAsyncThunkAction:()=>lf,isFulfilled:()=>uf,isImmutableDefault:()=>Zp,isPending:()=>sf,isPlain:()=>ul,isPlainObject:()=>Pi,isRejected:()=>Ii,isRejectedWithValue:()=>cf,nanoid:()=>of,unwrapResult:()=>jb});function Ke(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];if(!1)var o,n;throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function lt(e){return!!e&&!!e[he]}function Kt(e){return!!e&&(function(t){if(!t||typeof t!="object")return!1;var r=Object.getPrototypeOf(t);return!r||r===Object.prototype}(e)||Array.isArray(e)||!!e[Hp]||!!e.constructor[Hp]||Yu(e)||Ku(e))}function ea(e,t,r){r===void 0&&(r=!1),Ta(e)===0?(r?Object.keys:Da)(e).forEach(function(a){r&&typeof a=="symbol"||t(a,e[a],e)}):e.forEach(function(a,o){return t(o,a,e)})}function Ta(e){var t=e[he];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Yu(e)?2:Ku(e)?3:0}function ka(e,t){return Ta(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function tb(e,t){return Ta(e)===2?e.get(t):e[t]}function Vp(e,t,r){var a=Ta(e);a===2?e.set(t,r):a===3?(e.delete(t),e.add(r)):e[t]=r}function Np(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function Yu(e){return nb&&e instanceof Map}function Ku(e){return ib&&e instanceof Set}function Sr(e){return e.o||e.t}function Gu(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=zp(e);delete t[he];for(var r=Da(t),a=0;a<r.length;a++){var o=r[a],n=t[o];n.writable===!1&&(n.writable=!0,n.configurable=!0),(n.get||n.set)&&(t[o]={configurable:!0,writable:!0,enumerable:n.enumerable,value:e[o]})}return Object.create(Object.getPrototypeOf(e),t)}function gn(e,t){return t===void 0&&(t=!1),Ju(e)||lt(e)||!Kt(e)||(Ta(e)>1&&(e.set=e.add=e.clear=e.delete=rb),Object.freeze(e),t&&ea(e,function(r,a){return gn(a,!0)},!0)),e}function rb(){Ke(2)}function Ju(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Gt(e){var t=il[e];return t||Ke(18,e),t}function ab(e,t){il[e]||(il[e]=t)}function Xu(){return yn}function Zu(e,t){t&&(Gt("Patches"),e.u=[],e.s=[],e.v=t)}function Fi(e){el(e),e.p.forEach(ob),e.p=null}function el(e){e===yn&&(yn=e.l)}function Mp(e){return yn={p:[],l:yn,h:e,m:!0,_:0}}function ob(e){var t=e[he];t.i===0||t.i===1?t.j():t.g=!0}function tl(e,t){t._=t.p.length;var r=t.p[0],a=e!==void 0&&e!==r;return t.h.O||Gt("ES5").S(t,e,a),a?(r[he].P&&(Fi(t),Ke(4)),Kt(e)&&(e=bi(t,e),t.l||Ci(t,e)),t.u&&Gt("Patches").M(r[he],e,t.u,t.s)):e=bi(t,r,[]),Fi(t),t.u&&t.v(t.u,t.s),e!==_p?e:void 0}function bi(e,t,r){if(Ju(t))return t;var a=t[he];if(!a)return ea(t,function(n,i){return Qp(e,a,t,n,i,r)},!0),t;if(a.A!==e)return t;if(!a.P)return Ci(e,a.t,!0),a.t;if(!a.I){a.I=!0,a.A._--;var o=a.i===4||a.i===5?a.o=Gu(a.k):a.o;ea(a.i===3?new Set(o):o,function(n,i){return Qp(e,a,o,n,i,r)}),Ci(e,o,!1),r&&e.u&&Gt("Patches").R(a,r,e.u,e.s)}return a.o}function Qp(e,t,r,a,o,n){if(lt(o)){var i=bi(e,o,n&&t&&t.i!==3&&!ka(t.D,a)?n.concat(a):void 0);if(Vp(r,a,i),!lt(i))return;e.m=!1}if(Kt(o)&&!Ju(o)){if(!e.h.N&&e._<1)return;bi(e,o),t&&t.A.l||Ci(e,o)}}function Ci(e,t,r){r===void 0&&(r=!1),e.h.N&&e.m&&gn(t,r)}function rl(e,t){var r=e[he];return(r?Sr(r):e)[t]}function Lp(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var a=Object.getOwnPropertyDescriptor(r,t);if(a)return a;r=Object.getPrototypeOf(r)}}function xr(e){e.P||(e.P=!0,e.l&&xr(e.l))}function al(e){e.o||(e.o=Gu(e.t))}function ol(e,t,r){var a=Yu(t)?Gt("MapSet").T(t,r):Ku(t)?Gt("MapSet").F(t,r):e.O?function(o,n){var i=Array.isArray(o),s={i:i?1:0,A:n?n.A:Xu(),P:!1,I:!1,D:{},l:n,t:o,k:null,o:null,j:null,C:!1},c=s,u=Va;i&&(c=[s],u=Ri);var l=Proxy.revocable(c,u),d=l.revoke,f=l.proxy;return s.k=f,s.j=d,f}(t,r):Gt("ES5").J(t,r);return(r?r.A:Xu()).p.push(a),a}function hn(e){return lt(e)||Ke(22,e),function t(r){if(!Kt(r))return r;var a,o=r[he],n=Ta(r);if(o){if(!o.P&&(o.i<4||!Gt("ES5").K(o)))return o.t;o.I=!0,a=jp(r,n),o.I=!1}else a=jp(r,n);return ea(a,function(i,s){o&&tb(o.t,i)===s||Vp(a,i,t(s))}),n===3?new Set(a):a}(e)}function jp(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Gu(e)}function Bp(){function e(i,s){var c=n[i];return c?c.enumerable=s:n[i]=c={configurable:!0,enumerable:s,get:function(){var u=this[he];return Va.get(u,i)},set:function(u){var l=this[he];Va.set(l,i,u)}},c}function t(i){for(var s=i.length-1;s>=0;s--){var c=i[s][he];if(!c.P)switch(c.i){case 5:a(c)&&xr(c);break;case 4:r(c)&&xr(c)}}}function r(i){for(var s=i.t,c=i.k,u=Da(c),l=u.length-1;l>=0;l--){var d=u[l];if(d!==he){var f=s[d];if(f===void 0&&!ka(s,d))return!0;var p=c[d],m=p&&p[he];if(m?m.t!==f:!Np(p,f))return!0}}var y=!!s[he];return u.length!==Da(s).length+(y?0:1)}function a(i){var s=i.k;if(s.length!==i.t.length)return!0;var c=Object.getOwnPropertyDescriptor(s,s.length-1);return!(!c||c.get)}function o(i){i.g&&Ke(3,JSON.stringify(Sr(i)))}var n={};ab("ES5",{J:function(i,s){var c=Array.isArray(i),u=function(d,f){if(d){for(var p=Array(f.length),m=0;m<f.length;m++)Object.defineProperty(p,""+m,e(m,!0));return p}var y=zp(f);delete y[he];for(var x=Da(y),F=0;F<x.length;F++){var b=x[F];y[b]=e(b,d||!!y[b].enumerable)}return Object.create(Object.getPrototypeOf(f),y)}(c,i),l={i:c?5:4,A:s?s.A:Xu(),P:!1,I:!1,D:{},l:s,t:i,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,he,{value:l,writable:!0}),u},S:function(i,s,c){c?lt(s)&&s[he].A===i&&t(i.p):(i.u&&function u(l){if(l&&typeof l=="object"){var d=l[he];if(d){var f=d.t,p=d.k,m=d.D,y=d.i;if(y===4)ea(p,function(Q){Q!==he&&(f[Q]!==void 0||ka(f,Q)?m[Q]||u(p[Q]):(m[Q]=!0,xr(d)))}),ea(f,function(Q){p[Q]!==void 0||ka(p,Q)||(m[Q]=!1,xr(d))});else if(y===5){if(a(d)&&(xr(d),m.length=!0),p.length<f.length)for(var x=p.length;x<f.length;x++)m[x]=!1;else for(var F=f.length;F<p.length;F++)m[F]=!0;for(var b=Math.min(p.length,f.length),N=0;N<b;N++)m[N]===void 0&&u(p[N])}}}}(i.p[0]),t(i.p))},K:function(i){return i.i===4?r(i):a(i)}})}var Up,yn,nl=typeof Symbol!="undefined"&&typeof Symbol("x")=="symbol",nb=typeof Map!="undefined",ib=typeof Set!="undefined",$p=typeof Proxy!="undefined"&&Proxy.revocable!==void 0&&typeof Reflect!="undefined",_p=nl?Symbol.for("immer-nothing"):((Up={})["immer-nothing"]=!0,Up),Hp=nl?Symbol.for("immer-draftable"):"__$immer_draftable",he=nl?Symbol.for("immer-state"):"__$immer_state",Aq=typeof Symbol!="undefined"&&Symbol.iterator||"@@iterator";var Da=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,zp=Object.getOwnPropertyDescriptors||function(e){var t={};return Da(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},il={},Va={get:function(e,t){if(t===he)return e;var r=Sr(e);if(!ka(r,t))return function(o,n,i){var s,c=Lp(n,i);return c?"value"in c?c.value:(s=c.get)===null||s===void 0?void 0:s.call(o.k):void 0}(e,r,t);var a=r[t];return e.I||!Kt(a)?a:a===rl(e.t,t)?(al(e),e.o[t]=ol(e.A.h,a,e)):a},has:function(e,t){return t in Sr(e)},ownKeys:function(e){return Reflect.ownKeys(Sr(e))},set:function(e,t,r){var a=Lp(Sr(e),t);if(a==null?void 0:a.set)return a.set.call(e.k,r),!0;if(!e.P){var o=rl(Sr(e),t),n=o==null?void 0:o[he];if(n&&n.t===r)return e.o[t]=r,e.D[t]=!1,!0;if(Np(r,o)&&(r!==void 0||ka(e.t,t)))return!0;al(e),xr(e)}return e.o[t]=r,e.D[t]=!0,!0},deleteProperty:function(e,t){return rl(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,al(e),xr(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=Sr(e),a=Reflect.getOwnPropertyDescriptor(r,t);return a&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:a.enumerable,value:r[t]}},defineProperty:function(){Ke(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Ke(12)}},Ri={};ea(Va,function(e,t){Ri[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Ri.deleteProperty=function(e,t){return Va.deleteProperty.call(this,e[0],t)},Ri.set=function(e,t,r){return Va.set.call(this,e[0],t,r,e[0])};var sb=function(){function e(r){this.O=$p,this.N=!0,typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}var t=e.prototype;return t.produce=function(r,a,o){if(typeof r=="function"&&typeof a!="function"){var n=a;a=r;var i=this;return function(d){var f=this;d===void 0&&(d=n);for(var p=arguments.length,m=Array(p>1?p-1:0),y=1;y<p;y++)m[y-1]=arguments[y];return i.produce(d,function(x){var F;return(F=a).call.apply(F,[f,x].concat(m))})}}var s;if(typeof a!="function"&&Ke(6),o!==void 0&&typeof o!="function"&&Ke(7),Kt(r)){var c=Mp(this),u=ol(this,r,void 0),l=!0;try{s=a(u),l=!1}finally{l?Fi(c):el(c)}return typeof Promise!="undefined"&&s instanceof Promise?s.then(function(d){return Zu(c,o),tl(d,c)},function(d){throw Fi(c),d}):(Zu(c,o),tl(s,c))}if(!r||typeof r!="object")return(s=a(r))===_p?void 0:(s===void 0&&(s=r),this.N&&gn(s,!0),s);Ke(21,r)},t.produceWithPatches=function(r,a){var o,n,i=this;return typeof r=="function"?function(s){for(var c=arguments.length,u=Array(c>1?c-1:0),l=1;l<c;l++)u[l-1]=arguments[l];return i.produceWithPatches(s,function(d){return r.apply(void 0,[d].concat(u))})}:[this.produce(r,a,function(s,c){o=s,n=c}),o,n]},t.createDraft=function(r){Kt(r)||Ke(8),lt(r)&&(r=hn(r));var a=Mp(this),o=ol(this,r,void 0);return o[he].C=!0,el(a),o},t.finishDraft=function(r,a){var o=r&&r[he],n=o.A;return Zu(n,a),tl(void 0,n)},t.setAutoFreeze=function(r){this.N=r},t.setUseProxies=function(r){r&&!$p&&Ke(20),this.O=r},t.applyPatches=function(r,a){var o;for(o=a.length-1;o>=0;o--){var n=a[o];if(n.path.length===0&&n.op==="replace"){r=n.value;break}}var i=Gt("Patches").$;return lt(r)?i(r,a):this.produce(r,function(s){return i(s,a.slice(o+1))})},e}(),_e=new sb,cb=_e.produce,Pq=_e.produceWithPatches.bind(_e),Eq=_e.setAutoFreeze.bind(_e),wq=_e.setUseProxies.bind(_e),Oq=_e.applyPatches.bind(_e),qq=_e.createDraft.bind(_e),Iq=_e.finishDraft.bind(_e),Sn=cb;var Pt=xe(xi());M(g,xe(xi()));function ub(e,t){return e===t}function lb(e,t,r){if(t===null||r===null||t.length!==r.length)return!1;for(var a=t.length,o=0;o<a;o++)if(!e(t[o],r[o]))return!1;return!0}function db(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ub,r=null,a=null;return function(){return lb(t,r,arguments)||(a=e.apply(null,arguments)),r=arguments,a}}function pb(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(a){return typeof a=="function"})){var r=t.map(function(a){return typeof a}).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, "+("instead received the following types: ["+r+"]"))}return t}function fb(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return function(){for(var o=arguments.length,n=Array(o),i=0;i<o;i++)n[i]=arguments[i];var s=0,c=n.pop(),u=pb(n),l=e.apply(void 0,[function(){return s++,c.apply(null,arguments)}].concat(r)),d=e(function(){for(var f=[],p=u.length,m=0;m<p;m++)f.push(u[m].apply(null,arguments));return l.apply(null,f)});return d.resultFunc=c,d.dependencies=u,d.recomputations=function(){return s},d.resetRecomputations=function(){return s=0},d}}var vi=fb(db);function Wp(e){return function(t){var r=t.dispatch,a=t.getState;return function(o){return function(n){return typeof n=="function"?n(r,a,e):o(n)}}}}var Yp=Wp();Yp.withExtraArgument=Wp;var xn=Yp;var Jt=function(){var t=vi.apply(void 0,arguments),r=function(o){for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];return t.apply(void 0,[lt(o)?hn(o):o].concat(i))};return r};function Fr(){return Fr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Fr.apply(this,arguments)}function mb(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function sl(e){return sl=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},sl(e)}function Ai(e,t){return Ai=Object.setPrototypeOf||function(a,o){return a.__proto__=o,a},Ai(e,t)}function gb(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function ta(e,t,r){return gb()?ta=Reflect.construct:ta=function(o,n,i){var s=[null];s.push.apply(s,n);var c=Function.bind.apply(o,s),u=new c;return i&&Ai(u,i.prototype),u},ta.apply(null,arguments)}function hb(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function cl(e){var t=typeof Map=="function"?new Map:void 0;return cl=function(a){if(a===null||!hb(a))return a;if(typeof a!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t!="undefined"){if(t.has(a))return t.get(a);t.set(a,o)}function o(){return ta(a,arguments,sl(this).constructor)}return o.prototype=Object.create(a.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),Ai(o,a)},cl(e)}var yb=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Pt.compose:Pt.compose.apply(null,arguments)};function Pi(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Kp(e,t){var r=0;return{measureTime:function(o){var n=Date.now();try{return o()}finally{var i=Date.now();r+=i-n}},warnIfExceeded:function(){r>e&&console.warn(t+" took "+r+"ms, which is more than the warning threshold of "+e+`ms. 
If your state or actions are very large, you may want to disable the middleware as it might cause too much of a slowdown in development mode. See https://redux-toolkit.js.org/api/getDefaultMiddleware for instructions.
It is disabled in production builds, so you don't need to worry about that.`)}}}var Gp=function(e){mb(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.concat=function(){for(var o,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return ta(t,(o=e.prototype.concat).call.apply(o,[this].concat(i)))},r.prepend=function(){for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return n.length===1&&Array.isArray(n[0])?ta(t,n[0].concat(this)):ta(t,n.concat(this))},t}(cl(Array)),Sb=!0,Jp="Invariant failed";function Xp(e,t){if(!e)throw Sb?new Error(Jp):new Error(Jp+": "+(t||""))}function Zp(e){return typeof e!="object"||e===null||typeof e=="undefined"}function xb(e,t,r){var a=ef(e,t,r);return{detectMutations:function(){return tf(e,t,a,r)}}}function ef(e,t,r,a){t===void 0&&(t=[]),a===void 0&&(a=[]);var o={value:r};if(!e(r)){o.children={};for(var n in r){var i=a.concat(n);t.length&&t.indexOf(i.join("."))!==-1||(o.children[n]=ef(e,t,r[n],i))}}return o}function tf(e,t,r,a,o,n){t===void 0&&(t=[]),o===void 0&&(o=!1),n===void 0&&(n=[]);var i=r?r.value:void 0,s=i===a;if(o&&!s&&!Number.isNaN(a))return{wasMutated:!0,path:n};if(e(i)||e(a))return{wasMutated:!1};var c={};Object.keys(r.children).forEach(function(m){c[m]=!0}),Object.keys(a).forEach(function(m){c[m]=!0});for(var u=Object.keys(c),l=0;l<u.length;l++){var d=u[l],f=n.concat(d);if(!(t.length&&t.indexOf(f.join("."))!==-1)){var p=tf(e,t,r.children[d],a[d],s,f);if(p.wasMutated)return p}}return{wasMutated:!1}}function Fb(e){return e===void 0&&(e={}),function(){return function(u){return function(l){return u(l)}}};var t=e,r=t.isImmutable,a=r===void 0?Zp:r,o=t.ignoredPaths,n=t.warnAfter,i=n===void 0?32:n,s=t.ignore;o=o||s;var c=xb.bind(null,a,o);return function(u){var l=u.getState,d=l(),f=c(d),p;return function(m){return function(y){var x=Kp(i,"ImmutableStateInvariantMiddleware");x.measureTime(function(){d=l(),p=f.detectMutations(),f=c(d),p.wasMutated&&Xp(!1)});var F=m(y);return x.measureTime(function(){d=l(),p=f.detectMutations(),f=c(d),p.wasMutated&&(p.wasMutated&&Xp(!1))}),x.warnIfExceeded(),F}}}}function ul(e){return typeof e=="undefined"||e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)||Pi(e)}function Ei(e,t,r,a,o){t===void 0&&(t=[]),r===void 0&&(r=ul),o===void 0&&(o=[]);var n;if(!r(e))return{keyPath:t.join(".")||"<root>",value:e};if(typeof e!="object"||e===null)return!1;for(var i=a!=null?a(e):Object.entries(e),s=o.length>0,c=i,u=Array.isArray(c),l=0,c=u?c:c[Symbol.iterator]();;){var d;if(u){if(l>=c.length)break;d=c[l++]}else{if(l=c.next(),l.done)break;d=l.value}var f=d,p=f[0],m=f[1],y=t.concat(p);if(!(s&&o.indexOf(y.join("."))>=0)){if(!r(m))return{keyPath:y.join("."),value:m};if(typeof m=="object"&&(n=Ei(m,y,r,a,o),n))return n}}return!1}function bb(e){return e===void 0&&(e={}),function(){return function(p){return function(m){return p(m)}}};var t=e,r=t.isSerializable,a=r===void 0?ul:r,o=t.getEntries,n=t.ignoredActions,i=n===void 0?[]:n,s=t.ignoredActionPaths,c=s===void 0?["meta.arg"]:s,u=t.ignoredPaths,l=u===void 0?[]:u,d=t.warnAfter,f=d===void 0?32:d;return function(p){return function(m){return function(y){if(i.length&&i.indexOf(y.type)!==-1)return m(y);var x=Kp(f,"SerializableStateInvariantMiddleware");x.measureTime(function(){var b=Ei(y,[],a,o,c);if(b){var N=b.keyPath,Q=b.value;console.error("A non-serializable value was detected in an action, in the path: `"+N+"`. Value:",Q,`
Take a look at the logic that dispatched this action: `,y,`
(See https://redux.js.org/faq/actions#why-should-type-be-a-string-or-at-least-serializable-why-should-my-action-types-be-constants)`,`
(To allow non-serializable values see: https://redux-toolkit.js.org/usage/usage-guide#working-with-non-serializable-data)`)}});var F=m(y);return x.measureTime(function(){var b=p.getState(),N=Ei(b,[],a,o,l);if(N){var Q=N.keyPath,J=N.value;console.error("A non-serializable value was detected in the state, in the path: `"+Q+"`. Value:",J,`
Take a look at the reducer(s) handling this action type: `+y.type+`.
(See https://redux.js.org/faq/organizing-state#can-i-put-functions-promises-or-other-non-serializable-items-in-my-store-state)`)}}),x.warnIfExceeded(),F}}}}function Cb(e){return typeof e=="boolean"}function Rb(){return function(t){return wi(t)}}function wi(e){e===void 0&&(e={});var t=e,r=t.thunk,a=r===void 0?!0:r,o=t.immutableCheck,n=o===void 0?!0:o,i=t.serializableCheck,s=i===void 0?!0:i,c=new Gp;if(a&&(Cb(a)?c.push(xn):c.push(xn.withExtraArgument(a.extraArgument))),!1){if(n)var u;if(s)var l}return c}var vb=!0;function ll(e){var t=Rb(),r=e||{},a=r.reducer,o=a===void 0?void 0:a,n=r.middleware,i=n===void 0?t():n,s=r.devTools,c=s===void 0?!0:s,u=r.preloadedState,l=u===void 0?void 0:u,d=r.enhancers,f=d===void 0?void 0:d,p;if(typeof o=="function")p=o;else if(Pi(o))p=(0,Pt.combineReducers)(o);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var m=Pt.applyMiddleware.apply(void 0,typeof i=="function"?i(t):i),y=Pt.compose;c&&(y=yb(Fr({trace:!vb},typeof c=="object"&&c)));var x=[m];Array.isArray(f)?x=[m].concat(f):typeof f=="function"&&(x=f(x));var F=y.apply(void 0,x);return(0,Pt.createStore)(p,l,F)}function h(e,t){function r(){if(t){var a=t.apply(void 0,arguments);if(!a)throw new Error("prepareAction did not return an object");return Fr({type:e,payload:a.payload},"meta"in a&&{meta:a.meta},{},"error"in a&&{error:a.error})}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(a){return a.type===e},r}function Ab(e){return Pi(e)&&typeof e.type=="string"&&Object.keys(e).every(Pb)}function Pb(e){return["type","payload","error","meta"].indexOf(e)>-1}function Eb(e){return""+e}function rf(e){var t={},r=[],a,o={addCase:function(i,s){var c=typeof i=="string"?i:i.type;if(c in t)throw new Error("addCase cannot be called with two reducers for the same action type");return t[c]=s,o},addMatcher:function(i,s){return r.push({matcher:i,reducer:s}),o},addDefaultCase:function(i){return a=i,o}};return e(o),[t,r,a]}function E(e,t,r,a){r===void 0&&(r=[]);var o=typeof t=="function"?rf(t):[t,r,a],n=o[0],i=o[1],s=o[2];return function(c,u){c===void 0&&(c=e);var l=[n[u.type]].concat(i.filter(function(d){var f=d.matcher;return f(u)}).map(function(d){var f=d.reducer;return f}));return l.filter(function(d){return!!d}).length===0&&(l=[s]),l.reduce(function(d,f){if(f)if(lt(d)){var p=d,m=f(p,u);return typeof m=="undefined"?d:m}else{if(Kt(d))return Sn(d,function(x){return f(x,u)});var y=f(d,u);if(typeof y=="undefined"){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return d},c)}}function wb(e,t){return e+"/"+t}function Ob(e){var t=e.name,r=e.initialState;if(!t)throw new Error("`name` is a required option for createSlice");var a=e.reducers||{},o=typeof e.extraReducers=="undefined"?[]:typeof e.extraReducers=="function"?rf(e.extraReducers):[e.extraReducers],n=o[0],i=n===void 0?{}:n,s=o[1],c=s===void 0?[]:s,u=o[2],l=u===void 0?void 0:u,d=Object.keys(a),f={},p={},m={};d.forEach(function(F){var b=a[F],N=wb(t,F),Q,J;"reducer"in b?(Q=b.reducer,J=b.prepare):Q=b,f[F]=Q,p[N]=Q,m[F]=J?h(N,J):h(N)});var y=Fr({},i,{},p),x=E(r,y,c,l);return{name:t,reducer:x,actions:m,caseReducers:f}}function qb(){return{ids:[],entities:{}}}function Ib(){function e(t){return t===void 0&&(t={}),Object.assign(qb(),t)}return{getInitialState:e}}function Tb(){function e(t){var r=function(l){return l.ids},a=function(l){return l.entities},o=Jt(r,a,function(u,l){return u.map(function(d){return l[d]})}),n=function(l,d){return d},i=function(l,d){return l[d]},s=Jt(r,function(u){return u.length});if(!t)return{selectIds:r,selectEntities:a,selectAll:o,selectTotal:s,selectById:Jt(a,n,i)};var c=Jt(t,a);return{selectIds:Jt(t,r),selectEntities:c,selectAll:Jt(t,o),selectTotal:Jt(t,s),selectById:Jt(c,n,i)}}return{getSelectors:e}}function kb(e){var t=ke(function(r,a){return e(a)});return function(a){return t(a,void 0)}}function ke(e){return function(r,a){function o(i){return Ab(i)}var n=function(s){o(a)?e(a.payload,s):e(a,s)};return lt(r)?(n(r),r):Sn(r,n)}}function Na(e,t){var r=t(e);return r}function af(e){function t(f,p){var m=Na(f,e);m in p.entities||(p.ids.push(m),p.entities[m]=f)}function r(f,p){Array.isArray(f)||(f=Object.values(f));for(var m=f,y=Array.isArray(m),x=0,m=y?m:m[Symbol.iterator]();;){var F;if(y){if(x>=m.length)break;F=m[x++]}else{if(x=m.next(),x.done)break;F=x.value}var b=F;t(b,p)}}function a(f,p){Array.isArray(f)||(f=Object.values(f)),p.ids=[],p.entities={},r(f,p)}function o(f,p){return n([f],p)}function n(f,p){var m=!1;f.forEach(function(y){y in p.entities&&(delete p.entities[y],m=!0)}),m&&(p.ids=p.ids.filter(function(y){return y in p.entities}))}function i(f){Object.assign(f,{ids:[],entities:{}})}function s(f,p,m){var y=m.entities[p.id],x=Object.assign({},y,p.changes),F=Na(x,e),b=F!==p.id;return b&&(f[p.id]=F,delete m.entities[p.id]),m.entities[F]=x,b}function c(f,p){return u([f],p)}function u(f,p){var m={},y={};f.forEach(function(b){b.id in p.entities&&(y[b.id]={id:b.id,changes:Fr({},y[b.id]?y[b.id].changes:null,{},b.changes)})}),f=Object.values(y);var x=f.length>0;if(x){var F=f.filter(function(b){return s(m,b,p)}).length>0;F&&(p.ids=p.ids.map(function(b){return m[b]||b}))}}function l(f,p){return d([f],p)}function d(f,p){Array.isArray(f)||(f=Object.values(f));for(var m=[],y=[],x=f,F=Array.isArray(x),b=0,x=F?x:x[Symbol.iterator]();;){var N;if(F){if(b>=x.length)break;N=x[b++]}else{if(b=x.next(),b.done)break;N=b.value}var Q=N,J=Na(Q,e);J in p.entities?y.push({id:J,changes:Q}):m.push(Q)}u(y,p),r(m,p)}return{removeAll:kb(i),addOne:ke(t),addMany:ke(r),setAll:ke(a),updateOne:ke(c),updateMany:ke(u),upsertOne:ke(l),upsertMany:ke(d),removeOne:ke(o),removeMany:ke(n)}}function Db(e,t){var r=af(e),a=r.removeOne,o=r.removeMany,n=r.removeAll;function i(x,F){return s([x],F)}function s(x,F){Array.isArray(x)||(x=Object.values(x));var b=x.filter(function(N){return!(Na(N,e)in F.entities)});b.length!==0&&y(b,F)}function c(x,F){Array.isArray(x)||(x=Object.values(x)),F.entities={},F.ids=[],s(x,F)}function u(x,F){return d([x],F)}function l(x,F,b){if(!(F.id in b.entities))return!1;var N=b.entities[F.id],Q=Object.assign({},N,F.changes),J=Na(Q,e);return delete b.entities[F.id],x.push(Q),J!==F.id}function d(x,F){var b=[];x.forEach(function(N){return l(b,N,F)}),b.length!==0&&y(b,F)}function f(x,F){return p([x],F)}function p(x,F){Array.isArray(x)||(x=Object.values(x));for(var b=[],N=[],Q=x,J=Array.isArray(Q),re=0,Q=J?Q:Q[Symbol.iterator]();;){var X;if(J){if(re>=Q.length)break;X=Q[re++]}else{if(re=Q.next(),re.done)break;X=re.value}var R=X,U=Na(R,e);U in F.entities?N.push({id:U,changes:R}):b.push(R)}d(N,F),s(b,F)}function m(x,F){if(x.length!==F.length)return!1;for(var b=0;b<x.length&&b<F.length;b++)if(x[b]!==F[b])return!1;return!0}function y(x,F){x.sort(t),x.forEach(function(J){F.entities[e(J)]=J});var b=Object.values(F.entities);b.sort(t);var N=b.map(e),Q=F.ids;m(Q,N)||(F.ids=N)}return{removeOne:a,removeMany:o,removeAll:n,addOne:ke(i),updateOne:ke(u),upsertOne:ke(f),setAll:ke(c),addMany:ke(s),updateMany:ke(d),upsertMany:ke(p)}}function Vb(e){e===void 0&&(e={});var t=Fr({sortComparer:!1,selectId:function(c){return c.id}},e),r=t.selectId,a=t.sortComparer,o=Ib(),n=Tb(),i=a?Db(r,a):af(r);return Fr({selectId:r,sortComparer:a},o,{},n,{},i)}var Qq=typeof Symbol!="undefined"?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator",Lq=typeof Symbol!="undefined"?Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")):"@@asyncIterator";function Nb(e,t){try{var r=e()}catch(a){return t(a)}return r&&r.then?r.then(void 0,t):r}var Mb="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",of=function(t){t===void 0&&(t=21);for(var r="",a=t;a--;)r+=Mb[Math.random()*64|0];return r},Qb=["name","message","stack","code"],Oi=function(t){this.payload=t,this.name="RejectWithValue",this.message="Rejected"},Lb=function(t){if(typeof t=="object"&&t!==null){for(var r={},a=Qb,o=Array.isArray(a),n=0,a=o?a:a[Symbol.iterator]();;){var i;if(o){if(n>=a.length)break;i=a[n++]}else{if(n=a.next(),n.done)break;i=n.value}var s=i;typeof t[s]=="string"&&(r[s]=t[s])}return r}return{message:String(t)}};function Z(e,t,r){var a=h(e+"/fulfilled",function(u,l,d){return{payload:u,meta:{arg:d,requestId:l,requestStatus:"fulfilled"}}}),o=h(e+"/pending",function(u,l){return{payload:void 0,meta:{arg:l,requestId:u,requestStatus:"pending"}}}),n=h(e+"/rejected",function(u,l,d){var f=u instanceof Oi,p=!!u&&u.name==="AbortError",m=!!u&&u.name==="ConditionError";return{payload:u instanceof Oi?u.payload:void 0,error:(r&&r.serializeError||Lb)(u||"Rejected"),meta:{arg:d,requestId:l,rejectedWithValue:f,requestStatus:"rejected",aborted:p,condition:m}}}),i=!1,s=typeof AbortController!="undefined"?AbortController:function(){function u(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){}}}var l=u.prototype;return l.abort=function(){},u}();function c(u){return function(l,d,f){var p=of(),m=new s,y,x=new Promise(function(Q,J){return m.signal.addEventListener("abort",function(){return J({name:"AbortError",message:y||"Aborted"})})}),F=!1;function b(Q){F&&(y=Q,m.abort())}var N=function(){try{var Q=function(U){if(J)return U;var se=r&&!r.dispatchConditionRejection&&n.match(re)&&re.meta.condition;return se||l(re),re},J=!1,re,X=Nb(function(){if(r&&r.condition&&r.condition(u,{getState:d,extra:f})===!1)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return F=!0,l(o(p,u)),Promise.resolve(Promise.race([x,Promise.resolve(t(u,{dispatch:l,getState:d,extra:f,requestId:p,signal:m.signal,rejectWithValue:function(U){return new Oi(U)}})).then(function(R){return R instanceof Oi?n(R,p,u):a(R,p,u)})])).then(function(R){re=R})},function(R){re=n(R,p,u)});return Promise.resolve(X&&X.then?X.then(Q):Q(X))}catch(R){return Promise.reject(R)}}();return Object.assign(N,{abort:b,requestId:p,arg:u})}}return Object.assign(c,{pending:o,rejected:n,fulfilled:a,typePrefix:e})}function jb(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}var Bb=function(t){return t&&typeof t.match=="function"},nf=function(t,r){return Bb(t)?t.match(r):t(r)};function Fn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(a){return t.some(function(o){return nf(o,a)})}}function dl(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(a){return t.every(function(o){return nf(o,a)})}}function qi(e,t){if(!e||!e.meta)return!1;var r=typeof e.meta.requestId=="string",a=t.indexOf(e.meta.requestStatus)>-1;return r&&a}function bn(e){return typeof e[0]=="function"&&"pending"in e[0]&&"fulfilled"in e[0]&&"rejected"in e[0]}function sf(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(a){return qi(a,["pending"])}:bn(t)?function(a){var o=t.map(function(i){return i.pending}),n=Fn.apply(void 0,o);return n(a)}:sf()(t[0])}function Ii(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(a){return qi(a,["rejected"])}:bn(t)?function(a){var o=t.map(function(i){return i.rejected}),n=Fn.apply(void 0,o);return n(a)}:Ii()(t[0])}function cf(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a=function(n){return n&&n.meta&&n.meta.rejectedWithValue};return t.length===0?function(o){var n=dl(Ii.apply(void 0,t),a);return n(o)}:bn(t)?function(o){var n=dl(Ii.apply(void 0,t),a);return n(o)}:cf()(t[0])}function uf(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(a){return qi(a,["fulfilled"])}:bn(t)?function(a){var o=t.map(function(i){return i.fulfilled}),n=Fn.apply(void 0,o);return n(a)}:uf()(t[0])}function lf(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(a){return qi(a,["pending","fulfilled","rejected"])}:bn(t)?function(a){for(var o=[],n=t,i=Array.isArray(n),s=0,n=i?n:n[Symbol.iterator]();;){var c;if(i){if(s>=n.length)break;c=n[s++]}else{if(s=n.next(),s.done)break;c=s.value}var u=c;o.push(u.pending,u.rejected,u.fulfilled)}var l=Fn.apply(void 0,o);return l(a)}:lf()(t[0])}Bp();function Ub(e){return{statusCode:e.statusCode,type:e.name,message:e.message}}function Ti(e){if(e instanceof da)return{error:Ub(e)};throw e}var Et=(e,t,r,a)=>({accessToken:e.accessToken,method:t,contentType:r,url:`${e.url}${a}?${$b(e)}`}),$b=e=>`organizationId=${e.organizationId}`;function df(e){return((e.headers.get("content-type")||"").split(";").find(a=>a.indexOf("charset=")!==-1)||"").split("=")[1]||"UTF-8"}var pf=TextDecoder;function Xt(e){let{url:t,accessToken:r,organizationId:a,...o}=e;return o}var Zt=e=>{let{response:t}=e;return t.body?_b(e):Hb(t)},_b=e=>Wb(e)?Yb(e):zb(e)?e.body:{message:"unknown",statusCode:0,type:"unknown"},Hb=e=>{let t=JSON.parse(JSON.stringify(e,Object.getOwnPropertyNames(e)));return{...t,message:`Client side error: ${t.message||""}`,statusCode:400,type:"ClientError"}};function zb(e){return e.body.statusCode!==void 0}function Wb(e){return e.body.exception!==void 0}var Yb=e=>({message:e.body.exception.code,statusCode:e.response.status,type:e.body.exception.code});var ff=async(e,t)=>{let r=await nt.call({...Et(e,"POST","application/x-www-form-urlencoded","/html"),requestParams:Xt(e),...t});if(r instanceof Error)throw r;let a=df(r),o=await r.arrayBuffer(),i=new pf(a).decode(o);return Kb(i)?{success:i}:{error:Zt({response:r,body:i})}};function Kb(e){return typeof e=="string"}var Cn=class{constructor(t){this.options=t;this.searchAbortController=null}async plan(t){let r=await nt.call({...Et(t,"POST","application/json","/plan"),requestParams:Xt(t),...this.options});if(r instanceof Error)return Ti(r);let a=await r.json();return Jb(a)?{success:a}:{error:Zt({response:r,body:a})}}async querySuggest(t){let r=await nt.call({...Et(t,"POST","application/json","/querySuggest"),requestParams:Xt(t),...this.options});if(r instanceof Error)return Ti(r);let a=await r.json(),o={response:r,body:a};return Gb(a)?{success:(await this.options.postprocessQuerySuggestResponseMiddleware(o)).body}:{error:Zt(o)}}async search(t){var n;this.searchAbortController&&(this.options.logger.warn("Cancelling current pending search query"),this.searchAbortController.abort()),this.searchAbortController=this.getAbortControllerInstanceIfAvailable();let r=await nt.call({...Et(t,"POST","application/json",""),requestParams:Xt(t),...this.options,signal:(n=this.searchAbortController)==null?void 0:n.signal});if(r instanceof Error)return Ti(r);this.searchAbortController=null;let a=await r.json(),o={response:r,body:a};return fl(a)?(o.body=Zb(a),{success:(await this.options.postprocessSearchResponseMiddleware(o)).body}):{error:Zt(o)}}async facetSearch(t){let r=await nt.call({...Et(t,"POST","application/json","/facet"),requestParams:Xt(t),...this.options});if(r instanceof Error)throw r;let a=await r.json(),o={response:r,body:a};return(await this.options.postprocessFacetSearchResponseMiddleware(o)).body}async recommendations(t){let r=await nt.call({...Et(t,"POST","application/json",""),requestParams:Xt(t),...this.options});if(r instanceof Error)throw r;let a=await r.json();return fl(a)?{success:a}:{error:Zt({response:r,body:a})}}async html(t){return ff(t,this.options)}async productRecommendations(t){let r=await nt.call({...Et(t,"POST","application/json",""),requestParams:Xt(t),...this.options});if(r instanceof Error)throw r;let a=await r.json();return fl(a)?{success:a}:{error:Zt({response:r,body:a})}}async fieldDescriptions(t){let r=await nt.call({...Et(t,"GET","application/json","/fields"),requestParams:{},...this.options});if(r instanceof Error)throw r;let a=await r.json();return Xb(a)?{success:a}:{error:Zt({response:r,body:a})}}getAbortControllerInstanceIfAvailable(){if(typeof window=="undefined"){let t=mf();return new t}return typeof AbortController=="undefined"?null:new AbortController}};var ue=e=>e.error!==void 0;function Gb(e){return e.completions!==void 0}function Jb(e){return e.preprocessingOutput!==void 0}function Xb(e){return e.fields!==void 0}function fl(e){return e.results!==void 0}function Zb(e){let t=Qu();return te(e.questionAnswer)?(e.questionAnswer=t,e):(e.questionAnswer={...t,...e.questionAnswer},e)}var I=new A({required:!0,emptyAllowed:!1}),me=new A({required:!1,emptyAllowed:!1}),le=new A({required:!0,emptyAllowed:!0}),er=({message:e,name:t,stack:r})=>({message:e,name:t,stack:r}),je=(e,t)=>{if("required"in t)return{payload:new W({value:t}).validate({value:e}).value};let o=new j({options:{required:!0},values:t}).validate(e);if(o)throw new fn(o);return{payload:e}},S=(e,t)=>{try{return je(e,t)}catch(r){return{payload:e,error:er(r)}}},we=(e,t,r,a)=>{let o=`Check the initialState of ${a}`;return gf(e,t,r,o,"Controller initialization error")},de=(e,t,r,a)=>{let o=`Check the options of ${a}`;return gf(e,t,r,o,"Controller initialization error")},gf=(e,t,r,a,o)=>{try{return t.validate(r,a)}catch(n){throw e.logger.error(n,o),n}};var bf=xe(ml()),Di=(e,t=5)=>e+Math.random().toString(36).substring(2,2+t);function Vi(e){return Array.isArray(e)}function Ni(e){return e.trim()===""}function Cf(e,t){return Object.values(e.reduce((r,a,o)=>({...r,[t(a,o)]:a}),{}))}function Rf(e){return(typeof btoa!="undefined"?btoa:bf.btoa)(encodeURI(e))}function Mi(e){let t=vf(e),r=[e,...t].filter(o=>o.parentResult).map(o=>o.parentResult);return Cf([e,...t,...r],o=>o.uniqueId)}function vf(e){return e.childResults?e.childResults.flatMap(t=>[t,...vf(t)]):[]}var k=(a=>(a[a.Search=0]="Search",a[a.Custom=1]="Custom",a[a.Click=2]="Click",a))(k||{}),cC=e=>e(),D=(e,t,r,a=o=>new ei(o))=>Z(e,async(o,{getState:n,extra:{analyticsClientMiddleware:i,preprocessRequest:s,logger:c}})=>{let u=cC(n),l=fp({state:u,logger:c,analyticsClientMiddleware:i,preprocessRequest:s,provider:a(u)}),d=await r(l,u);return c.info({client:l.coveoAnalyticsClient,response:d},"Analytics response"),{analyticsType:t}}),uC=e=>Z("analytics/noop",async()=>({analyticsType:e})),TI=uC(0);var br=(e,t)=>{var n;let r=i=>{var s,c;return i+((c=(s=t.pagination)==null?void 0:s.firstResult)!=null?c:0)},a=-1,o=(n=t.search)==null?void 0:n.results;return a=Pf(e,o),a<0&&(a=gC(e,o)),a<0&&(a=0),lC(e,r(a),t)};function lC(e,t,r){let a=e.raw.collection;return{collectionName:typeof a=="string"?a:"default",documentAuthor:fC(e),documentPosition:t+1,documentTitle:e.title,documentUri:e.uri,documentUriHash:e.raw.urihash,documentUrl:e.clickUri,rankingModifier:e.rankingModifier||"",sourceName:mC(e),queryPipeline:r.pipeline||Ye()}}var tr=e=>(e.raw.permanentid||console.warn("Missing field permanentid on result. This might cause many issues with your Coveo deployment. See https://docs.coveo.com/en/1913 and https://docs.coveo.com/en/1640 for more information.",e),{contentIDKey:"permanentid",contentIDValue:e.raw.permanentid||""}),Af={urihash:new A,sourcetype:new A,permanentid:new A},Qi={uniqueId:I,raw:new j({values:Af}),title:I,uri:I,clickUri:I,rankingModifier:new A({required:!1,emptyAllowed:!0})};function dC(e){return Object.assign({},...Object.keys(Af).map(t=>({[t]:e[t]})))}function pC(e){return Object.assign({},...Object.keys(Qi).map(t=>({[t]:e[t]})),{raw:dC(e.raw)})}function fC(e){let t=e.raw.author;return te(t)?"unknown":Array.isArray(t)?t.join(";"):`${t}`}function mC(e){let t=e.raw.source;return te(t)?"unknown":t}var dt=e=>new W(Qi).validate(pC(e));function gC(e,t){for(let[r,a]of t.entries()){let o=Mi(a);if(Pf(e,o)!==-1)return r}return-1}function Pf(e,t=[]){return t.findIndex(({uniqueId:r})=>r===e.uniqueId)}var Ef=D("analytics/recommendation/update",k.Search,e=>e.logRecommendationInterfaceLoad());var wf=h("recommendation/set",e=>S(e,{id:I})),Ma=Z("recommendation/get",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:a}})=>{let o=t(),n=new Date().getTime(),i=await a.recommendations(await hC(o)),s=new Date().getTime()-n;return ue(i)?r(i.error):{recommendations:i.success.results,analyticsAction:Ef(),duration:s,searchUid:i.success.searchUid}}),hC=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,recommendation:e.recommendation.id,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,locale:e.configuration.search.locale,actionsHistory:e.configuration.analytics.enabled?ct.getHistory():[],...e.advancedSearchQueries&&{aq:e.advancedSearchQueries.aq,cq:e.advancedSearchQueries.cq},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub},...e.context&&{context:e.context.contextValues},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.fields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.configuration.analytics.enabled&&{visitorId:await be()},...e.configuration.analytics.enabled&&await mr(e.configuration.analytics)});var gl=h("history/undo"),hl=h("history/redo"),rr=h("history/snapshot"),Rn=Z("history/back",async(e,{dispatch:t})=>{t(gl()),await t(ie())}),Li=Z("history/forward",async(e,{dispatch:t})=>{t(hl()),await t(ie())}),ie=Z("history/change",async(e,{getState:t})=>t().history.present);var ji=D("analytics/didyoumean/click",k.Search,e=>e.logDidYouMeanClick()),Of=D("analytics/didyoumean/automatic",k.Search,e=>e.logDidYouMeanAutomatic());var Qa=h("didYouMean/enable"),Bi=h("didYouMean/disable"),wt=h("didYouMean/correction",e=>S(e,I));var pt=h("query/updateQuery",e=>S(e,{q:new A,enableQuerySyntax:new Y}));var qf=D("search/logFetchMoreResults",k.Search,e=>e.logFetchMoreResults()),ra=e=>D("search/queryError",k.Search,(t,r)=>{var a,o,n;return t.logQueryError({query:((a=r.query)==null?void 0:a.q)||Pe().q,aq:((o=r.advancedSearchQueries)==null?void 0:o.aq)||Qe().aq,cq:((n=r.advancedSearchQueries)==null?void 0:n.cq)||Qe().cq,dq:"",errorType:e.type,errorMessage:e.message})})();var An=xe(pa());var Ui=xe(pa()),If=xe(xl());Ui.default.extend(If.default);var Fl="YYYY/MM/DD@HH:mm:ss",yC="1401-01-01";function vn(e){return e.format(Fl)}function Tf(e){return vn((0,Ui.default)(e))===e}function $i(e,t){let r=(0,Ui.default)(e,t);if(!r.isValid()){let a=". Please provide a date format string in the configuration options. See https://day.js.org/docs/en/parse/string-format for more information.",o=` with the format "${t}""`;throw new Error(`Could not parse the provided date "${e}"${t?o:a}`)}bl(r)}function bl(e){if(e.isBefore(yC))throw new Error(`Date is before year 1401, which is unsupported by the API: ${e}`)}var Df=xe(kf());An.default.extend(Df.default);var Vf=["past","now","next"],Nf=["minute","hour","day","week","month","quarter","year"],SC=e=>{let t=e==="now";return{amount:new L({required:!t,min:1}),unit:new A({required:!t,constrainTo:Nf}),period:new A({required:!0,constrainTo:Vf})}};function Cr(e){if(typeof e=="string"&&!Ot(e))throw new Error(`The value "${e}" is not respecting the relative date format "period-amount-unit"`);let t=typeof e=="string"?vl(e):e;new W(SC(t.period)).validate(t);let r=Qf(t),a=JSON.stringify(t);if(!r.isValid())throw new Error(`Date is invalid: ${a}`);bl(r)}function Mf(e){let{period:t,amount:r,unit:a}=e;switch(t){case"past":case"next":return`${t}-${r}-${a}`;case"now":return t}}function Qf(e){let{period:t,amount:r,unit:a}=e;switch(t){case"past":return(0,An.default)().subtract(r,a);case"next":return(0,An.default)().add(r,a);case"now":return(0,An.default)()}}function Pn(e){return vn(Qf(vl(e)))}function Lf(e){return e.toLocaleLowerCase().split("-")}function Ot(e){let[t,r,a]=Lf(e);if(t==="now")return!0;if(!Vf.includes(t)||!Nf.includes(a))return!1;let o=parseInt(r);return!(isNaN(o)||o<=0)}function jf(e){return!!e&&typeof e=="object"&&"period"in e}function vl(e){let[t,r,a]=Lf(e);return t==="now"?{period:"now"}:{period:t,amount:r?parseInt(r):void 0,unit:a||void 0}}function Bf(e){return Cr(e),vl(e)}function Uf(e){return e.type==="dateRange"}function $f(e){return`start${e}`}function _f(e){return`end${e}`}var xC=()=>({dateFacetValueMap:{}});function FC(e,t,r){let a=e.start,o=e.end;return Ot(a)&&(a=Pn(a),r.dateFacetValueMap[t][$f(a)]=e.start),Ot(o)&&(o=Pn(o),r.dateFacetValueMap[t][_f(o)]=e.end),{...e,start:a,end:o}}function bC(e,t){if(Uf(e)){let{facetId:r,currentValues:a}=e;return t.dateFacetValueMap[r]={},{...e,currentValues:a.map(o=>FC(o,r,t))}}return e}function Hf(e){var a;let t=xC();return{request:{...e,facets:(a=e.facets)==null?void 0:a.map(o=>bC(o,t))},mappings:t}}function CC(e,t,r){return{...e,start:r.dateFacetValueMap[t][$f(e.start)]||e.start,end:r.dateFacetValueMap[t][_f(e.end)]||e.end}}function RC(e,t){return e.facetId in t.dateFacetValueMap}function vC(e,t){return RC(e,t)?{...e,values:e.values.map(r=>CC(r,e.facetId,t))}:e}function zf(e,t){var r;return"success"in e?{success:{...e.success,facets:(r=e.success.facets)==null?void 0:r.map(o=>vC(o,t))}}:e}var _i=new L({required:!0,min:0}),La=h("pagination/registerNumberOfResults",e=>S(e,_i)),ja=h("pagination/updateNumberOfResults",e=>S(e,_i)),Ba=h("pagination/registerPage",e=>S(e,_i)),qt=h("pagination/updatePage",e=>S(e,_i)),Ua=h("pagination/nextPage"),$a=h("pagination/previousPage");function _a(e,t){let r={};e.forEach(n=>r[n.facetId]=n);let a=[];t.forEach(n=>{n in r&&(a.push(r[n]),delete r[n])});let o=Object.values(r);return[...a,...o]}var Hi=async e=>{var t,r,a,o;return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{visitorId:await be(),actionsHistory:ct.getHistory()},...((t=e.advancedSearchQueries)==null?void 0:t.aq)&&{aq:e.advancedSearchQueries.aq},...((r=e.advancedSearchQueries)==null?void 0:r.cq)&&{cq:e.advancedSearchQueries.cq},...((a=e.advancedSearchQueries)==null?void 0:a.lq)&&{lq:e.advancedSearchQueries.lq},...((o=e.advancedSearchQueries)==null?void 0:o.dq)&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&await mr(e.configuration.analytics),...e.excerptLength&&!te(e.excerptLength.length)&&{excerptLength:e.excerptLength.length}}};var ar=async e=>{var o;let t=OC(e),r=AC(e),a=await Hi(e);return Hf({...a,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},...t&&{cq:t},...r.length&&{facets:r},...e.pagination&&{numberOfResults:e.pagination.numberOfResults,firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:{freezeFacetOrder:e.facetOptions.freezeFacetOrder}},...((o=e.folding)==null?void 0:o.enabled)&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange}})};function AC(e){var t;return _a(PC(e),(t=e.facetOrder)!=null?t:[])}function PC(e){return EC(e).filter(({facetId:t})=>{var r,a,o;return(o=(a=(r=e.facetOptions)==null?void 0:r.facets[t])==null?void 0:a.enabled)!=null?o:!0})}function EC(e){return[...Al(e.facetSet),...Al(e.numericFacetSet),...Al(e.dateFacetSet),...wC(e.categoryFacetSet)]}function wC(e){return Object.values(e||{}).map(t=>t.request)}function Al(e={}){return Object.keys(e).map(t=>e[t])}function OC(e){var n;let t=((n=e.advancedSearchQueries)==null?void 0:n.cq.trim())||"",r=Object.values(e.tabSet||{}).find(i=>i.isActive),a=(r==null?void 0:r.expression.trim())||"",o=qC(e);return[t,a,...o].filter(i=>!!i).join(" AND ")}function qC(e){return Object.values(e.staticFilterSet||{}).map(r=>{let a=r.values.filter(n=>n.state==="selected"&&!!n.expression.trim()),o=a.map(n=>n.expression).join(" OR ");return a.length>1?`(${o})`:o})}var Oe=h("breadcrumb/deselectAll");var Ge=h("facet/deselectAllFacets"),It=h("facet/updateFacetAutoSelection",e=>S(e,{allow:new Y({required:!0})}));var zi=async(e,t,{request:r,mappings:a})=>{var c;let o=new Date().getTime(),n=zf(await e.search(r),a),i=new Date().getTime()-o,s=((c=t.query)==null?void 0:c.q)||"";return{response:n,duration:i,queryExecuted:s,requestExecuted:r}},Wi=Z("search/prepareForSearchWithQuery",(e,t)=>{let{dispatch:r}=t;S(e,{q:new A,enableQuerySyntax:new Y}),r(Oe()),r(It({allow:!0})),r(pt(e)),r(qt(1))}),v=Z("search/executeSearch",async(e,{getState:t,dispatch:r,rejectWithValue:a,extra:o})=>{let n=t();NC(n);let i=await zi(o.apiClient,n,await ar(n));if(ue(i.response))return r(ra(i.response.error)),a(i.response.error);if(!kC(n,i.response.success))return r(rr(Ea(n))),{...i,response:i.response.success,automaticallyCorrected:!1,originalQuery:Yi(n),analyticsAction:e};let{correctedQuery:s}=i.response.success.queryCorrections[0],c=await TC(o.apiClient,s,t,r);if(ue(c.response))return r(ra(c.response.error)),a(c.response.error);let u=i.response.success;return e(r,()=>IC(i.queryExecuted,i.duration,n,u),o),r(rr(Ea(t()))),{...c,response:{...c.response.success,queryCorrections:i.response.success.queryCorrections},automaticallyCorrected:!0,originalQuery:Yi(n),analyticsAction:Of()}}),Tt=Z("search/fetchMoreResults",async(e,{getState:t,dispatch:r,rejectWithValue:a,extra:{apiClient:o}})=>{let n=t(),i=await zi(o,n,await DC(n));return ue(i.response)?(r(ra(i.response.error)),a(i.response.error)):(r(rr(Ea(n))),{...i,response:i.response.success,automaticallyCorrected:!1,originalQuery:Yi(n),analyticsAction:qf()})}),Be=Z("search/fetchFacetValues",async(e,{getState:t,dispatch:r,rejectWithValue:a,extra:{apiClient:o}})=>{let n=t(),i=await zi(o,n,await VC(n));return ue(i.response)?(r(ra(i.response.error)),a(i.response.error)):(r(rr(Ea(n))),{...i,analyticsAction:e,response:i.response.success,automaticallyCorrected:!1,originalQuery:Yi(n)})}),IC=(e,t,r,a)=>{var o,n;return{...r,query:{q:e,enableQuerySyntax:(n=(o=r.query)==null?void 0:o.enableQuerySyntax)!=null?n:Pe().enableQuerySyntax},search:{...$e(),duration:t,response:a,results:a.results}}},TC=async(e,t,r,a)=>{a(pt({q:t}));let o=await zi(e,r(),await ar(r()));return a(wt(t)),o},kC=(e,t)=>{var r;return((r=e.didYouMean)==null?void 0:r.enableDidYouMean)===!0&&t.results.length===0&&t.queryCorrections.length!==0},DC=async e=>{var r,a,o,n;let t=await ar(e);return t.request={...t.request,firstResult:((a=(r=e.pagination)==null?void 0:r.firstResult)!=null?a:0)+((n=(o=e.search)==null?void 0:o.results.length)!=null?n:0)},t},VC=async e=>{let t=await ar(e);return t.request.numberOfResults=0,t},NC=e=>{var t;e.configuration.analytics.enabled&&ct.addElement({name:"Query",...((t=e.query)==null?void 0:t.q)&&{value:e.query.q},time:JSON.stringify(new Date)})},Yi=e=>{var t;return((t=e.query)==null?void 0:t.q)!==void 0?e.query.q:""};var Wf=["permanentid","ec_name","ec_brand","ec_category","ec_price","ec_promo_price","ec_shortdesc","ec_thumbnails","ec_images","ec_in_stock","ec_rating","childResults","totalNumberOfChildResults"];var Ha=()=>({id:"",skus:[],maxNumberOfRecommendations:5,filter:{brand:"",category:""},additionalFields:[],recommendations:[],error:null,isLoading:!1,searchUid:"",duration:0});var Pl=class{constructor(t){this.state=t;this.initialState=Ha()}getLanguage(){return Gn(this.state)}getSearchEventRequestPayload(){return{queryText:"",responseTime:this.responseTime,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getBaseMetadata(){var t;return{recommendation:((t=this.state.productRecommendations)==null?void 0:t.id)||this.initialState.id}}getSearchUID(){var t;return((t=this.state.productRecommendations)==null?void 0:t.searchUid)||this.initialState.searchUid}getPipeline(){return""}getOriginContext(){return this.state.configuration.analytics.originContext}getOriginLevel1(){return this.state.searchHub||Ee()}getOriginLevel2(){return this.state.configuration.analytics.originLevel2}getOriginLevel3(){return this.state.configuration.analytics.originLevel3}getIsAnonymous(){return this.state.configuration.analytics.anonymous}mapResultsToAnalyticsDocument(){return[]}get responseTime(){var t;return((t=this.state.productRecommendations)==null?void 0:t.duration)||this.initialState.duration}get numberOfResults(){var t;return((t=this.state.productRecommendations)==null?void 0:t.recommendations.length)||this.initialState.recommendations.length}};var Yf=D("analytics/productrecommendations/load",k.Search,e=>e.logRecommendationInterfaceLoad(),e=>new Pl(e));function MC(e){return e&&"childResults"in e&&"totalNumberOfChildResults"in e}var Kf=h("productrecommendations/setId",e=>S(e,{id:I})),Gf=h("productrecommendations/setSku",e=>S(e,{skus:new K({required:!0,min:1,each:me})})),Jf=h("productrecommendations/setBrand",e=>S(e,{brand:new A({required:!0,emptyAllowed:!0})})),Xf=h("productrecommendations/setCategory",e=>S(e,{category:new A({required:!0,emptyAllowed:!0})})),Zf=h("productrecommendations/setAdditionalFields",e=>S(e,{additionalFields:new K({required:!0,each:me})})),em=h("productrecommendations/setMaxNumberOfRecommendations",e=>S(e,{number:new L({required:!0,max:50,min:1})})),za=Z("productrecommendations/get",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:a}})=>{let o=t(),n=new Date().getTime(),i=await a.productRecommendations(await QC(o)),s=new Date().getTime()-n;if(ue(i))return r(i.error);let c=o.productRecommendations.additionalFields||[];return{recommendations:i.success.results.map(u=>tm(u,{additionalFields:c})),analyticsAction:Yf(),searchUid:i.success.searchUid,duration:s}}),tm=(e,{additionalFields:t})=>{let r=e.raw.ec_price,a=e.raw.ec_promo_price,o=e.raw.ec_in_stock,n={permanentid:e.raw.permanentid,clickUri:e.clickUri,ec_name:e.raw.ec_name,ec_brand:e.raw.ec_brand,ec_category:e.raw.ec_category,ec_price:r,ec_shortdesc:e.raw.ec_shortdesc,ec_thumbnails:e.raw.ec_thumbnails,ec_images:e.raw.ec_images,ec_promo_price:a===void 0||r!==void 0&&a>=r?void 0:a,ec_in_stock:o===void 0?void 0:o.toLowerCase()==="yes"||o.toLowerCase()==="true",ec_rating:e.raw.ec_rating,additionalFields:t.reduce((i,s)=>({...i,[s]:e.raw[s]}),{}),childResults:[],totalNumberOfChildResults:0};return MC(e)&&(n.childResults=e.childResults.map(i=>tm(i,{additionalFields:t})),n.totalNumberOfChildResults=e.totalNumberOfChildResults),n},QC=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{visitorId:await be()},recommendation:e.productRecommendations.id,numberOfResults:e.productRecommendations.maxNumberOfRecommendations,fieldsToInclude:[...Wf,...e.productRecommendations.additionalFields||[]],mlParameters:{...e.productRecommendations.skus&&e.productRecommendations.skus.length>0&&{itemIds:e.productRecommendations.skus},...e.productRecommendations.filter.brand&&{brandFilter:e.productRecommendations.filter.brand},...e.productRecommendations.filter.category&&{categoryFilter:e.productRecommendations.filter.category}},actionsHistory:e.configuration.analytics.enabled?ct.getHistory():[],...e.context&&{context:e.context.contextValues},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.searchHub&&{searchHub:e.searchHub}});var Ki=e=>t=>r=>{var n,i;let a=(n=r.payload)==null?void 0:n.analyticsAction;a!==void 0&&((i=r.payload)==null||delete i.analyticsAction);let o=t(r);return r.type===v.fulfilled.type&&a===void 0&&console.error("No analytics action associated with search:",r),r.type===Ma.fulfilled&&a===void 0&&console.error("No analytics action associated with recommendation:",r),r.type===za.fulfilled&&a===void 0&&console.error("No analytics action associated with product recommendation:",r),a!==void 0&&e.dispatch(a),o};var Gi=()=>({duration:0,error:null,isLoading:!1,id:"Recommendation",recommendations:[],searchUid:""});function rm(e={}){return{configuration:Ve(),advancedSearchQueries:Qe(),context:vt(),dictionaryFieldContext:At(),fields:ba(),searchHub:Ee(),pipeline:Ye(),recommendation:Gi(),debug:Le(),version:"unit-testing-version",...e}}function am(e={}){return{configuration:Ve(),context:vt(),dictionaryFieldContext:At(),searchHub:Ee(),productRecommendations:Ha(),version:"unit-testing-version",...e}}var hm=xe(Zi());var es=e=>()=>t=>r=>{if(!r.error)return t(r);let a=r.error;if(e.error(a.stack||a.message||a.name||"Error",`Action dispatch error ${r.type}`,r),r.error.name!=="SchemaValidationError")return t(r)},ts=e=>t=>r=>a=>(e.debug({action:a,nextState:t.getState()},`Action dispatched: ${a.type}`),r(a));var lm=xe(Zi());var Ka=e=>e;var rs=e=>e,as=e=>e,os=e=>e;function Ol(e){return new Cn({logger:(0,lm.default)({level:"silent"}),preprocessRequest:Ka,postprocessSearchResponseMiddleware:rs,postprocessFacetSearchResponseMiddleware:as,postprocessQuerySuggestResponseMiddleware:os,...e})}var aa=(r=>(r.Relevance="relevance",r.Fields="fields",r))(aa||{}),dm=(r=>(r.Ascending="asc",r.Descending="desc",r))(dm||{}),pm=()=>({by:"relevance"});var nD=new j({options:{required:!1},values:{by:new Ct({enum:aa,required:!0}),fields:new K({each:new j({values:{name:new A,direction:new Ct({enum:dm})}})})}});function ns(){return pm()}function fm(e={}){return{configuration:Ve(),productListing:ga(),sort:ns(),facetSearchSet:Ca(),categoryFacetSet:yt(),categoryFacetSearchSet:Ra(),dateFacetSet:St(),facetOptions:gr(),facetOrder:hr(),facetSet:Ft(),numericFacetSet:xt(),pagination:Te(),version:"unit-testing-version",...e}}var is=()=>({caseAssistId:"",locale:"en-US"});var ss=()=>({status:{loading:!1,error:null,lastResponseId:""},fields:{}});var cs=()=>({});var us=()=>({status:{loading:!1,error:null,lastResponseId:""},documents:[]});function mm(e={}){return{configuration:Ve(),caseAssistConfiguration:is(),caseField:ss(),caseInput:cs(),documentSuggestion:us(),debug:Le(),version:"unit-testing-version",resultPreview:wa(),searchHub:Ee(),...e}}function ym(e={}){return{...On(e,Si),executeFirstSearch:jest.fn(),executeFirstSearchAfterStandaloneSearchBoxRedirect:jest.fn()}}function Sm(e={}){return On(e,rm)}function xm(e={}){return On(e,am)}function Fm(e={}){return On(e,fm)}function bm(e={}){return On(e,mm)}function On(e={},t){let r=(0,hm.default)({level:"silent"}),a=JC(r),o=Cm(e,t),n=a(o),i=()=>{},{state:s,...c}=e;return{store:n,state:Cm(e,t),subscribe:jest.fn(()=>i),get dispatch(){return n.dispatch},get actions(){return n.getActions()},findAsyncAction(u){let l=this.actions.find(d=>d.type===u.type);return XC(l)?l:void 0},logger:r,addReducers:jest.fn(),enableAnalytics:jest.fn(),disableAnalytics:jest.fn(),...c}}function Cm(e,t){let r=e.state||t();return r.configuration.analytics.enabled=!1,r}var JC=e=>{let t={searchAPIClient:Ol({logger:e}),apiClient:Ol({logger:e}),validatePayload:je,logger:e};return(0,gm.default)([es(e),Ki,xn.withExtraArgument(t),...wi(),ts(e)])};function XC(e){return e?"meta"in e:!1}function ls(e={}){return{urihash:"",parents:"",sfid:"",sfparentid:"",sfinsertedbyid:"",documenttype:"",sfcreatedbyid:"",permanentid:"",date:0,objecttype:"",sourcetype:"",sftitle:"",size:0,sffeeditemid:"",clickableuri:"",sfcreatedby:"",source:"",collection:"",connectortype:"",filetype:"",sfcreatedbyname:"",sflikecount:0,language:[],...e}}function Rm(e={}){return{title:"",uri:"",printableUri:"",clickUri:"",uniqueId:"",excerpt:"",firstSentences:"",summary:null,flags:"",hasHtmlVersion:!1,score:0,percentScore:0,rankingInfo:null,isTopResult:!1,isRecommendation:!1,titleHighlights:[],firstSentencesHighlights:[],excerptHighlights:[],printableUriHighlights:[],summaryHighlights:[],absentTerms:[],raw:ls(),...e}}var kl={};_n(kl,{escape:()=>ds,getHighlightedSuggestion:()=>Il,highlightString:()=>ZC});function ZC(e){if(Ni(e.openingDelimiter)||Ni(e.closingDelimiter))throw Error("delimiters should be a non-empty string");if(te(e.content)||Ni(e.content))return e.content;let t=e.content.length,r="",a=0;for(let o=0;o<e.highlights.length;o++){let n=e.highlights[o],i=n.offset,s=i+n.length;if(s>t)break;r+=ds(e.content.slice(a,i)),r+=e.openingDelimiter,r+=ds(e.content.slice(i,s)),r+=e.closingDelimiter,a=s}return a!==t&&(r+=e.content.slice(a)),r}function Il(e,t){return e=ds(e),e.replace(/\[(.*?)\]|\{(.*?)\}|\((.*?)\)/g,(r,a,o,n)=>a?Tl(a,t.notMatchDelimiters):o?Tl(o,t.exactMatchDelimiters):n?Tl(n,t.correctionDelimiters):r)}function Tl(e,t){return t?t.open+e+t.close:e}function ds(e){return e.replace(/&/g,"&amp").replace(/</g,"&lt").replace(/>/g,"&gt").replace(/"/g,"&quot").replace(/`/g,"&#96").replace(/'/g,"&#x27")}var Dl=()=>me,vm=()=>I,Rr=h("configuration/updateBasicConfiguration",e=>S(e,{accessToken:me,organizationId:me,platformUrl:me})),Je=h("configuration/updateSearchConfiguration",e=>S(e,{apiBaseUrl:me,pipeline:me,searchHub:me,timezone:me,locale:me})),vr=h("configuration/updateAnalyticsConfiguration",e=>S(e,{enabled:new Y({default:!0}),originContext:Dl(),originLevel2:Dl(),originLevel3:Dl(),apiBaseUrl:me,runtimeEnvironment:new fe,anonymous:new Y({default:!1}),deviceId:me,userDisplayName:me})),Ga=h("configuration/analytics/disable"),Ja=h("configuration/analytics/enable"),ps=h("configuration/analytics/originlevel2",e=>S(e,{originLevel2:vm()})),fs=h("configuration/analytics/originlevel3",e=>S(e,{originLevel3:vm()}));function Am(e){let t={...e},r,a=o=>(n,i)=>{let s=o(n,i);return r?r(s,i):s};return{get combinedReducer(){return a((0,g.combineReducers)(t))},containsAll(o){return Object.keys(o).every(i=>i in t)},add(o){Object.keys(o).filter(n=>!(n in t)).forEach(n=>t[n]=o[n])},addCrossReducer(o){r=o}}}function Pm({reducer:e,preloadedState:t,middlewares:r=[],thunkExtraArguments:a,name:o}){return ll({reducer:e,preloadedState:t,devTools:{stateSanitizer:n=>n.history?{...n,history:"<<OMIT>>"}:n,name:o,shouldHotReload:!1},middleware:n=>[...r,...n({thunk:{extraArgument:a}}),ts(a.logger)]})}var Ar=()=>new A({required:!1,emptyAllowed:!0}),ms=h("advancedSearchQueries/update",e=>S(e,{aq:Ar(),cq:Ar(),lq:Ar(),dq:Ar()})),gs=h("advancedSearchQueries/register",e=>S(e,{aq:Ar(),cq:Ar(),lq:Ar(),dq:Ar()}));var hs={q:new A,enableQuerySyntax:new Y,aq:new A,cq:new A,firstResult:new L({min:0}),numberOfResults:new L({min:0}),sortCriteria:new A,f:new j,cf:new j,nf:new j,df:new j,debug:new Y,sf:new j,tab:new A};var ne=h("searchParameters/restore",e=>S(e,hs));var Em=E(Qe(),e=>{e.addCase(ms,(t,r)=>{let{aq:a,cq:o,lq:n,dq:i}=r.payload;Ce(a)||(t.aq=a,t.aqWasSet=!0),Ce(o)||(t.cq=o,t.cqWasSet=!0),Ce(n)||(t.lq=n,t.lqWasSet=!0),Ce(i)||(t.dq=i,t.dqWasSet=!0)}).addCase(gs,(t,r)=>{let{aq:a,cq:o,lq:n,dq:i}=r.payload;Ce(a)||(t.defaultFilters.aq=a,t.aqWasSet||(t.aq=a)),Ce(o)||(t.defaultFilters.cq=o,t.cqWasSet||(t.cq=o)),Ce(n)||(t.defaultFilters.lq=n,t.lqWasSet||(t.lq=n)),Ce(i)||(t.defaultFilters.dq=i,t.dqWasSet||(t.dq=i))}).addCase(ie.fulfilled,(t,r)=>{var a,o;return(o=(a=r.payload)==null?void 0:a.advancedSearchQueries)!=null?o:t}).addCase(ne,(t,r)=>{let{aq:a,cq:o}=r.payload;Ce(a)||(t.aq=a,t.aqWasSet=!0),Ce(o)||(t.cq=o,t.cqWasSet=!0)})});var ys=h("tab/register",e=>{let t=new j({values:{id:I,expression:le}});return S(e,t)}),oa=h("tab/updateActiveTab",e=>S(e,I));function eR(e,t){if(/^https:\/\/platform(dev|qa|hipaa)?(-)?(eu|au)?\.cloud\.coveo\.com/.test(e))return e.replace(/^(https:\/\/)platform/,"$1analytics")+ri;let a=e.match(new RegExp(`^https://(${t}\\.org)\\.coveo.com`));return a?e.replace(a[1],"analytics.cloud")+ri:e}var wm=E(Ve(),e=>e.addCase(Rr,(t,r)=>{r.payload.accessToken&&(t.accessToken=r.payload.accessToken),r.payload.organizationId&&(t.organizationId=r.payload.organizationId),r.payload.platformUrl&&(t.platformUrl=r.payload.platformUrl,t.search.apiBaseUrl=`${r.payload.platformUrl}${ju}`,t.analytics.apiBaseUrl=eR(r.payload.platformUrl,t.organizationId))}).addCase(Je,(t,r)=>{r.payload.apiBaseUrl&&(t.search.apiBaseUrl=r.payload.apiBaseUrl),r.payload.locale&&(t.search.locale=r.payload.locale),r.payload.timezone&&(t.search.timezone=r.payload.timezone)}).addCase(vr,(t,r)=>{te(r.payload.enabled)||(t.analytics.enabled=r.payload.enabled),te(r.payload.originContext)||(t.analytics.originContext=r.payload.originContext),te(r.payload.originLevel2)||(t.analytics.originLevel2=r.payload.originLevel2),te(r.payload.originLevel3)||(t.analytics.originLevel3=r.payload.originLevel3),te(r.payload.apiBaseUrl)||(t.analytics.apiBaseUrl=r.payload.apiBaseUrl),te(r.payload.runtimeEnvironment)||(t.analytics.runtimeEnvironment=r.payload.runtimeEnvironment),te(r.payload.anonymous)||(t.analytics.anonymous=r.payload.anonymous),te(r.payload.deviceId)||(t.analytics.deviceId=r.payload.deviceId),te(r.payload.userDisplayName)||(t.analytics.userDisplayName=r.payload.userDisplayName)}).addCase(Ga,t=>{t.analytics.enabled=!1}).addCase(Ja,t=>{t.analytics.enabled=!0}).addCase(ps,(t,r)=>{t.analytics.originLevel2=r.payload.originLevel2}).addCase(fs,(t,r)=>{t.analytics.originLevel3=r.payload.originLevel3}).addCase(oa,(t,r)=>{t.analytics.originLevel2=r.payload}).addCase(ne,(t,r)=>{t.analytics.originLevel2=r.payload.tab||t.analytics.originLevel2}));var tR=new K({each:I,required:!0}),Om=(e,t)=>(S(e,I),Sa(t)?S(t,I):S(t,tR),{payload:{contextKey:e,contextValue:t}}),Xa=h("context/set",e=>{for(let[t,r]of Object.entries(e))Om(t,r);return{payload:e}}),Za=h("context/add",e=>Om(e.contextKey,e.contextValue)),eo=h("context/remove",e=>S(e,I));var qm=E(vt(),e=>{e.addCase(Xa,(t,r)=>{t.contextValues=r.payload}).addCase(Za,(t,r)=>{t.contextValues[r.payload.contextKey]=r.payload.contextValue}).addCase(eo,(t,r)=>{delete t.contextValues[r.payload]}).addCase(ie.fulfilled,(t,r)=>{!r.payload||(t.contextValues=r.payload.context.contextValues)})});var Pr=h("debug/enable"),to=h("debug/disable");var Im=E(Le(),e=>{e.addCase(Pr,()=>!0).addCase(to,()=>!1).addCase(ne,(t,r)=>{var a;return(a=r.payload.debug)!=null?a:t})});var Tm=E(ha,e=>e);var km=E(ui(),e=>{e.addCase(Qa,t=>{t.enableDidYouMean=!0}).addCase(Bi,t=>{t.enableDidYouMean=!1}).addCase(v.pending,t=>{t.queryCorrection=ci(),t.wasAutomaticallyCorrected=!1,t.wasCorrectedTo=""}).addCase(v.fulfilled,(t,r)=>{t.queryCorrection=r.payload.response.queryCorrections[0]||ci(),t.originalQuery=r.payload.originalQuery,t.wasAutomaticallyCorrected=r.payload.automaticallyCorrected}).addCase(wt,(t,r)=>{t.wasCorrectedTo=r.payload})});var z=I;var rR={state:new fe({required:!0}),numberOfResults:new L({required:!0,min:0}),value:new A({required:!0,emptyAllowed:!0}),path:new K({required:!0,each:I}),moreValuesAvailable:new Y({required:!1})};function Vl(e){e.children.forEach(t=>{Vl(t)}),je({state:e.state,numberOfResults:e.numberOfResults,value:e.value,path:e.path,moreValuesAvailable:e.moreValuesAvailable},rR)}var aR={facetId:z,field:I,delimitingCharacter:new A({required:!1,emptyAllowed:!0}),filterFacetCount:new Y({required:!1}),injectionDepth:new L({required:!1,min:0}),numberOfValues:new L({required:!1,min:1}),sortCriteria:new fe({required:!1}),basePath:new K({required:!1,each:I}),filterByBasePath:new Y({required:!1})},Er=h("categoryFacet/register",e=>S(e,aR)),wr=h("categoryFacet/toggleSelectValue",e=>{try{return je(e.facetId,I),Vl(e.selection),{payload:e,error:null}}catch(t){return{payload:e,error:er(t)}}}),Dt=h("categoryFacet/deselectAll",e=>S(e,z)),na=h("categoryFacet/updateNumberOfValues",e=>S(e,{facetId:z,numberOfValues:new L({required:!0,min:1})})),ro=h("categoryFacet/updateSortCriterion",e=>S(e,{facetId:z,criterion:new fe}));var Ss={value:I,numberOfResults:new L({min:0}),state:I};var oR={facetId:z,field:new A({required:!0,emptyAllowed:!0}),delimitingCharacter:new A({required:!1,emptyAllowed:!0}),filterFacetCount:new Y({required:!1}),injectionDepth:new L({required:!1,min:0}),numberOfValues:new L({required:!1,min:1}),sortCriteria:new fe({required:!1})},Or=h("facet/register",e=>S(e,oR)),Vt=h("facet/toggleSelectValue",e=>S(e,{facetId:z,selection:new j({values:Ss})})),Fe=h("facet/deselectAll",e=>S(e,z)),ao=h("facet/updateSortCriterion",e=>S(e,{facetId:z,criterion:new fe({required:!0})})),ia=h("facet/updateNumberOfValues",e=>S(e,{facetId:z,numberOfValues:new L({required:!0,min:1})})),sa=h("facet/updateIsFieldExpanded",e=>S(e,{facetId:z,isFieldExpanded:new Y({required:!0})})),qr=h("facet/updateFreezeCurrentValues",e=>S(e,{facetId:z,freezeCurrentValues:new Y({required:!0})}));var Ml=xe(pa());var oo={state:I,start:new L({required:!0}),end:new L({required:!0}),endInclusive:new Y({required:!0}),numberOfResults:new L({required:!0,min:0})},no={start:I,end:I,endInclusive:new Y({required:!0}),state:I,numberOfResults:new L({required:!0,min:0})},io=e=>({facetId:z,selection:typeof e.start=="string"?new j({values:no}):new j({values:oo})});var so=h("rangeFacet/updateSortCriterion",e=>S(e,{facetId:z,criterion:new fe({required:!0})}));var Nl=xe(pa()),Dm=xe(xl());Nl.default.extend(Dm.default);function Ir(e){var n,i;Ce(e.useLocalTime)||console.warn('The "useLocalTime" option for "buildDateRange" is deprecated. Please use the "timezone" engine configuration option instead.');let t=Vm(e.start,e),r=Vm(e.end,e),a=(n=e.endInclusive)!=null?n:!1,o=(i=e.state)!=null?i:"idle";return{start:t,end:r,endInclusive:a,state:o}}function Vm(e,t){let{dateFormat:r}=t;return jf(e)?(Cr(e),Mf(e)):typeof e=="string"&&Ot(e)?(Cr(e),e):($i(e,r),vn((0,Nl.default)(e,r)))}var nR={start:I,end:I,endInclusive:new Y({required:!0}),state:I},iR={facetId:z,field:I,currentValues:new K({required:!1,each:new j({values:nR})}),generateAutomaticRanges:new Y({required:!0}),filterFacetCount:new Y({required:!1}),injectionDepth:new L({required:!1,min:0}),numberOfValues:new L({required:!1,min:1}),sortCriteria:new fe({required:!1}),rangeAlgorithm:new fe({required:!1})};function Nm(e){return Ot(e)?Pn(e):e}function xs(e){!e.currentValues||e.currentValues.forEach(t=>{let{start:r,end:a}=Ir(t);if((0,Ml.default)(Nm(r)).isAfter((0,Ml.default)(Nm(a))))throw new Error(`The start value is greater than the end value for the date range ${t.start} to ${t.end}`)})}var Nt=h("dateFacet/register",e=>{try{return je(e,iR),xs(e),{payload:e,error:null}}catch(t){return{payload:e,error:er(t)}}}),Mt=h("dateFacet/toggleSelectValue",e=>S(e,{facetId:z,selection:new j({values:no})})),or=h("dateFacet/updateFacetValues",e=>{try{return je(e,{facetId:z,values:new K({each:new j({values:no})})}),xs({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:er(t)}}}),Fs=so,bs=Fe;var sR={state:I,start:new L({required:!0}),end:new L({required:!0}),endInclusive:new Y({required:!0})},cR={facetId:z,field:I,currentValues:new K({required:!1,each:new j({values:sR})}),generateAutomaticRanges:new Y({required:!0}),filterFacetCount:new Y({required:!1}),injectionDepth:new L({required:!1,min:0}),numberOfValues:new L({required:!1,min:1}),sortCriteria:new fe({required:!1}),rangeAlgorithm:new fe({required:!1})};function Cs(e){!e.currentValues||e.currentValues.forEach(({start:t,end:r})=>{if(t>r)throw new Error(`The start value is greater than the end value for the numeric range ${t} to ${r}`)})}var Qt=h("numericFacet/register",e=>{try{return S(e,cR),Cs(e),{payload:e,error:null}}catch(t){return{payload:e,error:er(t)}}}),Lt=h("numericFacet/toggleSelectValue",e=>S(e,{facetId:z,selection:new j({values:oo})})),nr=h("numericFacet/updateFacetValues",e=>{try{return je(e,{facetId:z,values:new K({each:new j({values:oo})})}),Cs({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:er(t)}}}),Rs=so,vs=Fe;var ae=h("facetOptions/update",e=>S(e,{freezeFacetOrder:new Y({required:!1})})),Ne=h("facetOptions/facet/enable",e=>S(e,z)),ye=h("facetOptions/facet/disable",e=>S(e,z));var Mm=E(gr(),e=>{e.addCase(ae,(t,r)=>({...t,...r.payload})).addCase(v.fulfilled,t=>{t.freezeFacetOrder=!1}).addCase(v.rejected,t=>{t.freezeFacetOrder=!1}).addCase(ie.fulfilled,(t,r)=>{var a,o;return(o=(a=r.payload)==null?void 0:a.facetOptions)!=null?o:t}).addCase(Er,(t,r)=>{t.facets[r.payload.facetId]=va()}).addCase(Or,(t,r)=>{t.facets[r.payload.facetId]=va()}).addCase(Nt,(t,r)=>{t.facets[r.payload.facetId]=va()}).addCase(Qt,(t,r)=>{t.facets[r.payload.facetId]=va()}).addCase(Ne,(t,r)=>{t.facets[r.payload].enabled=!0}).addCase(ye,(t,r)=>{t.facets[r.payload].enabled=!1}).addCase(ne,(t,r)=>{var a,o,n,i;[...Object.keys((a=r.payload.f)!=null?a:{}),...Object.keys((o=r.payload.cf)!=null?o:{}),...Object.keys((n=r.payload.nf)!=null?n:{}),...Object.keys((i=r.payload.df)!=null?i:{})].forEach(s=>{s in t||(t.facets[s]=va()),t.facets[s].enabled=!0})})});function co(e,t){let{facetId:r,criterion:a}=t,o=e[r];!o||(o.sortCriteria=a)}function qn(e){!e||(e.currentValues=e.currentValues.map(t=>({...t,state:"idle"})),e.preventAutoSelect=!0)}function As(e,t){!e||(e.numberOfValues=t)}var In={facetId:z,captions:new j({options:{required:!1}}),numberOfValues:new L({required:!1,min:1}),query:new A({required:!1,emptyAllowed:!0})};var uR={path:new K({required:!0,each:I}),displayValue:le,rawValue:le,count:new L({required:!0,min:0})},uo=h("categoryFacet/selectSearchResult",e=>S(e,{facetId:z,value:new j({values:uR})})),lo=h("categoryFacetSearch/register",e=>S(e,In));function Tn(e,t){let r=e[t];!r||(r.request.numberOfValues=r.initialNumberOfValues,r.request.currentValues=[],r.request.preventAutoSelect=!0)}function Ql(e,t,r){e.currentValues=lR(t,r),e.numberOfValues=t.length?1:r,e.preventAutoSelect=!0}function lR(e,t){if(!e.length)return[];let r=Qm(e[0],t),a=r;for(let o of e.splice(1)){let n=Qm(o,t);a.children.push(n),a=n}return a.state="selected",a.retrieveChildren=!0,[r]}function Qm(e,t){return{value:e,retrieveCount:t,children:[],state:"idle",retrieveChildren:!1}}var Lm=E(yt(),e=>{e.addCase(Er,(t,r)=>{let a=r.payload,{facetId:o}=a;if(o in t)return;let n=pR(a),i=n.numberOfValues;t[o]={request:n,initialNumberOfValues:i}}).addCase(ie.fulfilled,(t,r)=>{var a,o;return(o=(a=r.payload)==null?void 0:a.categoryFacetSet)!=null?o:t}).addCase(ne,(t,r)=>{let a=r.payload.cf||{};Object.keys(t).forEach(o=>{let n=t[o].request,i=a[o]||[];(i.length||n.currentValues.length)&&Ql(n,i,t[o].initialNumberOfValues)})}).addCase(ro,(t,r)=>{var i;let{facetId:a,criterion:o}=r.payload,n=(i=t[a])==null?void 0:i.request;!n||(n.sortCriteria=o)}).addCase(wr,(t,r)=>{var d;let{facetId:a,selection:o,retrieveCount:n}=r.payload,i=(d=t[a])==null?void 0:d.request;if(!i)return;let{path:s}=o,c=s.slice(0,s.length-1),u=dR(i,c,n);if(u.length){let f=u[0];f.retrieveChildren=!0,f.state="selected",f.children=[];return}let l=jm(o.value,n);l.state="selected",u.push(l),i.numberOfValues=1}).addCase(Dt,(t,r)=>{let a=r.payload;Tn(t,a)}).addCase(Ge,t=>{Object.keys(t).forEach(r=>Tn(t,r))}).addCase(Oe,t=>{Object.keys(t).forEach(r=>Tn(t,r))}).addCase(It,(t,r)=>Object.keys(t).forEach(a=>{t[a].request.preventAutoSelect=!r.payload.allow})).addCase(na,(t,r)=>{var i;let{facetId:a,numberOfValues:o}=r.payload,n=(i=t[a])==null?void 0:i.request;if(!!n){if(!n.currentValues.length)return As(n,o);fR(t,r.payload)}}).addCase(uo,(t,r)=>{let{facetId:a,value:o}=r.payload,n=t[a];if(!n)return;let i=[...o.path,o.rawValue];Ql(n.request,i,n.initialNumberOfValues)}).addCase(Be.fulfilled,(t,r)=>{Bm(t,r.payload.response.facets)}).addCase(v.fulfilled,(t,r)=>{Bm(t,r.payload.response.facets)}).addCase(ye,(t,r)=>{Tn(t,r.payload)})}),Ll={delimitingCharacter:";",filterFacetCount:!0,injectionDepth:1e3,numberOfValues:5,sortCriteria:"occurrences",basePath:[],filterByBasePath:!0};function dR(e,t,r){let a=e.currentValues;for(let o of t){let n=a[0];(!n||o!==n.value)&&(n=jm(o,r),a.length=0,a.push(n)),n.retrieveChildren=!1,n.state="idle",a=n.children}return a}function pR(e){return{...Ll,currentValues:[],preventAutoSelect:!1,type:"hierarchical",...e}}function jm(e,t){return{value:e,state:"idle",children:[],retrieveChildren:!0,retrieveCount:t}}function Bm(e,t){t.forEach(r=>{var i;if(!mR(e,r))return;let a=r.facetId,o=(i=e[a])==null?void 0:i.request;if(!o)return;let n=gR(o,r);o.currentValues=n?[]:o.currentValues,o.preventAutoSelect=!1})}function fR(e,t){var n;let{facetId:r,numberOfValues:a}=t,o=(n=e[r])==null?void 0:n.request.currentValues[0];if(!!o){for(;o.children.length&&(o==null?void 0:o.state)!=="selected";)o=o.children[0];o.retrieveCount=a}}function mR(e,t){return t.facetId in e}function gR(e,t){let r=ze(e.currentValues).parents,a=ze(t.values).parents;return r.length!==a.length}var Um=E(hr(),e=>{e.addCase(v.fulfilled,(t,r)=>r.payload.response.facets.map(a=>a.facetId)).addCase(ie.fulfilled,(t,r)=>{var a,o;return(o=(a=r.payload)==null?void 0:a.facetOrder)!=null?o:t})});function Ps(e,t,r){let{facetId:a}=t;if(e[a])return;let o=!1,n={...jt,...t},i=r();e[a]={options:n,isLoading:o,response:i,initialNumberOfValues:n.numberOfValues,requestId:""}}function Es(e,t){let{facetId:r,...a}=t,o=e[r];!o||(o.options={...o.options,...a})}function ws(e,t,r){let a=e[t];!a||(a.requestId=r,a.isLoading=!0)}function Os(e,t){let r=e[t];!r||(r.isLoading=!1)}function qs(e,t,r){let{facetId:a,response:o}=t,n=e[a];!n||n.requestId===r&&(n.isLoading=!1,n.response=o)}function kn(e,t,r){let{facetId:a}=t,o=e[a];!o||(o.requestId="",o.isLoading=!1,o.response=r(),o.options.numberOfValues=o.initialNumberOfValues,o.options.query=jt.query)}function Is(e,t){Object.keys(e).forEach(r=>kn(e,{facetId:r},t))}var jt={captions:{},numberOfValues:10,query:""};var hR={facetId:z,value:new j({values:{displayValue:le,rawValue:le,count:new L({required:!0,min:0})}})},Ts=h("facetSearch/register",e=>S(e,In)),Tr=h("facetSearch/update",e=>S(e,In)),ca=h("facetSearch/toggleSelectValue",e=>S(e,hR));var po=e=>D("analytics/facet/showMore",k.Search,(t,r)=>{S(e,z);let a=Zr(e,st(r));return t.logFacetShowMore(a)})(),fo=e=>D("analytics/facet/showLess",k.Search,(t,r)=>{S(e,z);let a=Zr(e,st(r));return t.logFacetShowLess(a)})(),$m=e=>D("analytics/facet/search",k.Search,(t,r)=>{S(e,z);let a=st(r),o=Zr(e,a);return t.logFacetSearch(o)})(),Bt=e=>D("analytics/facet/sortChange",k.Search,(t,r)=>{S(e,{facetId:z,criterion:new fe({required:!0})});let{facetId:a,criterion:o}=e,n=st(r),s={...Zr(a,n),criteria:o};return t.logFacetUpdateSort(s)})(),Me=e=>D("analytics/facet/reset",k.Search,(t,r)=>{S(e,z);let a=st(r),o=Zr(e,a);return t.logFacetClearAll(o)})(),Re=e=>D("analytics/facet/select",k.Search,(t,r)=>{S(e,{facetId:z,facetValue:I});let a=st(r),o=Zn(e,a);return t.logFacetSelect(o)})(),ft=e=>D("analytics/facet/deselect",k.Search,(t,r)=>{S(e,{facetId:z,facetValue:I});let a=st(r),o=Zn(e,a);return t.logFacetDeselect(o)})(),ks=e=>D("analytics/facet/breadcrumb",k.Search,(t,r)=>{S(e,{facetId:z,facetValue:I});let a=Zn(e,st(r));return t.logBreadcrumbFacet(a)})();var _m=async(e,t)=>{let{captions:r,query:a,numberOfValues:o}=t.facetSearchSet[e].options,{field:n,currentValues:i,filterFacetCount:s}=t.facetSet[e],c=(await ar(t)).request,u=i.filter(d=>d.state!=="idle").map(d=>d.value),l=`*${a}*`;return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,captions:r,numberOfValues:o,query:l,field:n,ignoreValues:u,searchContext:c,filterFacetCount:s,type:"specific"}};var Hm=async(e,t)=>{let r=t.categoryFacetSearchSet[e].options,a=t.categoryFacetSet[e].request,{captions:o,query:n,numberOfValues:i}=r,{field:s,delimitingCharacter:c,basePath:u,filterFacetCount:l}=a,d=(await ar(t)).request,f=yR(a),p=f.length?[f]:[],m=`*${n}*`;return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,basePath:u,captions:o,numberOfValues:i,query:m,field:s,delimitingCharacter:c,ignorePaths:p,searchContext:d,filterFacetCount:l,type:"hierarchical"}},yR=e=>{let t=[],r=e.currentValues[0];for(;r;)t.push(r.value),r=r.children[0];return t};var mt=Z("facetSearch/executeSearch",async(e,{dispatch:t,getState:r,extra:{apiClient:a,validatePayload:o}})=>{let n=r(),i;o(e,I),SR(n,e)?i=await _m(e,n):i=await Hm(e,n);let s=await a.facetSearch(i);return t($m(e)),{facetId:e,response:s}}),mo=h("facetSearch/clearResults",e=>S(e,{facetId:z})),SR=(e,t)=>e.facetSearchSet!==void 0&&e.facetSet!==void 0&&e.facetSet[t]!==void 0;var zm=E(Ra(),e=>{e.addCase(lo,(t,r)=>{let a=r.payload;Ps(t,a,jl)}).addCase(Tr,(t,r)=>{Es(t,r.payload)}).addCase(mt.pending,(t,r)=>{let a=r.meta.arg;ws(t,a,r.meta.requestId)}).addCase(mt.rejected,(t,r)=>{let a=r.meta.arg;Os(t,a)}).addCase(mt.fulfilled,(t,r)=>{qs(t,r.payload,r.meta.requestId)}).addCase(mo,(t,{payload:{facetId:r}})=>{kn(t,{facetId:r},jl)}).addCase(v.fulfilled,t=>{Is(t,jl)})});function jl(){return{moreValuesAvailable:!1,values:[]}}var Wm=E(Ca(),e=>{e.addCase(Ts,(t,r)=>{let a=r.payload;Ps(t,a,Bl)}).addCase(Tr,(t,r)=>{Es(t,r.payload)}).addCase(mt.pending,(t,r)=>{let a=r.meta.arg;ws(t,a,r.meta.requestId)}).addCase(mt.rejected,(t,r)=>{let a=r.meta.arg;Os(t,a)}).addCase(mt.fulfilled,(t,r)=>{qs(t,r.payload,r.meta.requestId)}).addCase(mo,(t,{payload:r})=>{kn(t,r,Bl)}).addCase(v.fulfilled,t=>{Is(t,Bl)})});function Bl(){return{moreValuesAvailable:!1,values:[]}}var Ym=h("productlisting/setUrl",e=>S(e,{url:new A({required:!0,url:!0})})),Km=h("productlisting/setAdditionalFields",e=>S(e,{additionalFields:new K({required:!0,each:new A({required:!0,emptyAllowed:!1})})})),kr=Z("productlisting/fetch",async(e,{getState:t,dispatch:r,rejectWithValue:a,extra:o})=>{let n=t(),{apiClient:i}=o,s=await i.getProducts(await xR(n));return ue(s)?(r(ra(s.error)),a(s.error)):{response:s.success}}),xR=async e=>{var a,o,n;let t=bR(e),r=await be();return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,platformUrl:e.configuration.platformUrl,url:(a=e.productListing)==null?void 0:a.url,...e.configuration.analytics.enabled&&r?{clientId:r}:{},...((o=e.productListing.additionalFields)==null?void 0:o.length)?{additionalFields:e.productListing.additionalFields}:{},...e.productListing.advancedParameters&&FR(e.productListing.advancedParameters)?{advancedParameters:e.productListing.advancedParameters||{}}:{},...t.length&&{facets:{requests:t}},...e.pagination&&{pagination:{numberOfValues:e.pagination.numberOfResults,page:Math.ceil(e.pagination.firstResult/(e.pagination.numberOfResults||1))+1}},...(((n=e.sort)==null?void 0:n.by)||aa.Relevance)!==aa.Relevance&&{sort:e.sort}}};function FR(e){return e.debug}function bR(e){var t;return _a(CR(e),(t=e.facetOrder)!=null?t:[])}function CR(e){return[...Ul(e.facetSet),...Ul(e.numericFacetSet),...Ul(e.dateFacetSet),...RR(e.categoryFacetSet)]}function RR(e){return Object.values(e||{}).map(t=>t.request)}function Ul(e={}){return Object.keys(e).map(t=>e[t])}var Gm=E(Ft(),e=>{e.addCase(Or,(t,r)=>{let{facetId:a}=r.payload;a in t||(t[a]=vR(r.payload))}).addCase(ie.fulfilled,(t,r)=>{if(!!r.payload&&Object.keys(r.payload.facetSet).length!==0)return r.payload.facetSet}).addCase(ne,(t,r)=>{let a=r.payload.f||{};Object.keys(t).forEach(n=>{let i=t[n],s=a[n]||[];i.currentValues=s.map(Xm),i.preventAutoSelect=s.length>0,i.numberOfValues=Math.max(s.length,i.numberOfValues)})}).addCase(Vt,(t,r)=>{let{facetId:a,selection:o}=r.payload,n=t[a];if(!n)return;n.preventAutoSelect=!0;let i=n.currentValues.find(c=>c.value===o.value);if(!i){Jm(n,o);return}let s=i.state==="selected";i.state=s?"idle":"selected",n.freezeCurrentValues=!0}).addCase(qr,(t,r)=>{let{facetId:a,freezeCurrentValues:o}=r.payload,n=t[a];!n||(n.freezeCurrentValues=o)}).addCase(Fe,(t,r)=>{let a=t[r.payload];qn(a)}).addCase(Ge,t=>{Object.keys(t).forEach(r=>{let a=t[r];qn(a)})}).addCase(Oe,t=>{Object.keys(t).forEach(r=>{let a=t[r];qn(a)})}).addCase(It,(t,r)=>Object.keys(t).forEach(a=>{t[a].preventAutoSelect=!r.payload.allow})).addCase(ao,(t,r)=>{co(t,r.payload)}).addCase(ia,(t,r)=>{let{facetId:a,numberOfValues:o}=r.payload;As(t[a],o)}).addCase(sa,(t,r)=>{let{facetId:a,isFieldExpanded:o}=r.payload,n=t[a];!n||(n.isFieldExpanded=o)}).addCase(v.fulfilled,(t,r)=>{r.payload.response.facets.forEach(o=>$l(t[o.facetId],o))}).addCase(kr.fulfilled,(t,r)=>{var o,n;(((n=(o=r.payload.response)==null?void 0:o.facets)==null?void 0:n.results)||[]).forEach(i=>$l(t[i.facetId],i))}).addCase(Be.fulfilled,(t,r)=>{r.payload.response.facets.forEach(o=>$l(t[o.facetId],o))}).addCase(ca,(t,r)=>{let{facetId:a,value:o}=r.payload,n=t[a];if(!n)return;let{rawValue:i}=o,{currentValues:s}=n,c=s.find(l=>l.value===i);if(c){c.state="selected";return}let u=Xm(i);Jm(n,u),n.freezeCurrentValues=!0,n.preventAutoSelect=!0}).addCase(ye,(t,r)=>{if(!(r.payload in t))return;let a=t[r.payload];qn(a)})});function Jm(e,t){let{currentValues:r}=e,a=r.findIndex(s=>s.state==="idle"),o=a===-1?r.length:a,n=r.slice(0,o),i=r.slice(o+1);e.currentValues=[...n,t,...i],e.numberOfValues=e.currentValues.length}function $l(e,t){!e||(e.currentValues=t.values.map(AR),e.freezeCurrentValues=!1,e.preventAutoSelect=!1)}var _l={delimitingCharacter:">",filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"automatic"};function vR(e){return{..._l,type:"specific",currentValues:[],freezeCurrentValues:!1,isFieldExpanded:!1,preventAutoSelect:!1,...e}}function AR(e){let{value:t,state:r}=e;return{value:t,state:r}}function Xm(e){return{value:e,state:"selected"}}var Ds={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"ascending",rangeAlgorithm:"even"};function Vs(e,t){let{facetId:r}=t;if(r in e)return;let a=Zm(t);e[r]={...t,numberOfValues:a}}function Ns(e,t,r){let a=e[t];!a||(a.currentValues=r,a.numberOfValues=Zm(a))}function Ms(e,t,r){let a=e[t];if(!a)return;let o=Hl(a.currentValues,r);if(!o)return;let n=o.state==="selected";o.state=n?"idle":"selected",a.preventAutoSelect=!0}function Ut(e,t){let r=e[t];!r||r.currentValues.forEach(a=>a.state="idle")}function Qs(e,t){Object.entries(e).forEach(([r,a])=>{let o=t[r]||[];a.currentValues.forEach(s=>{let c=!!Hl(o,s);return s.state=c?"selected":"idle",s});let n=o.filter(s=>!Hl(a.currentValues,s)),i=a.currentValues;i.push(...n),a.numberOfValues=Math.max(a.numberOfValues,i.length)})}function Ls(e,t,r){t.forEach(a=>{let o=a.facetId,n=e[o];if(!n)return;let i=r(a.values);n.currentValues=i,n.preventAutoSelect=!1})}function Hl(e,t){let{start:r,end:a}=t;return e.find(o=>o.start===r&&o.end===a)}function Zm(e){let{generateAutomaticRanges:t,currentValues:r,numberOfValues:a}=e;return t?Math.max(a,r.length):r.length}var eg=E(St(),e=>{e.addCase(Nt,(t,r)=>{let{payload:a}=r,o=PR(a);Vs(t,o)}).addCase(ie.fulfilled,(t,r)=>{var a,o;return(o=(a=r.payload)==null?void 0:a.dateFacetSet)!=null?o:t}).addCase(ne,(t,r)=>{let a=r.payload.df||{};Qs(t,a)}).addCase(Mt,(t,r)=>{let{facetId:a,selection:o}=r.payload;Ms(t,a,o)}).addCase(or,(t,r)=>{let{facetId:a,values:o}=r.payload;Ns(t,a,o)}).addCase(bs,(t,r)=>{Ut(t,r.payload)}).addCase(Ge,t=>{Object.keys(t).forEach(r=>{Ut(t,r)})}).addCase(Oe,t=>{Object.keys(t).forEach(r=>{Ut(t,r)})}).addCase(Fs,(t,r)=>{co(t,r.payload)}).addCase(v.fulfilled,(t,r)=>{let a=r.payload.response.facets;Ls(t,a,ER)}).addCase(ye,(t,r)=>{Ut(t,r.payload)})});function PR(e){return{...Ds,currentValues:[],preventAutoSelect:!1,type:"dateRange",...e}}function ER(e){return e.map(t=>{let{numberOfResults:r,...a}=t;return a})}var tg=E(xt(),e=>{e.addCase(Qt,(t,r)=>{let{payload:a}=r,o=wR(a);Vs(t,o)}).addCase(ie.fulfilled,(t,r)=>{var a,o;return(o=(a=r.payload)==null?void 0:a.numericFacetSet)!=null?o:t}).addCase(ne,(t,r)=>{let a=r.payload.nf||{};Qs(t,a)}).addCase(Lt,(t,r)=>{let{facetId:a,selection:o}=r.payload;Ms(t,a,o)}).addCase(nr,(t,r)=>{let{facetId:a,values:o}=r.payload;Ns(t,a,o)}).addCase(vs,(t,r)=>{Ut(t,r.payload)}).addCase(Ge,t=>{Object.keys(t).forEach(r=>{Ut(t,r)})}).addCase(Oe,t=>{Object.keys(t).forEach(r=>{Ut(t,r)})}).addCase(Rs,(t,r)=>{co(t,r.payload)}).addCase(v.fulfilled,(t,r)=>{let a=r.payload.response.facets;Ls(t,a,OR)}).addCase(ye,(t,r)=>{Ut(t,r.payload)})});function wR(e){return{...Ds,currentValues:[],preventAutoSelect:!1,type:"numericalRange",...e}}function OR(e){return e.map(t=>{let{numberOfResults:r,...a}=t;return a})}var qR=new K({each:I,required:!0}),Dr=h("fields/registerFieldsToInclude",e=>S(e,qR)),go=h("fields/fetchall/enable"),ua=h("fields/fetchall/disable"),ho=Z("fields/description",async(e,{extra:t,getState:r,rejectWithValue:a})=>{let o=r(),{accessToken:n,organizationId:i}=o.configuration,{apiBaseUrl:s}=o.configuration.search,c=await t.apiClient.fieldDescriptions({accessToken:n,organizationId:i,url:s});return ue(c)?a(c.error):c.success.fields});var zl={collectionField:new A,parentField:new A,childField:new A,numberOfFoldedResults:new L({min:0})},Vr=h("folding/register",e=>S(e,zl)),Nr=Z("folding/loadCollection",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:a}})=>{let o=t(),n=await Hi(o),i=await a.search({...n,q:IR(o),enableQuerySyntax:!0,cq:`@${o.folding.fields.collection}=${e}`,filterField:o.folding.fields.collection,childField:o.folding.fields.parent,parentField:o.folding.fields.child,filterFieldRange:100});return ue(i)?r(i.error):{collectionId:e,results:i.success.results}});function IR(e){return e.query.q===""?"":e.query.enableQuerySyntax?`${e.query.q} OR @uri`:`( <@- ${e.query.q} -@> ) OR @uri`}var rg=E(ba(),e=>e.addCase(Dr,(t,r)=>{t.fieldsToInclude=[...new Set(t.fieldsToInclude.concat(r.payload))]}).addCase(go,t=>{t.fetchAllFields=!0}).addCase(ua,t=>{t.fetchAllFields=!1}).addCase(ho.fulfilled,(t,{payload:r})=>{t.fieldsDescription=r}).addCase(Vr,(t,{payload:r})=>{var o,n,i;let a=Oa().fields;t.fieldsToInclude.push((o=r.collectionField)!=null?o:a.collection,(n=r.parentField)!=null?n:a.parent,(i=r.childField)!=null?i:a.child)}));function TR(e,t){return e.raw[t.collection]}function Wl(e,t){return e.raw[t.parent]}function Dn(e,t){let r=e.raw[t.child];return Vi(r)?r[0]:r}function kR(e,t){return(e||t)!==void 0&&e===t}function ag(e,t,r,a=[]){let o=Dn(e,r);return o?a.indexOf(o)!==-1?[]:t.filter(n=>{let i=Dn(n,r)===Dn(e,r);return Wl(n,r)===o&&!i}).map(n=>({result:n,children:ag(n,t,r,[...a,o])})):[]}function DR(e,t){return e.find(r=>{let a=Wl(r,t)===void 0,o=kR(Wl(r,t),Dn(r,t));return a||o})}function VR(e,t){var o;let r=Mi(e),a=(o=DR(r,t))!=null?o:e;return{result:a,children:ag(a,r,t),moreResultsAvailable:!0,isLoadingMoreResults:!1}}function Yl(e,t){let r={};return e.forEach(a=>{let o=TR(a,t);!o||!Dn(a,t)||(r[o]=VR(a,t))}),r}var og=E(Oa(),e=>e.addCase(v.fulfilled,(t,{payload:r})=>{t.collections=t.enabled?Yl(r.response.results,t.fields):{}}).addCase(Tt.fulfilled,(t,{payload:r})=>{t.collections=t.enabled?{...t.collections,...Yl(r.response.results,t.fields)}:{}}).addCase(Vr,(t,{payload:r})=>{var a,o,n,i;return t.enabled?t:{enabled:!0,collections:{},fields:{collection:(a=r.collectionField)!=null?a:t.fields.collection,parent:(o=r.parentField)!=null?o:t.fields.parent,child:(n=r.childField)!=null?n:t.fields.child},filterFieldRange:(i=r.numberOfFoldedResults)!=null?i:t.filterFieldRange}}).addCase(Nr.pending,(t,{meta:r})=>{let a=r.arg;t.collections[a].isLoadingMoreResults=!0}).addCase(Nr.rejected,(t,{meta:r})=>{let a=r.arg;t.collections[a].isLoadingMoreResults=!1}).addCase(Nr.fulfilled,(t,{payload:{collectionId:r,results:a}})=>{let o=Yl(a,t.fields);t.collections[r]=o[r],t.collections[r].moreResultsAvailable=!1}));var sg=xe(ig());function cg(e,t){return e.length===t.length&&e.findIndex((r,a)=>t[a]!==r)===-1}var Bs=(0,sg.createCustomEqual)(e=>(t,r)=>Array.isArray(t)&&Array.isArray(r)?t.length!==r.length?!1:t.every(a=>r.findIndex(o=>e(a,o))!==-1):e(t,r));var ug=E(pi(),e=>{e.addCase(rr,(t,r)=>NR(t,r.payload)?void 0:r.payload)}),NR=(e,t)=>MR(e.context,t.context)&&QR(e.dictionaryFieldContext,t.dictionaryFieldContext)&&_R(e.advancedSearchQueries,t.advancedSearchQueries)&&LR(e.tabSet,t.tabSet)&&jR(e.staticFilterSet,t.staticFilterSet)&&Kl(e.facetSet,t.facetSet)&&Kl(e.dateFacetSet,t.dateFacetSet)&&Kl(e.numericFacetSet,t.numericFacetSet)&&BR(e.categoryFacetSet,t.categoryFacetSet)&&UR(e.pagination,t.pagination)&&$R(e.query,t.query)&&HR(e,t)&&zR(e.pipeline,t.pipeline)&&WR(e.searchHub,t.searchHub)&&YR(e.facetOrder,t.facetOrder)&&KR(e.debug,t.debug),MR=(e,t)=>JSON.stringify(e.contextValues)===JSON.stringify(t.contextValues),QR=(e,t)=>JSON.stringify(e.contextValues)===JSON.stringify(t.contextValues),LR=(e,t)=>{let r=lg(e),a=lg(t);return(r==null?void 0:r.id)===(a==null?void 0:a.id)},lg=e=>Object.values(e).find(t=>t.isActive),jR=(e,t)=>{for(let[r,a]of Object.entries(t)){if(!e[r])return!1;let o=dg(e[r]),n=dg(a);if(JSON.stringify(o)!==JSON.stringify(n))return!1}return!0},dg=e=>e.values.filter(t=>t.state!=="idle"),Kl=(e,t)=>{for(let[r,a]of Object.entries(t)){if(!e[r])return!1;let o=e[r].currentValues.filter(i=>i.state==="selected"),n=a.currentValues.filter(i=>i.state==="selected");if(JSON.stringify(o)!==JSON.stringify(n))return!1}return!0},BR=(e,t)=>{var r;for(let[a,o]of Object.entries(t)){if(!e[a])return!1;let n=ze((r=e[a])==null?void 0:r.request.currentValues).parents.map(({value:s})=>s),i=ze(o==null?void 0:o.request.currentValues).parents.map(({value:s})=>s);if(JSON.stringify(n)!==JSON.stringify(i))return!1}return!0},UR=(e,t)=>e.firstResult===t.firstResult&&e.numberOfResults===t.numberOfResults,$R=(e,t)=>JSON.stringify(e)===JSON.stringify(t),_R=(e,t)=>JSON.stringify(e)===JSON.stringify(t),HR=(e,t)=>e.sortCriteria===t.sortCriteria,zR=(e,t)=>e===t,WR=(e,t)=>e===t,YR=(e,t)=>cg(e,t),KR=(e,t)=>e===t;var yo=1,GR=5e3,pg=E(Te(),e=>{e.addCase(La,(t,r)=>{let a=Gl(t),o=r.payload;t.numberOfResults=o,t.firstResult=Vn(a,o)}).addCase(ja,(t,r)=>{t.numberOfResults=r.payload,t.firstResult=0}).addCase(Ba,(t,r)=>{let a=r.payload;t.firstResult=Vn(a,t.numberOfResults)}).addCase(qt,(t,r)=>{let a=r.payload;t.firstResult=Vn(a,t.numberOfResults)}).addCase($a,t=>{let r=Gl(t),a=Math.max(r-1,yo);t.firstResult=Vn(a,t.numberOfResults)}).addCase(Ua,t=>{let r=Gl(t),a=JR(t),o=Math.min(r+1,a);t.firstResult=Vn(o,t.numberOfResults)}).addCase(ie.fulfilled,(t,r)=>{r.payload&&(t.numberOfResults=r.payload.pagination.numberOfResults,t.firstResult=r.payload.pagination.firstResult)}).addCase(ne,(t,r)=>{var a,o;t.firstResult=(a=r.payload.firstResult)!=null?a:t.firstResult,t.numberOfResults=(o=r.payload.numberOfResults)!=null?o:t.numberOfResults}).addCase(v.fulfilled,(t,r)=>{let{response:a}=r.payload;t.totalCountFiltered=a.totalCountFiltered}).addCase(kr.fulfilled,(t,r)=>{let{response:a}=r.payload;t.totalCountFiltered=a.pagination.totalCount}).addCase(Fe,t=>{Xe(t)}).addCase(Vt,t=>{Xe(t)}).addCase(Dt,t=>{Xe(t)}).addCase(wr,t=>{Xe(t)}).addCase(uo,t=>{Xe(t)}).addCase(Mt,t=>{Xe(t)}).addCase(Lt,t=>{Xe(t)}).addCase(Ge,t=>{Xe(t)}).addCase(Oe,t=>{Xe(t)}).addCase(or,t=>{Xe(t)}).addCase(nr,t=>{Xe(t)}).addCase(ca,t=>{Xe(t)})});function Xe(e){e.firstResult=Te().firstResult}function Gl(e){let{firstResult:t,numberOfResults:r}=e;return Jl(t,r)}function JR(e){let{totalCountFiltered:t,numberOfResults:r}=e;return Xl(t,r)}function Vn(e,t){return(e-1)*t}function Jl(e,t){return e/t+1}function Xl(e,t){let r=Math.min(e,GR);return Math.ceil(r/t)}var So=h("pipeline/set",e=>S(e,new A({required:!0,emptyAllowed:!0})));var fg=E(Ye(),e=>{e.addCase(So,(t,r)=>r.payload).addCase(ie.fulfilled,(t,r)=>{var a,o;return(o=(a=r.payload)==null?void 0:a.pipeline)!=null?o:t}).addCase(Je,(t,r)=>r.payload.pipeline||t)});var XR=E(ga(),e=>{e.addCase(Ym,(t,r)=>{t.url=r.payload.url}).addCase(Km,(t,r)=>{t.additionalFields=r.payload.additionalFields}).addCase(kr.rejected,(t,r)=>{t.error=r.payload?r.payload:null,t.isLoading=!1}).addCase(kr.fulfilled,(t,r)=>{t.error=null,t.facets=r.payload.response.facets,t.products=r.payload.response.products,t.responseId=r.payload.response.responseId,t.isLoading=!1}).addCase(kr.pending,t=>{t.isLoading=!0})});var ZR=E(Ha(),e=>{e.addCase(Kf,(t,r)=>{t.id=r.payload.id}).addCase(Gf,(t,r)=>{t.skus=r.payload.skus}).addCase(Jf,(t,r)=>{t.filter.brand=r.payload.brand}).addCase(Xf,(t,r)=>{t.filter.category=r.payload.category}).addCase(em,(t,r)=>{t.maxNumberOfRecommendations=r.payload.number}).addCase(Zf,(t,r)=>{t.additionalFields=r.payload.additionalFields}).addCase(za.rejected,(t,r)=>{t.error=r.payload?r.payload:null,t.isLoading=!1}).addCase(za.fulfilled,(t,r)=>{t.error=null,t.searchUid=r.payload.searchUid,t.recommendations=r.payload.recommendations,t.isLoading=!1}).addCase(za.pending,t=>{t.isLoading=!0})});var mg={id:I,query:le},xo=h("querySet/register",e=>S(e,mg)),ir=h("querySet/update",e=>S(e,mg));var Nn={id:I},Fo=h("querySuggest/register",e=>S(e,{...Nn,q:new A,count:new L({min:0})})),gg=h("querySuggest/unregister",e=>S(e,Nn)),Ze=h("querySuggest/selectSuggestion",e=>S(e,{...Nn,expression:le})),Mr=h("querySuggest/clear",e=>S(e,Nn)),Qr=Z("querySuggest/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:a,validatePayload:o}})=>{o(e,Nn);let n=e.id,i=await ev(n,t()),s=await a.querySuggest(i);return ue(s)?r(s.error):{id:n,q:i.q,...s.success}}),ev=async(e,t)=>{var r;return{accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.search.apiBaseUrl,count:t.querySuggest[e].count,q:(r=t.querySet)==null?void 0:r[e],locale:t.configuration.search.locale,timezone:t.configuration.search.timezone,actionsHistory:t.configuration.analytics.enabled?ct.getHistory():[],...t.context&&{context:t.context.contextValues},...t.pipeline&&{pipeline:t.pipeline},...t.searchHub&&{searchHub:t.searchHub},...t.configuration.analytics.enabled&&{visitorId:await be(),...t.configuration.analytics.enabled&&await mr(t.configuration.analytics)}}};var hg=E(ya(),e=>{e.addCase(xo,(t,r)=>{let{id:a,query:o}=r.payload;a in t||(t[a]=o)}).addCase(ir,(t,r)=>{let{id:a,query:o}=r.payload;Zl(t,a,o)}).addCase(Ze,(t,r)=>{let{id:a,expression:o}=r.payload;Zl(t,a,o)}).addCase(v.fulfilled,(t,r)=>{let{queryExecuted:a}=r.payload;yg(t,a)}).addCase(ne,(t,r)=>{te(r.payload.q)||yg(t,r.payload.q)}).addCase(ie.fulfilled,(t,r)=>{if(!!r.payload)for(let[a,o]of Object.entries(r.payload.querySet))Zl(t,a,o)})});function yg(e,t){Object.keys(e).forEach(r=>e[r]=t)}var Zl=(e,t,r)=>{t in e&&(e[t]=r)};var Sg=()=>({});var xg=E(Sg(),e=>e.addCase(Fo,(t,r)=>{let a=r.payload.id;a in t||(t[a]=tv(r.payload))}).addCase(gg,(t,r)=>{delete t[r.payload.id]}).addCase(Qr.pending,(t,r)=>{let a=t[r.meta.arg.id];!a||(a.currentRequestId=r.meta.requestId,a.isLoading=!0)}).addCase(Qr.fulfilled,(t,r)=>{let a=t[r.meta.arg.id];if(!a||r.meta.requestId!==a.currentRequestId)return;let{q:o}=r.payload;o&&a.partialQueries.push(o.replace(/;/,encodeURIComponent(";"))),a.responseId=r.payload.responseId,a.completions=r.payload.completions,a.isLoading=!1,a.error=null}).addCase(Qr.rejected,(t,r)=>{let a=t[r.meta.arg.id];!a||(a.error=r.payload||null,a.isLoading=!1)}).addCase(ir,(t,r)=>{let{id:a,query:o}=r.payload;a in t&&Fg(t[a],o)}).addCase(Mr,(t,r)=>{let a=t[r.payload.id];!a||(a.responseId="",a.completions=[],a.partialQueries=[])}).addCase(Ze,(t,r)=>{let{id:a,expression:o}=r.payload,n=t[a];!n||(n.q=o)}).addCase(ne,(t,r)=>{te(r.payload.q)||bg(t,r.payload.q)}).addCase(v.fulfilled,(t,r)=>{let{queryExecuted:a}=r.payload;bg(t,a)}));function Fg(e,t){e.q=t}function bg(e,t){Object.keys(e).forEach(r=>Fg(e[r],t))}function tv(e){return{id:"",completions:[],responseId:"",count:5,q:"",currentRequestId:"",error:null,partialQueries:[],isLoading:!1,...e}}var Cg=E(Pe(),e=>e.addCase(pt,(t,r)=>({...t,...r.payload})).addCase(wt,(t,r)=>{t.q=r.payload}).addCase(Ze,(t,r)=>{t.q=r.payload.expression}).addCase(ie.fulfilled,(t,r)=>{var a,o;return(o=(a=r.payload)==null?void 0:a.query)!=null?o:t}).addCase(ne,(t,r)=>{var a,o;t.q=(a=r.payload.q)!=null?a:t.q,t.enableQuerySyntax=(o=r.payload.enableQuerySyntax)!=null?o:t.enableQuerySyntax}));var bo=()=>new j({values:{documentId:new j({values:{contentIdKey:I,contentIdValue:I}})},options:{required:!0}});var Co=h("smartSnippet/expand"),Ro=h("smartSnippet/collapse"),vo=h("smartSnippet/like"),Ao=h("smartSnippet/dislike"),Po=h("smartSnippet/feedbackModal/open"),Lr=h("smartSnippet/feedbackModal/close"),Us=h("smartSnippet/related/expand",e=>S(e,bo())),$s=h("smartSnippet/related/collapse",e=>S(e,bo()));var _s=(e,t)=>e.findIndex(r=>r.contentIdValue===t.contentIdValue&&r.contentIdKey===t.contentIdKey);function rv({question:e,answerSnippet:t,documentId:{contentIdKey:r,contentIdValue:a}}){return Rf(JSON.stringify({question:e,answerSnippet:t,contentIdKey:r,contentIdValue:a}))}var Rg=E(mn(),e=>e.addCase(Co,t=>{t.expanded=!0}).addCase(Ro,t=>{t.expanded=!1}).addCase(vo,t=>{t.liked=!0,t.disliked=!1,t.feedbackModalOpen=!1}).addCase(Ao,t=>{t.liked=!1,t.disliked=!0}).addCase(Po,t=>{t.feedbackModalOpen=!0}).addCase(Lr,t=>{t.feedbackModalOpen=!1}).addCase(v.fulfilled,(t,r)=>{let a=r.payload.response.questionAnswer.relatedQuestions.map(n=>({contentIdKey:n.documentId.contentIdKey,contentIdValue:n.documentId.contentIdValue,expanded:!1})),o=rv(r.payload.response.questionAnswer);return t.questionAnswerId===o?{...t,relatedQuestions:a}:{...mn(),relatedQuestions:a,questionAnswerId:o}}).addCase(Us,(t,r)=>{let a=_s(t.relatedQuestions,r.payload);a!==-1&&(t.relatedQuestions[a].expanded=!0)}).addCase($s,(t,r)=>{let a=_s(t.relatedQuestions,r.payload);a!==-1&&(t.relatedQuestions[a].expanded=!1)}));var av={results:new K({required:!0,each:new j({values:Qi})}),maxLength:new L({required:!0,min:1,default:10})},Eo=h("recentResults/registerRecentResults",e=>S(e,av)),wo=h("recentResults/pushRecentResult",e=>(dt(e),{payload:e})),Oo=h("recentResults/clearRecentResults");var vg=E(gi(),e=>{e.addCase(Eo,(t,r)=>{t.results=r.payload.results.slice(0,r.payload.maxLength),t.maxLength=r.payload.maxLength}).addCase(Oo,t=>{t.results=[]}).addCase(wo,(t,r)=>{let a=r.payload;t.results=t.results.filter(n=>n.uniqueId!==a.uniqueId);let o=t.results.slice(0,t.maxLength-1);t.results=[a,...o]})});var ov={queries:new K({required:!0,each:new A({emptyAllowed:!1})}),maxLength:new L({required:!0,min:1,default:10})},qo=h("recentQueries/registerRecentQueries",e=>S(e,ov)),Io=h("recentQueries/clearRecentQueries");var Ag=E(hi(),e=>{e.addCase(qo,(t,r)=>{t.queries=r.payload.queries.slice(0,r.payload.maxLength),t.maxLength=r.payload.maxLength}).addCase(Io,t=>{t.queries=[]}).addCase(v.fulfilled,(t,r)=>{let a=r.payload.queryExecuted.trim();if(!a.length)return;t.queries=t.queries.filter(n=>n!==a);let o=t.queries.slice(0,t.maxLength-1);t.queries=[a,...o]})});var nv=E(Gi(),e=>{e.addCase(wf,(t,r)=>{t.id=r.payload.id}).addCase(Ma.rejected,(t,r)=>{t.error=r.payload?r.payload:null,t.isLoading=!1}).addCase(Ma.fulfilled,(t,r)=>{t.error=null,t.recommendations=r.payload.recommendations,t.duration=r.payload.duration,t.isLoading=!1,t.searchUid=r.payload.searchUid}).addCase(Ma.pending,t=>{t.isLoading=!0})});function Pg(e){return e.type==="notify"}function Hs(e){return e.type==="redirect"}function Eg(e){return e.type==="query"}function wg(e){return e.type==="execute"}var Mn=class{constructor(t){this.response=t}get basicExpression(){return this.response.parsedInput.basicExpression}get largeExpression(){return this.response.parsedInput.largeExpression}get redirectionUrl(){let t=this.response.preprocessingOutput.triggers.filter(Hs);return t.length?t[0].content:null}};var Og=D("analytics/redirection",k.Search,(e,t)=>{var r;if((r=t.redirection)==null?void 0:r.redirectTo)return e.logTriggerRedirect({redirectedTo:t.redirection.redirectTo})});var To=h("standaloneSearchBox/register",e=>S(e,{id:I,redirectionUrl:I})),ko=h("standaloneSearchBox/updateAnalyticsToSearchFromLink",e=>S(e,{id:I})),Do=h("standaloneSearchBox/updateAnalyticsToOmniboxFromLink"),jr=Z("standaloneSearchBox/fetchRedirect",async(e,{dispatch:t,getState:r,rejectWithValue:a,extra:{apiClient:o,validatePayload:n}})=>{n(e,{id:new A({emptyAllowed:!1})});let i=await ed(r()),s=await o.plan(i);if(ue(s))return a(s.error);let{redirectionUrl:c}=new Mn(s.success);return c&&t(iv(c)),c||""}),iv=e=>D("analytics/standaloneSearchBox/redirect",k.Custom,t=>t.logTriggerRedirect({redirectedTo:e}))(),ed=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,timezone:e.configuration.search.timezone,q:e.query.q,...e.context&&{context:e.context.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub},...e.configuration.analytics.enabled&&{visitorId:await be()},...e.configuration.analytics.enabled&&await mr(e.configuration.analytics)});var zs=Z("redirection/check",async(e,{dispatch:t,getState:r,rejectWithValue:a,extra:{apiClient:o,validatePayload:n}})=>{n(e,{defaultRedirectionUrl:new A({emptyAllowed:!1})});let i=await o.plan(await ed(r()));if(ue(i))return a(i.error);let s=new Mn(i.success).redirectionUrl;return s&&t(Og()),s||e.defaultRedirectionUrl});var qg=E(ai(),e=>e.addCase(zs.fulfilled,(t,r)=>{t.redirectTo=r.payload}));async function Ig(e,t){var s;let{search:r,accessToken:a,organizationId:o,analytics:n}=e.configuration,i=((s=e.query)==null?void 0:s.q)||"";return{url:r.apiBaseUrl,accessToken:a,organizationId:o,enableNavigation:!1,...n.enabled&&{visitorId:await be()},q:i,...t,requestedOutputSize:t.requestedOutputSize||0}}var Qn=Z("resultPreview/fetchResultContent",async(e,{extra:t,getState:r,rejectWithValue:a})=>{let o=r(),n=await Ig(o,e),i=await t.apiClient.html(n);return ue(i)?a(i.error):{content:i.success,uniqueId:e.uniqueId}});var Tg=E(wa(),e=>{e.addCase(Qn.pending,t=>{t.isLoading=!0}).addCase(Qn.fulfilled,(t,r)=>{let{content:a,uniqueId:o}=r.payload;t.content=a,t.uniqueId=o,t.isLoading=!1})});var Vo=h("searchHub/set",e=>S(e,new A({required:!0,emptyAllowed:!0})));var kg=E(Ee(),e=>{e.addCase(Vo,(t,r)=>r.payload).addCase(ie.fulfilled,(t,r)=>{var a,o;return(o=(a=r.payload)==null?void 0:a.searchHub)!=null?o:t}).addCase(Je,(t,r)=>r.payload.searchHub||t)});function Dg(e,t){var a;let r=(a=t.payload)!=null?a:null;r&&(e.response=$e().response,e.results=[]),e.error=r,e.isLoading=!1}function Vg(e,t){e.error=null,e.response=t.payload.response,e.queryExecuted=t.payload.queryExecuted,e.duration=t.payload.duration,e.isLoading=!1}function Ng(e,t){e.isLoading=!0,e.requestId=t.meta.requestId}var Mg=E($e(),e=>{e.addCase(v.rejected,(t,r)=>Dg(t,r)),e.addCase(Tt.rejected,(t,r)=>Dg(t,r)),e.addCase(v.fulfilled,(t,r)=>{Vg(t,r),t.results=r.payload.response.results,t.searchResponseId=r.payload.response.searchUid}),e.addCase(Tt.fulfilled,(t,r)=>{Vg(t,r),t.results=[...t.results,...r.payload.response.results]}),e.addCase(Be.fulfilled,(t,r)=>{t.response.facets=r.payload.response.facets,t.response.searchUid=r.payload.response.searchUid}),e.addCase(v.pending,Ng),e.addCase(Tt.pending,Ng)});var Qg={by:new Ct({enum:ut,required:!0})},No=h("sortCriteria/register",e=>Lg(e)),Mo=h("sortCriteria/update",e=>Lg(e)),Lg=e=>xa(e)?(e.forEach(t=>S(t,Qg)),{payload:e}):S(e,Qg);var jg=E(We(),e=>{e.addCase(No,(t,r)=>Rt(r.payload)).addCase(Mo,(t,r)=>Rt(r.payload)).addCase(ie.fulfilled,(t,r)=>{var a,o;return(o=(a=r.payload)==null?void 0:a.sortCriteria)!=null?o:t}).addCase(ne,(t,r)=>{var a;return(a=r.payload.sortCriteria)!=null?a:t})});var Bg=E(mi(),e=>e.addCase(To,(t,r)=>{let{id:a,redirectionUrl:o}=r.payload;a in t||(t[a]=sv(o))}).addCase(jr.pending,(t,r)=>{let a=t[r.meta.arg.id];!a||(a.isLoading=!0)}).addCase(jr.fulfilled,(t,r)=>{let a=r.payload,o=t[r.meta.arg.id];!o||(o.redirectTo=a||o.defaultRedirectionUrl,o.isLoading=!1)}).addCase(jr.rejected,(t,r)=>{let a=t[r.meta.arg.id];!a||(a.isLoading=!1)}).addCase(ko,(t,r)=>{let a=t[r.payload.id];!a||(a.analytics.cause="searchFromLink")}).addCase(Do,(t,r)=>{let a=t[r.payload.id];!a||(a.analytics.cause="omniboxFromLink",a.analytics.metadata=r.payload.metadata)}));function sv(e){return{defaultRedirectionUrl:e,redirectTo:"",isLoading:!1,analytics:{cause:"",metadata:null}}}var Ug=E(fi(),e=>e.addCase(v.fulfilled,(t,r)=>{let a=r.payload.response.triggers.filter(Hs);t.redirectTo=a.length?a[0].content:"";let o=r.payload.response.triggers.filter(Eg);t.query=o.length?o[0].content:"";let n=r.payload.response.triggers.filter(wg);t.execute=n.length?{functionName:n[0].content.name,params:n[0].content.params}:{functionName:"",params:[]};let i=r.payload.response.triggers.filter(Pg);t.notification=i.length?i[0].content:""}));var cv={by:new Ct({enum:aa,required:!0})},$g=h("sort/register",e=>Hg(e)),_g=h("sort/update",e=>Hg(e)),Hg=e=>S(e,cv);var uv=E(ns(),e=>{e.addCase($g,(t,r)=>r.payload).addCase(_g,(t,r)=>r.payload)});var Qo=h("dictionaryFieldContext/set",e=>{let t=new j({options:{required:!0}}),r=S(e,t).error;if(r)return{payload:e,error:r};let a=Object.values(e),o=new K({each:le}),n=S(a,o).error;return n?{payload:e,error:n}:{payload:e}}),Lo=h("dictionaryFieldContext/add",e=>{let t=new j({options:{required:!0},values:{field:le,key:le}});return S(e,t)}),jo=h("dictionaryFieldContext/remove",e=>S(e,le));var zg=E(At(),e=>{e.addCase(Qo,(t,r)=>{t.contextValues=r.payload}).addCase(Lo,(t,r)=>{let{field:a,key:o}=r.payload;t.contextValues[a]=o}).addCase(jo,(t,r)=>{delete t.contextValues[r.payload]}).addCase(ie.fulfilled,(t,r)=>{!r.payload||(t.contextValues=r.payload.dictionaryFieldContext.contextValues)})});var Wg=E(Pa(),e=>{e.addCase(ys,(t,r)=>{let a=r.payload,{id:o}=a;o in t||(t[o]={...a,isActive:!1})}).addCase(oa,(t,r)=>{let a=r.payload;Yg(t,a)}).addCase(ne,(t,r)=>{let a=r.payload.tab||"";Yg(t,a)})});function Yg(e,t){t in e&&Object.keys(e).forEach(a=>{e[a].isActive=a===t})}var Bo=I,td=new j({options:{required:!0},values:{caption:le,expression:le,state:new A({constrainTo:["idle","selected"]})}}),Ws=new K({required:!0,each:td});var Uo=h("staticFilter/register",e=>S(e,{id:Bo,values:Ws})),sr=h("staticFilter/toggleSelect",e=>S(e,{id:Bo,value:td})),la=h("staticFilter/deselectAllFilterValues",e=>S(e,Bo)),Ys=e=>D("analytics/staticFilter/select",k.Search,t=>t.logStaticFilterSelect(e))(),$o=e=>D("analytics/staticFilter/deselect",k.Search,t=>t.logStaticFilterDeselect(e))(),Ks=e=>D("analytics/staticFilter/clearAll",k.Search,t=>t.logStaticFilterClearAll(e))();var Kg=E(Aa(),e=>e.addCase(Uo,(t,r)=>{let a=r.payload,{id:o}=a;o in t||(t[o]=a)}).addCase(sr,(t,r)=>{let{id:a,value:o}=r.payload,n=t[a];if(!n)return;let i=n.values.find(c=>c.caption===o.caption);if(!i)return;let s=i.state==="selected";i.state=s?"idle":"selected"}).addCase(la,(t,r)=>{let a=r.payload,o=t[a];!o||o.values.forEach(n=>n.state="idle")}).addCase(Oe,t=>{Object.values(t).forEach(r=>{r.values.forEach(a=>a.state="idle")})}).addCase(ne,(t,r)=>{let a=r.payload.sf||{};Object.entries(t).forEach(([o,n])=>{let i=a[o]||[];n.values.forEach(s=>{s.state=i.includes(s.caption)?"selected":"idle"})})}));var Gg=h("caseAssistConfiguration/set",e=>S(e,{caseAssistId:I,locale:me}));var lv=E(is(),e=>{e.addCase(Gg,(t,r)=>{t.caseAssistId=r.payload.caseAssistId,t.locale=r.payload.locale})});var Jg=h("caseAssist/caseInput/update",e=>S(e,{fieldName:I,fieldValue:le}));var dv=E(cs(),e=>{e.addCase(Jg,(t,r)=>{t[r.payload.fieldName]={value:r.payload.fieldValue}})});var Gs=e=>Object.keys(e).filter(t=>e[t].value!=="").reduce((t,r)=>({...t,[r]:e[r].value}),{});var Xg=h("caseAssist/caseField/register",e=>S(e,{fieldName:I,fieldValue:le})),Zg=h("caseAssist/caseField/update",e=>S(e,{fieldName:I,fieldValue:le})),Js=Z("caseAssist/classifications/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:a}})=>{let o=t(),n=await a.getCaseClassifications(await pv(o));return ue(n)?r(n.error):{response:n.success}}),pv=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.platformUrl,caseAssistId:e.caseAssistConfiguration.caseAssistId,...e.configuration.analytics.enabled&&{visitorId:await be()},fields:e.caseInput,context:e.caseField?Gs(e.caseField.fields):void 0,locale:e.caseAssistConfiguration.locale,debug:e.debug});var fv=E(ss(),e=>{e.addCase(Xg,(t,r)=>{let{fieldName:a,fieldValue:o}=r.payload;t.fields[a]={value:o,suggestions:[]}}).addCase(Zg,(t,r)=>{let{fieldName:a,fieldValue:o}=r.payload;t.fields[a].value=o}).addCase(Js.rejected,(t,r)=>{var a;t.status.error=(a=r.payload)!=null?a:null,t.status.loading=!1}).addCase(Js.fulfilled,(t,r)=>{let a={value:"",suggestions:[]};Object.entries(r.payload.response.fields).forEach(([o,n])=>{t.fields[o]||(t.fields[o]={...a}),t.fields[o].suggestions=n.predictions}),t.status.lastResponseId=r.payload.response.responseId,t.status.error=null,t.status.loading=!1}).addCase(Js.pending,t=>{t.status.loading=!0})});var Xs=Z("caseAssist/documentSuggestions/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:a}})=>{let o=t(),n=await a.getDocumentSuggestions(await mv(o));return ue(n)?r(n.error):{response:n.success}}),mv=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.platformUrl,caseAssistId:e.caseAssistConfiguration.caseAssistId,...e.configuration.analytics.enabled&&{visitorId:await be()},fields:e.caseInput,context:e.caseField?Gs(e.caseField.fields):void 0,locale:e.caseAssistConfiguration.locale,debug:e.debug});var gv=E(us(),e=>{e.addCase(Xs.rejected,(t,r)=>{var a;t.status.error=(a=r.payload)!=null?a:null,t.status.loading=!1}).addCase(Xs.fulfilled,(t,r)=>{t.documents=r.payload.response.documents,t.status.lastResponseId=r.payload.response.responseId,t.status.error=null,t.status.loading=!1}).addCase(Xs.pending,t=>{t.status.loading=!0})});var Zs=h("excerptLength/set",e=>S(e,new L({min:0,required:!0})));var eh=E(yi(),e=>{e.addCase(Zs,(t,r)=>{t.length=r.payload})});var $=wm,$t=pg,Br=Gm,ec=Wm,G=Mg,tc=og,_t=eg,rc=Um,et=tg,Ur=Lm,qe=Mm,ac=zm,tt=Cg,th=Em,oc=Kg,nc=hg,rh=Wg,ah=qg,_o=xg,ic=jg,sc=qm,cc=zg,uc=km,$r=rg,Ho=fg,zo=kg,Wo=Im,oh=Tg,nh=Tm,_r=Ug,Yo=Rg,lc=Bg,dc=vg,pc=Ag,fc=Cp({actionTypes:{redo:hl.type,undo:gl.type,snapshot:rr.type},reducer:ug});var ih=eh;function mc(e,t,r){var a,o,n;t===void 0&&(t=50),r===void 0&&(r={});var i=(a=r.isImmediate)!=null&&a,s=(o=r.callback)!=null&&o,c=r.maxWait,u=Date.now(),l=[];function d(){if(c!==void 0){var p=Date.now()-u;if(p+t>=c)return c-p}return t}var f=function(){var p=[].slice.call(arguments),m=this;return new Promise(function(y,x){var F=i&&n===void 0;if(n!==void 0&&clearTimeout(n),n=setTimeout(function(){if(n=void 0,u=Date.now(),!i){var N=e.apply(m,p);s&&s(N),l.forEach(function(Q){return(0,Q.resolve)(N)}),l=[]}},d()),F){var b=e.apply(m,p);return s&&s(b),y(b)}l.push({resolve:y,reject:x})})};return f.cancel=function(p){n!==void 0&&clearTimeout(n),l.forEach(function(m){return(0,m.reject)(p)}),l=[]},f}function sh(e,t){let r=0,a=mc(()=>r=0,500);return o=>n=>async i=>{if(!(typeof i=="function"))return n(i);let c=await n(i);if(!hv(c))return c;if(typeof t!="function")return e.warn("Unable to renew the expired token because a renew function was not provided. Please specify the #renewAccessToken option when initializing the engine."),c;if(r>=5)return e.warn("Attempted to renew the token but was not successful. Please check the #renewAccessToken function."),c;r++,a();let u=await yv(t);o.dispatch(Rr({accessToken:u})),o.dispatch(i)}}function hv(e){var t;return((t=e.error)==null?void 0:t.name)===new nn().name}async function yv(e){try{return await e()}catch(t){return""}}var Sv={configuration:$,version:nh};function ch(e,t){let r=xv(e,t),{accessToken:a,organizationId:o,platformUrl:n,analytics:i}=e.configuration;if(r.dispatch(Rr({accessToken:a,organizationId:o,platformUrl:n})),i){let{analyticsClientMiddleware:s,...c}=i;r.dispatch(vr(c))}return r}function xv(e,t){let{reducers:r}=e,a=Am({...Sv,...r});e.crossReducer&&a.addCrossReducer(e.crossReducer);let o=t.logger,n=Fv(e,t,a);return{addReducers(i){a.containsAll(i)||(a.add(i),n.replaceReducer(a.combinedReducer))},dispatch:n.dispatch,subscribe:n.subscribe,enableAnalytics(){n.dispatch(Ja())},disableAnalytics(){n.dispatch(Ga())},get state(){return n.getState()},logger:o,store:n}}function Fv(e,t,r){let{preloadedState:a,configuration:o}=e,n=o.name||"coveo-headless",i=bv(e,t.logger);return Pm({preloadedState:a,reducer:r.combinedReducer,middlewares:i,thunkExtraArguments:t,name:n})}function bv(e,t){let{renewAccessToken:r}=e.configuration;return[sh(t,r),es(t),Ki].concat(e.middlewares||[])}var uh=xe(Zi());function lh(e){return(0,uh.default)({name:"@coveo/headless",level:(e==null?void 0:e.level)||"warn",formatters:{log:e==null?void 0:e.logFormatter},browser:{transmit:{send:(e==null?void 0:e.browserPostLogHook)||(()=>{})}}})}function dh(e,t){let r=Cv(e),a=je,o=Rv(e);return{analyticsClientMiddleware:r,validatePayload:a,preprocessRequest:o,logger:t}}function Cv(e){let{analytics:t}=e,r=(a,o)=>o;return(t==null?void 0:t.analyticsClientMiddleware)||r}function Rv(e){return e.preprocessRequest||Ka}var ph={organizationId:I,accessToken:I,platformUrl:new A({required:!1,emptyAllowed:!1}),name:new A({required:!1,emptyAllowed:!1}),analytics:new j({options:{required:!1},values:{enabled:new Y({required:!1}),originContext:new A({required:!1}),originLevel2:new A({required:!1}),originLevel3:new A({required:!1})}})};function fh(){return{organizationId:"searchuisamples",accessToken:"xx564559b1-0045-48e1-953c-3addd1ee4457"}}var mh=new W({...ph,search:new j({options:{required:!1},values:{pipeline:me,searchHub:me,locale:me,timezone:me}})});function rd(){return{...fh(),search:{searchHub:"default"}}}var ad=e=>S(e,{evt:I,type:me}),gh=e=>D("analytics/generic/search",k.Search,t=>{ad(e);let{evt:r,meta:a}=e;return t.logSearchEvent(r,a)})(),hh=e=>D("analytics/generic/click",k.Click,(t,r)=>(dt(e.result),ad(e),t.logClickEvent(e.evt,br(e.result,r),tr(e.result))))(),yh=e=>D("analytics/generic/custom",k.Custom,t=>(ad(e),t.logCustomEventWithType(e.evt,e.type,e.meta)))(),gc=D("analytics/interface/load",k.Search,e=>e.logInterfaceLoad()),Hr=D("analytics/interface/change",k.Search,(e,t)=>e.logInterfaceChange({interfaceChangeTo:t.configuration.analytics.originLevel2})),hc=D("analytics/interface/searchFromLink",k.Search,e=>e.logSearchFromLink()),yc=e=>D("analytics/interface/omniboxFromLink",k.Search,t=>t.logOmniboxFromLink(e))();function Sc(e){return e.search.response.searchUid!==""}var Sh=xe(ml());var od=(e,t,r,a,o,n)=>{let i=e[t];te(i)||r!==i&&(te(o)||o!==i&&o!==a&&(n.warn(`Mismatch on access token (JWT Token) ${t} and engine configuration.`),n.warn(`To remove this warning, make sure that access token value [${i}] matches engine configuration value [${r}]`)))},nd=(e,t)=>!(te(e)||t===e),xc=e=>{try{let t=typeof atob!="undefined"?atob:Sh.atob,a=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),o=t(a);if(!o)return!1;let n=decodeURIComponent(o.split("").map(i=>"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(n)}catch(t){return!1}},xh=(e,t,r,a)=>(od(e,"searchHub",t.searchHub,Ee(),r,a),nd(e.searchHub,t.searchHub)&&(t.searchHub=e.searchHub),t),Fh=(e,t,r,a)=>(od(e,"pipeline",t.pipeline,Ye(),r,a),nd(e.pipeline,t.pipeline)&&(t.pipeline=e.pipeline),t),vv=(e,t,r,a)=>(od(e,"userDisplayName",t.configuration.analytics.userDisplayName,Ve().analytics.userDisplayName,r,a),nd(e.userDisplayName,t.configuration.analytics.userDisplayName)&&(t.configuration.analytics.userDisplayName=e.userDisplayName),t),bh=e=>E({},t=>{t.addCase(Vo,(r,a)=>{let o=xc(r.configuration.accessToken);return o?xh(o,r,a.payload,e):r}).addCase(So,(r,a)=>{let o=xc(r.configuration.accessToken);return o?Fh(o,r,a.payload,e):r}).addCase(Je,(r,a)=>{var s;let o=xc(r.configuration.accessToken);if(!o)return r;let n=xh(o,r,a.payload.searchHub,e);return Fh(o,n,(s=a.payload)==null?void 0:s.pipeline,e)}).addCase(vr,(r,a)=>{let o=xc(r.configuration.accessToken);return o?vv(o,r,a.payload.userDisplayName,e):r})});var Av={debug:Wo,pipeline:Ho,searchHub:zo,search:G};function Ch(e){let t=lh(e.loggerOptions);Pv(e.configuration,t);let r=Ev(e.configuration,t),a={...dh(e.configuration,t),searchAPIClient:r,apiClient:r},o={...e,reducers:Av,crossReducer:bh(t)},n=ch(o,a),{search:i}=e.configuration;return i&&n.dispatch(Je(i)),{...n,get state(){return n.state},executeFirstSearch(s=gc()){if(Sc(n.state))return;let u=v(s);n.dispatch(u)},executeFirstSearchAfterStandaloneSearchBoxRedirect(s){let{cause:c,metadata:u}=s,l=u&&c==="omniboxFromLink"?yc(u):hc();this.executeFirstSearch(l)}}}function Pv(e,t){try{mh.validate(e)}catch(r){throw t.error(r,"Search engine configuration error"),r}}function Ev(e,t){let{search:r}=e;return new Cn({logger:t,preprocessRequest:e.preprocessRequest||Ka,postprocessSearchResponseMiddleware:(r==null?void 0:r.preprocessSearchResponseMiddleware)||rs,postprocessFacetSearchResponseMiddleware:(r==null?void 0:r.preprocessFacetSearchResponseMiddleware)||as,postprocessQuerySuggestResponseMiddleware:(r==null?void 0:r.preprocessQuerySuggestResponseMiddleware)||os})}function B(e){let t,r=new Map,a=()=>r.size===0,o=n=>{try{let i=JSON.stringify(n),s=t!==i;return t=i,s}catch(i){return console.warn('Could not detect if state has changed, check the controller "get state method"',i),!0}};return{subscribe(n){n();let i=Symbol(),s;return a()&&(t=JSON.stringify(this.state),s=e.subscribe(()=>{o(this.state)&&r.forEach(c=>c())})),r.set(i,n),()=>{r.delete(i),a()&&s&&s()}},get state(){return{}}}}var Rh=e=>{let t=/Document weights:\n((?:.)*?)\n+/g,r=/Terms weights:\n((?:.|\n)*)\n+/g,a=/Total weight: ([0-9]+)/g;if(!e)return null;let o=t.exec(e),n=r.exec(e),i=a.exec(e),s=Ov(e),c=vh(o?o[1]:null),u=wv(n),l=i?Number(i[1]):null;return{documentWeights:c,termsWeight:u,totalWeight:l,qreWeights:s}},vh=e=>{let t=/(\w+(?:\s\w+)*): ([-0-9]+)/g,r=/^(\w+(?:\s\w+)*): ([-0-9]+)$/;if(!e)return null;let a=e.match(t);if(!a)return null;let o={};for(let n of a){let i=n.match(r);if(i){let s=i[1],c=i[2];o[s]=Number(c)}}return o},Ah=(e,t)=>{let r=[],a;for(;(a=t.exec(e))!==null;)r.push(a);return r},wv=e=>{let t=/((?:[^:]+: [0-9]+, [0-9]+; )+)\n((?:\w+: [0-9]+; )+)/g,r=/([^:]+): ([0-9]+), ([0-9]+); /g;if(!e||!e[1])return null;let a=Ah(e[1],t);if(!a)return null;let o={};for(let n of a){let i=Ah(n[1],r),s={};for(let u of i)s[u[1]]={Correlation:Number(u[2]),"TF-IDF":Number(u[3])};let c=vh(n[2]);o[Object.keys(s).join(", ")]={terms:s,Weights:c}}return o},Ov=e=>{let t=/(Expression:\s".*")\sScore:\s(?!0)([0-9]+)\n+/g,r=t.exec(e),a=[];for(;r;)a.push({expression:r[1],score:parseInt(r[2],10)}),r=t.exec(e);return a};function Ph(e){return e.search.response.results.map(r=>{let a=Rh(r.rankingInfo);return{result:r,ranking:a}})}var qv=new W({enabled:new Y({default:!1})});function Eh(e,t={}){if(!Iv(e))throw q;let r=B(e),{dispatch:a}=e,o=()=>e.state;we(e,qv,t.initialState,"buildRelevanceInspector").enabled&&a(Pr());let i=s=>{e.logger.warn(`Flag [ ${s} ] is now activated. This should *not* be used in any production environment as it negatively impact performance.`)};return{...r,get state(){let s=o(),c=s.debug;if(!s.debug)return{isEnabled:c};let{executionReport:u,basicExpression:l,advancedExpression:d,constantExpression:f,userIdentities:p,rankingExpressions:m}=s.search.response,{fieldsDescription:y,fetchAllFields:x}=s.fields;return{isEnabled:c,rankingInformation:Ph(s),executionReport:u,expressions:{basicExpression:l,advancedExpression:d,constantExpression:f},userIdentities:p,rankingExpressions:m,fieldsDescription:y,fetchAllFields:x}},enable(){a(Pr()),i("debug")},disable(){a(to()),a(ua())},enableFetchAllFields(){a(go()),i("fetchAllFields")},disableFetchAllFields(){a(ua())},fetchFieldsDescription(){!this.state.isEnabled&&a(Pr()),a(ho()),i("fieldsDescription"),e.logger.warn(`For production environment, please specify the necessary fields either when instantiating a ResultList controller, or by dispatching a registerFieldsToInclude action.
        
        https://docs.coveo.com/en/headless/latest/reference/search/controllers/result-list/#resultlistoptions
        https://docs.coveo.com/en/headless/latest/reference/search/actions/field/#registerfieldstoinclude`)},fetchFieldDescriptions(){this.fetchFieldsDescription()}}}function Iv(e){return e.addReducers({debug:Wo,search:G,configuration:$,fields:$r}),!0}function wh(e){if(!Tv(e))throw q;let t=B(e),{dispatch:r}=e,a=()=>e.state;return{...t,get state(){return{values:a().context.contextValues}},set(o){r(Xa(o))},add(o,n){r(Za({contextKey:o,contextValue:n}))},remove(o){r(eo(o))}}}function Tv(e){return e.addReducers({context:sc}),!0}function Oh(e){if(!kv(e))throw q;let t=B(e),{dispatch:r}=e,a=()=>e.state;return{...t,get state(){return{values:a().dictionaryFieldContext.contextValues}},set(o){r(Qo(o))},add(o,n){r(Lo({field:o,key:n}))},remove(o){r(jo(o))}}}function kv(e){return e.addReducers({dictionaryFieldContext:cc}),!0}function qh(e){if(!Dv(e))throw q;let t=B(e),{dispatch:r}=e;r(Qa());let a=()=>e.state;return{...t,get state(){let o=a();return{originalQuery:o.didYouMean.originalQuery,wasCorrectedTo:o.didYouMean.wasCorrectedTo,wasAutomaticallyCorrected:o.didYouMean.wasAutomaticallyCorrected,queryCorrection:o.didYouMean.queryCorrection,hasQueryCorrection:o.didYouMean.queryCorrection.correctedQuery!==""||o.didYouMean.wasCorrectedTo!==""}},applyCorrection(){r(wt(this.state.queryCorrection.correctedQuery)),r(v(ji()))}}}function Dv(e){return e.addReducers({configuration:$,didYouMean:uc}),!0}var Ih=["alphanumeric","occurrences"];var zr=new A({regex:/^[a-zA-Z0-9-_]+$/}),Wr=new A({required:!0}),Th=new K({each:new A}),Fc=new A,kh=new Y,Yr=new Y,Kr=new L({min:0}),cr=new L({min:1}),bc=new Y({required:!0}),Vv=new j,Nv=new A,Mv={captions:Vv,numberOfValues:cr,query:Nv},Cc=new j({values:Mv});var Dh=new W({field:Wr,basePath:Th,delimitingCharacter:Fc,facetId:zr,facetSearch:Cc,filterByBasePath:kh,filterFacetCount:Yr,injectionDepth:Kr,numberOfValues:cr,sortCriteria:new A({constrainTo:Ih})});function Vh(e,t){let{field:r,state:a}=e;if(!Qv(e))return r;let o=`${r}_`,n=Lv(o,a);return Bv(r,t),`${o}${n}`}function Qv(e){let{field:t,state:r}=e;return Nh(r).some(o=>o&&t in o)}function Lv(e,t){let a=Nh(t).map(o=>Object.keys(o||{})).reduce((o,n)=>o.concat(n),[]);return jv(a,e)+1}function Nh(e){let{facetSet:t,numericFacetSet:r,dateFacetSet:a,categoryFacetSet:o}=e;return[t,r,a,o]}function jv(e,t){let r=0,o=e.map(n=>{let i=n.split(t)[1],s=parseInt(i,10);return Number.isNaN(s)?r:s}).sort().pop();return o!=null?o:r}function Bv(e,t){let r=`A facet with field "${e}" already exists.
  To avoid unexpected behaviour, configure the #id option on the facet controller.`;t.warn(r)}function rt(e,t){let{state:r,logger:a}=e,{field:o,facetId:n}=t;return n||Vh({field:o,state:r},a)}var Ht=(e,t)=>{var r,a;return(a=(r=e.facetOptions.facets[t])==null?void 0:r.enabled)!=null?a:!0};function Mh(e,t){if(!Uv(e))throw q;let r=B(e),{dispatch:a}=e,o=rt(e,t.options),n={facetSearch:{...jt},...Ll,...t.options,facetId:o};de(e,Dh,n,"buildCategoryFacet");let i=()=>cp(e.state,o),s=()=>Lu(e.state,o),c=()=>bt(e.state),u=()=>Ht(e.state,o);return a(Er(n)),{...r,toggleSelect(l){let d=n.numberOfValues;a(wr({facetId:o,selection:l,retrieveCount:d})),a(ae({freezeFacetOrder:!0}))},deselectAll(){a(Dt(o)),a(ae({freezeFacetOrder:!0}))},sortBy(l){a(ro({facetId:o,criterion:l})),a(ae({freezeFacetOrder:!0}))},isSortedBy(l){return i().sortCriteria===l},showMoreValues(){let{numberOfValues:l}=n,{values:d}=this.state,f=d.length+l;a(na({facetId:o,numberOfValues:f})),a(ae({freezeFacetOrder:!0}))},showLessValues(){let{numberOfValues:l}=n;a(na({facetId:o,numberOfValues:l})),a(ae({freezeFacetOrder:!0}))},enable(){a(Ne(o))},disable(){a(ye(o))},get state(){let l=i(),d=s(),f=c(),p=u(),{parents:m,values:y}=ze(d==null?void 0:d.values),x=m.length!==0,F=m.length>0?m[m.length-1].moreValuesAvailable:(d==null?void 0:d.moreValuesAvailable)||!1,b=y.length>n.numberOfValues;return{facetId:o,parents:m,values:y,isLoading:f,hasActiveValues:x,canShowMoreValues:F,canShowLessValues:b,sortCriteria:l.sortCriteria,enabled:p}}}}function Uv(e){return e.addReducers({categoryFacetSet:Ur,categoryFacetSearchSet:ac,facetOptions:qe,configuration:$,search:G}),!0}function Ko(e,t){let r=e.dispatch,{options:a,getFacetSearch:o}=t,{facetId:n}=a;return{updateText(i){r(Tr({facetId:n,query:i,numberOfValues:o().initialNumberOfValues}))},showMoreResults(){let{initialNumberOfValues:i,options:s}=o();r(Tr({facetId:n,numberOfValues:s.numberOfValues+i})),r(mt(n))},search(){r(mt(n))},clear(){r(mo({facetId:n}))},updateCaptions(i){r(Tr({facetId:n,captions:i}))},get state(){let{response:i,isLoading:s,options:c}=o(),{query:u}=c,l=i.values;return{...i,values:l,isLoading:s,query:u}}}}function Qh(e,t){let{dispatch:r}=e,a={...jt,...t.options},{facetId:o}=a,n=()=>e.state.categoryFacetSearchSet[o];r(lo(a));let i=Ko(e,{options:a,getFacetSearch:n});return{...i,select(s){r(uo({facetId:o,value:s}))},get state(){return i.state}}}function Lh(e,t){let{dispatch:r}=e,a={...jt,...t.options},{facetId:o}=a,n=()=>e.state.categoryFacetSearchSet[o],i=Qh(e,{options:{...a}});r(lo(a));let s=Ko(e,{options:a,getFacetSearch:n});return{...s,...i,select:c=>{i.select(c),r(ae({freezeFacetOrder:!0})),r(v(Re({facetId:o,facetValue:c.rawValue})))},get state(){return{...s.state,...i.state}}}}function Rc(e,t){if(!$v(e))throw q;let r=Mh(e,t),{dispatch:a}=e,o=()=>r.state.facetId,n=Lh(e,{options:{facetId:o(),...t.options.facetSearch}}),{state:i,...s}=n;return{...r,facetSearch:s,toggleSelect(c){r.toggleSelect(c);let u=_v(o(),c);a(v(u))},deselectAll(){r.deselectAll(),a(v(Me(o())))},sortBy(c){r.sortBy(c),a(v(Bt({facetId:o(),criterion:c})))},showMoreValues(){r.showMoreValues(),a(Be(po(o())))},showLessValues(){r.showLessValues(),a(Be(fo(o())))},get state(){return{...r.state,facetSearch:n.state}}}}function $v(e){return e.addReducers({categoryFacetSet:Ur,categoryFacetSearchSet:ac,configuration:$,search:G}),!0}function _v(e,t){let r={facetId:e,facetValue:t.value};return t.state==="selected"?ft(r):Re(r)}var id=e=>e.state==="selected",jh=(e,t)=>{let r={facetId:e,facetValue:t.value};return id(t)?ft(r):Re(r)};var Hv={facetId:z,selection:new j({values:Ss})},Bh=Z("facet/executeToggleSelect",({facetId:e,selection:t},r)=>{let{dispatch:a,extra:{validatePayload:o}}=r;o({facetId:e,selection:t},Hv),a(Vt({facetId:e,selection:t})),a(ae({freezeFacetOrder:!0}))});var Uh=["score","alphanumeric","occurrences","automatic"];var $h=new W({facetId:zr,field:Wr,delimitingCharacter:Fc,filterFacetCount:Yr,injectionDepth:Kr,numberOfValues:cr,sortCriteria:new A({constrainTo:Uh}),facetSearch:Cc});function _h(e,t){if(!zv(e))throw q;let{dispatch:r}=e,a=B(e),o=rt(e,t.options),n={facetSearch:{...jt},..._l,...t.options,facetId:o};de(e,$h,n,"buildFacet");let i=()=>Jn(e.state,o),s=()=>dn(e.state,o),c=()=>bt(e.state),u=()=>Ht(e.state,o),l=()=>{let{currentValues:f}=i();return f.filter(p=>p.state!=="idle").length},d=()=>{let{currentValues:f}=i(),p=n.numberOfValues,m=!!f.find(y=>y.state==="idle");return p<f.length&&m};return r(Or(n)),{...a,toggleSelect:f=>r(Bh({facetId:n.facetId,selection:f})),toggleSingleSelect:function(f){f.state==="idle"&&r(Fe(o)),this.toggleSelect(f)},isValueSelected:id,deselectAll(){r(Fe(o)),r(ae({freezeFacetOrder:!0}))},sortBy(f){r(ao({facetId:o,criterion:f})),r(ae({freezeFacetOrder:!0}))},isSortedBy(f){return this.state.sortCriterion===f},showMoreValues(){let f=i().numberOfValues,p=n.numberOfValues,m=p-f%p,y=f+m;r(ia({facetId:o,numberOfValues:y})),r(sa({facetId:o,isFieldExpanded:!0})),r(ae({freezeFacetOrder:!0}))},showLessValues(){let f=n.numberOfValues,p=Math.max(f,l());r(ia({facetId:o,numberOfValues:p})),r(sa({facetId:o,isFieldExpanded:!1})),r(ae({freezeFacetOrder:!0}))},enable(){r(Ne(o))},disable(){r(ye(o))},get state(){let f=i(),p=s(),m=c(),y=u(),x=f.sortCriteria,F=p?p.values:[],b=F.some(Q=>Q.state!=="idle"),N=p?p.moreValuesAvailable:!1;return{facetId:o,values:F,sortCriterion:x,isLoading:m,hasActiveValues:b,canShowMoreValues:N,canShowLessValues:d(),enabled:y}}}}function zv(e){return e.addReducers({facetSet:Br,facetOptions:qe,configuration:$,facetSearchSet:ec}),!0}function Hh(e,t){let{dispatch:r}=e,{options:a,select:o}=t,{facetId:n}=a,i=()=>e.state.facetSearchSet[n];r(Ts(a));let s=Ko(e,{options:a,getFacetSearch:i});return{...s,select(c){r(ca({facetId:n,value:c})),o(c)},singleSelect(c){r(Fe(n)),r(ca({facetId:n,value:c})),o(c)},get state(){let{values:c}=s.state;return{...s.state,values:c.map(({count:u,displayValue:l,rawValue:d})=>({count:u,displayValue:l,rawValue:d}))}}}}function vc(e,t){if(!Wv(e))throw q;let{dispatch:r}=e,a=_h(e,t),o=()=>a.state.facetId,i=(()=>{let{facetSearch:u}=t.options;return Hh(e,{options:{facetId:o(),...u},select:l=>{r(ae({freezeFacetOrder:!0})),r(v(Re({facetId:o(),facetValue:l.rawValue})))}})})(),{state:s,...c}=i;return{...a,facetSearch:c,toggleSelect(u){a.toggleSelect(u),r(v(jh(o(),u)))},deselectAll(){a.deselectAll(),r(v(Me(o())))},sortBy(u){a.sortBy(u),r(v(Bt({facetId:o(),criterion:u})))},isSortedBy(u){return this.state.sortCriterion===u},showMoreValues(){a.showMoreValues(),r(Be(po(o())))},showLessValues(){a.showLessValues(),r(Be(fo(o())))},get state(){return{...a.state,facetSearch:i.state}}}}function Wv(e){return e.addReducers({facetSet:Br,configuration:$,facetSearchSet:ec,search:G}),!0}var sd=e=>e.state==="selected",Ac=(e,t)=>{let r=`${t.start}..${t.end}`,a={facetId:e,facetValue:r};return sd(t)?ft(a):Re(a)};function Pc(e,t){let{facetId:r,getRequest:a}=t,o=B(e),n=e.dispatch,i=()=>Ht(e.state,r);return{...o,isValueSelected:sd,deselectAll(){n(Fe(r)),n(ae({freezeFacetOrder:!0}))},sortBy(s){n(so({facetId:r,criterion:s})),n(ae({freezeFacetOrder:!0}))},isSortedBy(s){return this.state.sortCriterion===s},enable(){n(Ne(r))},disable(){n(ye(r))},get state(){let s=a(),c=it(e.state,r),u=s.sortCriteria,l=c?c.values:[],d=bt(e.state),f=i(),p=l.some(m=>m.state!=="idle");return{facetId:r,values:l,sortCriterion:u,hasActiveValues:p,isLoading:d,enabled:f}}}}function Ec(e,t){if(!e.generateAutomaticRanges&&e.currentValues===void 0){let r=`currentValues should be specified for ${t} when generateAutomaticRanges is false.`;throw new Error(r)}}var wc=h("rangeFacet/executeToggleSelect",e=>S(e,io(e.selection)));var Yv={facetId:z,selection:new j({values:no})},zh=Z("dateFacet/executeToggleSelect",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,Yv),t(Mt(e)),t(wc(e)),t(ae({freezeFacetOrder:!0}))});var Oc=["idle","selected"];var qc=["ascending","descending"],Ic=["even","equiprobable"];var Kv={start:new A,end:new A,endInclusive:new Y,state:new A({constrainTo:Oc})},Gv=new W({facetId:zr,field:Wr,generateAutomaticRanges:bc,filterFacetCount:Yr,injectionDepth:Kr,numberOfValues:cr,currentValues:new K({each:new j({values:Kv})}),sortCriteria:new A({constrainTo:qc}),rangeAlgorithm:new A({constrainTo:Ic})});function Tc(e,t){de(e,Gv,t,"buildDateFacet"),xs(t)}function Wh(e,t){if(!Jv(e))throw q;Ec(t.options,"buildDateFacet");let r=e.dispatch,a=rt(e,t.options),o={currentValues:[],...t.options,facetId:a};Tc(e,o),r(Nt(o));let n=Pc(e,{facetId:a,getRequest:()=>e.state.dateFacetSet[a]});return{...n,toggleSelect:i=>r(zh({facetId:a,selection:i})),toggleSingleSelect:function(i){i.state==="idle"&&r(Fe(a)),this.toggleSelect(i)},get state(){return n.state}}}function Jv(e){return e.addReducers({configuration:$,search:G,dateFacetSet:_t,facetOptions:qe}),!0}function Yh(e,t){let r=Wh(e,t),a=e.dispatch,o=()=>r.state.facetId;return{...r,deselectAll(){r.deselectAll(),a(v(Me(o())))},sortBy(n){r.sortBy(n),a(v(Bt({facetId:o(),criterion:n})))},toggleSelect:n=>{r.toggleSelect(n),a(v(Ac(o(),n)))},get state(){return r.state}}}var Xv={facetId:z,selection:new j({values:oo})},Zv="numericFacet/executeToggleSelect",Kh=Z(Zv,(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,Xv),t(Lt(e)),t(wc(e)),t(ae({freezeFacetOrder:!0}))});var eA={start:new L,end:new L,endInclusive:new Y,state:new A({constrainTo:Oc})},tA=new W({facetId:zr,field:Wr,generateAutomaticRanges:bc,filterFacetCount:Yr,injectionDepth:Kr,numberOfValues:cr,currentValues:new K({each:new j({values:eA})}),sortCriteria:new A({constrainTo:qc}),rangeAlgorithm:new A({constrainTo:Ic})});function kc(e,t){de(e,tA,t,"buildNumericFacet"),Cs(t)}function Go(e){return{endInclusive:!1,state:"idle",...e}}function Gh(e,t){if(!rA(e))throw q;Ec(t.options,"buildNumericFacet");let r=e.dispatch,a=rt(e,t.options),o={currentValues:[],...t.options,facetId:a};kc(e,o),r(Qt(o));let n=Pc(e,{facetId:a,getRequest:()=>e.state.numericFacetSet[a]});return{...n,toggleSelect:i=>r(Kh({facetId:a,selection:i})),toggleSingleSelect(i){i.state==="idle"&&r(Fe(a)),this.toggleSelect(i)},get state(){return n.state}}}function rA(e){return e.addReducers({numericFacetSet:et,facetOptions:qe,configuration:$,search:G}),!0}function Jh(e,t){if(!aA(e))throw q;let r=Gh(e,t),a=e.dispatch,o=()=>r.state.facetId;return{...r,deselectAll(){r.deselectAll(),a(v(Me(o())))},sortBy(n){r.sortBy(n),a(v(Bt({facetId:o(),criterion:n})))},toggleSelect:n=>{r.toggleSelect(n),a(v(Ac(o(),n)))},get state(){return{...r.state}}}}function aA(e){return e.addReducers({numericFacetSet:et,configuration:$,search:G}),!0}function oA(e,t){return!!t&&t.facetId in e.numericFacetSet}var nA=(e,t)=>{let r=it(e,t);if(oA(e,r))return r},Dc=(e,t)=>{let r=nA(e,t);return r?r.values.filter(a=>a.state==="selected"):[]};function Xh(e,t){var c;if(!iA(e))throw q;let r=B(e),{dispatch:a}=e,o=()=>e.state,n=rt(e,t.options),i={...t.options,currentValues:((c=t.initialState)==null?void 0:c.range)?[{...t.initialState.range,endInclusive:!0,state:"selected"}]:[],generateAutomaticRanges:!1,facetId:n};kc(e,i),a(Qt(i));let s=()=>Ht(e.state,n);return{...r,clear:()=>{a(nr({facetId:n,values:[]})),a(ae({freezeFacetOrder:!0}))},setRange:u=>{let l={...u,state:"selected",numberOfResults:0,endInclusive:!0},d=nr({facetId:n,values:[l]});return d.error?!1:(a(d),a(ae({freezeFacetOrder:!0})),!0)},enable(){a(Ne(n))},disable(){a(ye(n))},get state(){let u=bt(o()),l=s(),d=Dc(o(),n),f=d.length?d[0]:void 0;return{facetId:n,isLoading:u,range:f,enabled:l}}}}function iA(e){return e.addReducers({numericFacetSet:et,facetOptions:qe,configuration:$,search:G}),!0}function Zh(e,t){if(!sA(e))throw q;let r=Xh(e,t),{dispatch:a}=e,o=()=>r.state.facetId;return{...r,clear:()=>{r.clear(),a(v(Me(o())))},setRange:n=>{let i=r.setRange(n);return i&&a(v(Re({facetId:o(),facetValue:`${n.start}..${n.end}`}))),i},get state(){return{...r.state}}}}function sA(e){return e.addReducers({numericFacetSet:et,configuration:$,search:G}),!0}function cA(e,t){return!!t&&t.facetId in e.dateFacetSet}var uA=(e,t)=>{let r=it(e,t);if(cA(e,r))return r},Vc=(e,t)=>{let r=uA(e,t);return r?r.values.filter(a=>a.state==="selected"):[]};function ey(e,t){var c;if(!lA(e))throw q;let r=B(e),{dispatch:a}=e,o=()=>e.state,n=rt(e,t.options),i={...t.options,currentValues:((c=t.initialState)==null?void 0:c.range)?[{...t.initialState.range,endInclusive:!0,state:"selected"}]:[],generateAutomaticRanges:!1,facetId:n};Tc(e,i),a(Nt(i));let s=()=>Ht(e.state,n);return{...r,clear:()=>{a(or({facetId:n,values:[]})),a(ae({freezeFacetOrder:!0}))},setRange:u=>{let l={...u,state:"selected",numberOfResults:0,endInclusive:!0},d=or({facetId:n,values:[l]});return d.error?!1:(a(d),a(ae({freezeFacetOrder:!0})),!0)},enable(){a(Ne(n))},disable(){a(ye(n))},get state(){let u=bt(o()),l=s(),d=Vc(o(),n),f=d.length?d[0]:void 0;return{facetId:n,isLoading:u,range:f,enabled:l}}}}function lA(e){return e.addReducers({dateFacetSet:_t,facetOptions:qe,configuration:$,search:G}),!0}function ty(e,t){if(!dA(e))throw q;let r=ey(e,t),{dispatch:a}=e,o=()=>r.state.facetId;return{...r,clear:()=>{r.clear(),a(v(Me(o())))},setRange:n=>{let i=r.setRange(n);return i&&a(v(Re({facetId:o(),facetValue:`${n.start}..${n.end}`}))),i},get state(){return{...r.state}}}}function dA(e){return e.addReducers({dateFacetSet:_t,configuration:$,search:G}),!0}var Nc=D("history/analytics/forward",k.Search,e=>e.logSearchEvent("historyForward")),Mc=D("history/analytics/backward",k.Search,e=>e.logSearchEvent("historyBackward")),Qc=D("history/analytics/noresultsback",k.Search,e=>e.logNoResultsBack());function ry(e){if(!pA(e))throw q;let t=B(e),{dispatch:r}=e,a=()=>e.state,o=n=>n.past.length>0&&!te(n.present);return{...t,get state(){return a().history},async back(){!o(this.state)||(await r(Rn()),r(v(Mc())))},async forward(){!this.state.future.length||!this.state.present||(await r(Li()),r(v(Nc())))},async backOnNoResults(){!o(this.state)||(await r(Rn()),r(v(Qc())))}}}function pA(e){return e.addReducers({history:fc,configuration:$,facetOrder:rc}),!0}function fA(e){return e.pagination.firstResult}function ay(e){return e.pagination.numberOfResults}function mA(e){return e.pagination.totalCountFiltered}var ur=e=>{let t=fA(e),r=ay(e);return Jl(t,r)},Ln=e=>{let t=mA(e),r=ay(e);return Xl(t,r)},Lc=(e,t)=>{let r=ur(e),a=Ln(e),o=gA(r,t);return o=hA(o),o=yA(o,a),SA(o)};function gA(e,t){let r=t%2==0,a=Math.floor(t/2),o=r?a-1:a,n=e-a,i=e+o;return{start:n,end:i}}function hA(e){let t=Math.max(yo-e.start,0),r=e.start+t,a=e.end+t;return{start:r,end:a}}function yA(e,t){let r=Math.max(e.end-t,0),a=Math.max(e.start-r,yo),o=e.end-r;return{start:a,end:o}}function SA(e){let t=[];for(let r=e.start;r<=e.end;++r)t.push(r);return t}var Jo=D("analytics/pager/resize",k.Search,(e,t)=>{var r;return e.logPagerResize({currentResultsPerPage:((r=t.pagination)==null?void 0:r.numberOfResults)||Te().numberOfResults})}),Xo=D("analytics/pager/number",k.Search,(e,t)=>e.logPagerNumber({pagerNumber:ur(t)})),jc=D("analytics/pager/next",k.Search,(e,t)=>e.logPagerNext({pagerNumber:ur(t)})),Bc=D("analytics/pager/previous",k.Search,(e,t)=>e.logPagerPrevious({pagerNumber:ur(t)}));var xA=new W({numberOfPages:new L({default:5,min:0})}),FA=new W({page:new L({min:1})});function oy(e,t={}){if(!bA(e))throw q;let r=B(e),{dispatch:a}=e,o=de(e,xA,t.options,"buildPager"),i=we(e,FA,t.initialState,"buildPager").page;i&&a(Ba(i));let s=()=>ur(e.state),c=()=>{let{numberOfPages:l}=o;return Lc(e.state,l)},u=()=>Ln(e.state);return{...r,get state(){let l=s(),d=u(),f=l>yo&&d>0,p=l<d;return{currentPage:l,currentPages:c(),maxPage:d,hasPreviousPage:f,hasNextPage:p}},selectPage(l){a(qt(l))},nextPage(){a(Ua())},previousPage(){a($a())},isCurrentPage(l){return l===this.state.currentPage}}}function bA(e){return e.addReducers({configuration:$,pagination:$t}),!0}function ny(e,t={}){let{dispatch:r}=e,a=oy(e,t);return{...a,get state(){return a.state},selectPage(o){a.selectPage(o),r(v(Xo()))},nextPage(){a.nextPage(),r(v(jc()))},previousPage(){a.previousPage(),r(v(Bc()))}}}function iy(e){if(!CA(e))throw q;let t=B(e),r=()=>e.state;return{...t,get state(){return{hasError:r().search.error!==null,error:r().search.error}}}}function CA(e){return e.addReducers({search:G}),!0}function Zo(e){if(!RA(e))throw q;let t=B(e),r=()=>e.state;return{...t,get state(){let a=r();return{hasError:a.search.error!==null,isLoading:a.search.isLoading,hasResults:!!a.search.results.length,firstSearchExecuted:Sc(a)}}}}function RA(e){return e.addReducers({search:G}),!0}function sy(e){if(!vA(e))throw q;let t=B(e),r=Zo(e),a=()=>e.state,o=()=>{let i=e.state.search.duration/1e3;return Math.round((i+Number.EPSILON)*100)/100};return{...t,get state(){let n=a();return{...r.state,durationInMilliseconds:n.search.duration,durationInSeconds:o(),firstResult:n.pagination.firstResult+1,hasDuration:n.search.duration!==0,hasQuery:n.search.queryExecuted!=="",lastResult:n.pagination.firstResult+n.search.results.length,query:n.search.queryExecuted,total:n.pagination.totalCountFiltered}}}}function vA(e){return e.addReducers({search:G,pagination:$t}),!0}var AA=new W({fieldsToInclude:new K({required:!1,each:new A({required:!0,emptyAllowed:!1})})});function Uc(e,t){if(!PA(e))throw q;let r=B(e),a=Zo(e),{dispatch:o}=e,n=()=>e.state,i=de(e,AA,t==null?void 0:t.options,"buildResultList");i.fieldsToInclude&&o(Dr(i.fieldsToInclude));let s=()=>e.state.search.results.length<e.state.search.response.totalCountFiltered,c=0,u=0,l=5,d=200,f=!1;return{...r,get state(){let m=n();return{...a.state,results:m.search.results,searchUid:m.search.response.searchUid,moreResultsAvailable:s(),searchResponseId:m.search.searchResponseId}},fetchMoreResults:()=>{if(e.state.search.isLoading)return;if(!s()){e.logger.info("No more results are available for the result list to fetch.");return}if(Date.now()-c<d){if(u++,u>=l){c=Date.now(),!f&&e.logger.error(`The result list method "fetchMoreResults" execution prevented because it has been triggered consecutively ${l} times, with little delay. Please verify the conditions under which the function is called.`),f=!0;return}}else u=0;f=!1,o(Tt()).then(()=>c=Date.now())}}}function PA(e){return e.addReducers({search:G,configuration:$,fields:$r}),!0}var EA=e=>D("analytics/result/open",k.Click,(t,r)=>(dt(e),t.logDocumentOpen(br(e,r),tr(e)))),$c=e=>EA(e)();function en(e,t,r){if(!wA(e))throw q;let a=1e3,o={selectionDelay:a,debounceWait:a,...t.options},n;return{select:mc(r,o.debounceWait,{isImmediate:!0}),beginDelayedSelect(){n=setTimeout(r,o.selectionDelay)},cancelPendingSelect(){n&&clearTimeout(n)}}}function wA(e){return e.addReducers({configuration:$}),!0}function cy(e,t){let r=!1,a=()=>{r||(r=!0,e.dispatch($c(t.options.result)))};return en(e,t,()=>{a(),e.dispatch(wo(t.options.result))})}var OA=new W({numberOfResults:new L({min:0})});function uy(e,t={}){if(!qA(e))throw q;let r=B(e),{dispatch:a}=e,o=()=>e.state,i=we(e,OA,t.initialState,"buildResultsPerPage").numberOfResults;return i!==void 0&&a(La(i)),{...r,get state(){return{numberOfResults:o().pagination.numberOfResults}},set(s){a(ja(s))},isSetTo(s){return s===this.state.numberOfResults}}}function qA(e){return e.addReducers({pagination:$t,configuration:$}),!0}function ly(e,t={}){if(!IA(e))throw q;let r=uy(e,t),{dispatch:a}=e;return{...r,get state(){return{...r.state}},set(o){r.set(o),a(v(Jo()))}}}function IA(e){return e.addReducers({pagination:$t,configuration:$}),!0}var tn=D("analytics/searchbox/submit",k.Search,e=>e.logSearchboxSubmit());var _c={enableQuerySyntax:!1,numberOfSuggestions:5},cd={open:new A,close:new A},ud={id:I,numberOfSuggestions:new L({min:0}),enableQuerySyntax:new Y,highlightOptions:new j({values:{notMatchDelimiters:new j({values:cd}),exactMatchDelimiters:new j({values:cd}),correctionDelimiters:new j({values:cd})}})},dy=new W(ud);var Hc=e=>D("analytics/querySuggest",k.Search,(t,r)=>{let a=ld(r,e);return t.logOmniboxAnalytics(a)})();function ld(e,t){let{id:r,suggestion:a}=t,o=e.querySuggest&&e.querySuggest[r];if(!o)throw new Error(`Unable to determine the query suggest analytics metadata to send because no query suggest with id "${r}" was found. Please check the sent #id.`);let n=o.completions.map(u=>u.expression),i=o.partialQueries.length-1,s=o.partialQueries[i]||"",c=o.responseId;return{suggestionRanking:n.indexOf(a),partialQuery:s,partialQueries:o.partialQueries,suggestions:n,querySuggestResponseId:c}}function zc(e,t={}){var u,l;if(!kA(e))throw q;let r=B(e),{dispatch:a}=e,o=()=>e.state,n=((u=t.options)==null?void 0:u.id)||Di("search_box"),i={id:n,highlightOptions:{...(l=t.options)==null?void 0:l.highlightOptions},..._c,...t.options};de(e,dy,i,"buildSearchBox"),a(xo({id:n,query:e.state.query.q})),i.numberOfSuggestions&&a(Fo({id:n,q:e.state.query.q,count:i.numberOfSuggestions}));let s=()=>e.state.querySet[i.id],c=async d=>{let{enableQuerySyntax:f}=i;a(Wi({q:s(),enableQuerySyntax:f})),await a(v(d))};return{...r,updateText(d){a(ir({id:n,query:d})),this.showSuggestions()},clear(){a(ir({id:n,query:""})),a(Mr({id:n}))},showSuggestions(){i.numberOfSuggestions&&a(Qr({id:n}))},selectSuggestion(d){a(Ze({id:n,expression:d})),c(Hc({id:n,suggestion:d})).then(()=>{a(Mr({id:n}))})},submit(){c(tn()),a(Mr({id:n}))},get state(){let d=o(),f=d.querySuggest[i.id],p=TA(f,i.highlightOptions),m=f?f.isLoading:!1;return{value:s(),suggestions:p,isLoading:d.search.isLoading,isLoadingSuggestions:m}}}}function TA(e,t){return e?e.completions.map(r=>({highlightedValue:Il(r.highlighted,t),rawValue:r.expression})):[]}function kA(e){return e.addReducers({query:tt,querySuggest:_o,configuration:$,querySet:nc,search:G}),!0}var rn=D("analytics/sort/results",k.Search,(e,t)=>e.logResultsSort({resultsSortBy:t.sortCriteria||We()}));function DA(e,t){if(!t)return;let r=new W({criterion:new K({each:Fp})}),a=VA(t),o={...t,criterion:a};we(e,r,o,"buildSort")}function VA(e){return e.criterion?xa(e.criterion)?e.criterion:[e.criterion]:[]}function py(e,t={}){var s;if(!NA(e))throw q;let r=B(e),{dispatch:a}=e,o=()=>e.state;DA(e,t.initialState);let n=(s=t.initialState)==null?void 0:s.criterion,i=()=>a(v(rn()));return n&&a(No(n)),{...r,sortBy(c){a(Mo(c)),a(qt(1)),i()},isSortedBy(c){return this.state.sortCriteria===Rt(c)},get state(){return{sortCriteria:o().sortCriteria}}}}function NA(e){return e.addReducers({configuration:$,sortCriteria:ic}),!0}function dd(e){return{state:"idle",...e}}var MA=new W({id:Bo,values:Ws});function fy(e,t){if(!QA(e))throw q;de(e,MA,t.options,"buildStaticFilter");let r=B(e),{dispatch:a}=e,o=()=>e.state,{id:n}=t.options;return a(Uo(t.options)),{...r,toggleSelect(i){let s=my(n,i);a(sr({id:n,value:i})),a(v(s))},toggleSingleSelect(i){let s=my(n,i);i.state==="idle"&&a(la(n)),a(sr({id:n,value:i})),a(v(s))},deselectAll(){let i=Ks({staticFilterId:n});a(la(n)),a(v(i))},isValueSelected(i){return i.state==="selected"},get state(){var c;let i=((c=o().staticFilterSet[n])==null?void 0:c.values)||[],s=i.some(u=>u.state!=="idle");return{id:n,values:i,hasActiveValues:s}}}}function QA(e){return e.addReducers({staticFilterSet:oc}),!0}function my(e,t){let{caption:r,expression:a,state:o}=t;return(o==="idle"?Ys:$o)({staticFilterId:e,staticFilterValue:{caption:r,expression:a}})}var LA=new W({expression:le,id:I}),jA=new W({isActive:new Y});function gy(e,t){if(UA(t.options.id),!BA(e))throw q;let r=B(e),{dispatch:a}=e,o=()=>e.state;de(e,LA,t.options,"buildTab");let n=we(e,jA,t.initialState,"buildTab"),{id:i,expression:s}=t.options;return a(ys({id:i,expression:s})),n.isActive&&a(oa(i)),{...r,select(){a(oa(i)),a(v(Hr()))},get state(){return{isActive:o().tabSet[i].isActive}}}}function BA(e){return e.addReducers({configuration:$,tabSet:rh}),!0}function UA(e){let t=Ve().analytics.originLevel2;if(e===t)throw new Error(`The #id option on the Tab controller cannot use the reserved value "${t}". Please specify a different value.`)}function hy(e){if(!$A(e))throw q;let t=B(e),r=()=>e.state;return{...t,sort(a){return _a(a,this.state.facetIds)},get state(){return{facetIds:r().search.response.facets.map(n=>n.facetId)}}}}function $A(e){return e.addReducers({search:G,facetOptions:qe}),!0}var Wc=()=>D("analytics/facet/deselectAllBreadcrumbs",k.Search,e=>e.logBreadcrumbResetAll())();var _A={categoryFacetId:z,categoryFacetPath:new K({required:!0,each:I})},HA=(e,{categoryFacetId:t,categoryFacetPath:r})=>{let a=e.categoryFacetSet[t],o=a==null?void 0:a.request.field,n=`${o}_${t}`;return{categoryFacetId:t,categoryFacetPath:r,categoryFacetField:o,categoryFacetTitle:n}},Yc=e=>D("analytics/categoryFacet/breadcrumb",k.Search,(t,r)=>(S(e,_A),t.logBreadcrumbFacet(HA(r,e))))();var Kc=(e,{facetId:t,selection:r})=>{let a=e.dateFacetSet[t]||e.numericFacetSet[t],o=a.field,n=`${a.field}_${t}`;return{facetId:t,facetField:o,facetTitle:n,facetRangeEndInclusive:r.endInclusive,facetRangeEnd:`${r.end}`,facetRangeStart:`${r.start}`}};var Gc=e=>D("analytics/numericFacet/breadcrumb",k.Search,(t,r)=>{S(e,io(e.selection));let a=Kc(r,e);return t.logBreadcrumbFacet(a)})();var Jc=e=>D("analytics/dateFacet/breadcrumb",k.Search,(t,r)=>{S(e,io(e.selection));let a=Kc(r,e);return t.logBreadcrumbFacet(a)})();function yy(e){if(!zA(e))throw q;let t=B(e),{dispatch:r}=e,a=(p,m,y)=>Object.keys(p).map(x=>{let F=y(e.state,x).map(b=>({value:b,deselect:()=>m({facetId:x,selection:b})}));return{facetId:x,field:p[x].field,values:F}}).filter(x=>x.values.length),o=()=>a(e.state.facetSet,({facetId:p,selection:m})=>{let y=ks({facetId:p,facetValue:m.value});r(Vt({facetId:p,selection:m})),r(qr({facetId:p,freezeCurrentValues:!1})),r(v(y))},Xn),n=()=>a(e.state.numericFacetSet,p=>{r(Lt(p)),r(v(Gc(p)))},Dc),i=()=>a(e.state.dateFacetSet,p=>{r(Mt(p)),r(v(Jc(p)))},Vc),s=p=>{let m=pn(e.state,p);return{facetId:p,field:e.state.categoryFacetSet[p].request.field,path:m,deselect:()=>{r(Dt(p)),r(v(Yc({categoryFacetPath:m.map(y=>y.value),categoryFacetId:p})))}}},c=()=>Object.keys(e.state.categoryFacetSet).map(s).filter(p=>p.path.length),u=()=>{let p=e.state.staticFilterSet||{};return Object.values(p).map(l)},l=p=>{let{id:m,values:y}=p,x=y.filter(F=>F.state==="selected").map(F=>d(m,F));return{id:m,values:x}},d=(p,m)=>({value:m,deselect:()=>{let{caption:y,expression:x}=m,F=$o({staticFilterId:p,staticFilterValue:{caption:y,expression:x}});r(sr({id:p,value:m})),r(v(F))}});function f(){return!![...o(),...n(),...i(),...c(),...u()].length}return{...t,get state(){return{facetBreadcrumbs:o(),categoryFacetBreadcrumbs:c(),numericFacetBreadcrumbs:n(),dateFacetBreadcrumbs:i(),staticFilterBreadcrumbs:u(),hasBreadcrumbs:f()}},deselectAll:()=>{r(Oe()),r(v(Wc()))},deselectBreadcrumb(p){p.deselect()}}}function zA(e){return e.addReducers({configuration:$,search:G,facetSet:Br,numericFacetSet:et,dateFacetSet:_t,categoryFacetSet:Ur}),!0}var Sy=new W({...ud,redirectionUrl:new A({required:!0,emptyAllowed:!1})});function xy(e,t){if(!WA(e))throw q;let{dispatch:r}=e,a=()=>e.state,o=t.options.id||Di("standalone_search_box"),n={id:o,highlightOptions:{...t.options.highlightOptions},..._c,...t.options};de(e,Sy,n,"buildStandaloneSearchBox");let i=zc(e,{options:n});return r(To({id:o,redirectionUrl:n.redirectionUrl})),{...i,updateText(s){i.updateText(s),r(ko({id:o}))},selectSuggestion(s){let c=ld(a(),{id:o,suggestion:s});r(Ze({id:o,expression:s})),r(Do({id:o,metadata:c})),this.submit()},submit(){r(pt({q:this.state.value,enableQuerySyntax:n.enableQuerySyntax})),r(jr({id:o}))},get state(){let c=a().standaloneSearchBoxSet[o];return{...i.state,isLoading:c.isLoading,redirectTo:c.redirectTo,analytics:c.analytics}}}}function WA(e){return e.addReducers({standaloneSearchBoxSet:lc,configuration:$,query:tt,querySuggest:_o}),!0}function Fy(e){var t,r,a,o;return{q:Pe().q,enableQuerySyntax:Pe().enableQuerySyntax,aq:(r=(t=e.advancedSearchQueries)==null?void 0:t.defaultFilters.aq)!=null?r:Qe().defaultFilters.aq,cq:(o=(a=e.advancedSearchQueries)==null?void 0:a.defaultFilters.cq)!=null?o:Qe().defaultFilters.cq,firstResult:Te().firstResult,numberOfResults:Te().numberOfResults,sortCriteria:We(),f:{},cf:{},nf:{},df:{},debug:Le(),sf:{},tab:""}}function by(e,t){return e.q!==t.q?tn():e.sortCriteria!==t.sortCriteria?rn():e.firstResult!==t.firstResult?Xo():e.numberOfResults!==t.numberOfResults?Jo():Xc(e.f,t.f)?pd(e.f,t.f):Xc(e.cf,t.cf)?pd(e.cf,t.cf):Xc(e.nf,t.nf)?Ry(e.nf,t.nf):Xc(e.df,t.df)?Ry(e.df,t.df):Hr()}function Xc(e={},t={}){return JSON.stringify(e)!==JSON.stringify(t)}function Cy(e){let t={};return Object.keys(e).forEach(r=>t[r]=e[r].map(a=>`${a.start}..${a.end}`)),t}function pd(e={},t={}){let r=Object.keys(e),a=Object.keys(t),o=r.filter(d=>!a.includes(d));if(o.length){let d=o[0];return e[d].length>1?Me(d):ft({facetId:d,facetValue:e[d][0]})}let n=a.filter(d=>!r.includes(d));if(n.length){let d=n[0];return Re({facetId:d,facetValue:t[d][0]})}let i=a.find(d=>t[d].filter(f=>e[d].includes(f)));if(!i)return Hr();let s=e[i],c=t[i],u=c.filter(d=>!s.includes(d));if(u.length)return Re({facetId:i,facetValue:u[0]});let l=s.filter(d=>!c.includes(d));return l.length?ft({facetId:i,facetValue:l[0]}):Hr()}function Ry(e={},t={}){return pd(Cy(e),Cy(t))}var YA=new W({parameters:new j({options:{required:!0},values:hs})});function Zc(e,t){let{dispatch:r}=e,a=B(e);return we(e,YA,t.initialState,"buildSearchParameterManager"),r(ne(t.initialState.parameters)),{...a,synchronize(o){let n=Ay(e),i=vy(e,n),s=vy(e,o);Bs(i,s)||(r(ne(s)),r(v(by(i,s))))},get state(){return{parameters:Ay(e)}}}}function vy(e,t){return{...Fy(e.state),...t}}function Ay(e){let t=e.state;return{...KA(t),...GA(t),...JA(t),...XA(t),...ZA(t),...eP(t),...tP(t),...rP(t),...nP(t),...sP(t),...cP(t),...uP(t),...lP(t),...aP(t)}}function KA(e){if(e.query===void 0)return{};let t=e.query.q;return t!==Pe().q?{q:t}:{}}function GA(e){if(e.query===void 0)return{};let t=e.query.enableQuerySyntax;return t!==Pe().enableQuerySyntax?{enableQuerySyntax:t}:{}}function JA(e){if(e.advancedSearchQueries===void 0)return{};let{aq:t,defaultFilters:r}=e.advancedSearchQueries;return t!==r.aq?{aq:t}:{}}function XA(e){if(e.advancedSearchQueries===void 0)return{};let{cq:t,defaultFilters:r}=e.advancedSearchQueries;return t!==r.cq?{cq:t}:{}}function ZA(e){let t=Object.values(e.tabSet||{}).find(r=>r.isActive);return t?{tab:t.id}:{}}function eP(e){if(e.pagination===void 0)return{};let t=e.pagination.firstResult;return t!==Te().firstResult?{firstResult:t}:{}}function tP(e){if(e.pagination===void 0)return{};let t=e.pagination.numberOfResults;return t!==Te().numberOfResults?{numberOfResults:t}:{}}function rP(e){if(e.sortCriteria===void 0)return{};let t=e.sortCriteria;return t!==We()?{sortCriteria:t}:{}}function aP(e){if(e.staticFilterSet===void 0)return{};let t=Object.entries(e.staticFilterSet).map(([r,a])=>{let o=oP(a.values);return o.length?{[r]:o}:{}}).reduce((r,a)=>({...r,...a}),{});return Object.keys(t).length?{sf:t}:{}}function oP(e){return e.filter(t=>t.state==="selected").map(t=>t.caption)}function nP(e){if(e.facetSet===void 0)return{};let t=Object.entries(e.facetSet).filter(([r])=>{var a,o,n;return(n=(o=(a=e.facetOptions)==null?void 0:a.facets[r])==null?void 0:o.enabled)!=null?n:!0}).map(([r,a])=>{let o=iP(a.currentValues);return o.length?{[r]:o}:{}}).reduce((r,a)=>({...r,...a}),{});return Object.keys(t).length?{f:t}:{}}function iP(e){return e.filter(t=>t.state==="selected").map(t=>t.value)}function sP(e){if(e.categoryFacetSet===void 0)return{};let t=Object.entries(e.categoryFacetSet).filter(([r])=>{var a,o,n;return(n=(o=(a=e.facetOptions)==null?void 0:a.facets[r])==null?void 0:o.enabled)!=null?n:!0}).map(([r,a])=>{let{parents:o}=ze(a.request.currentValues),n=o.map(i=>i.value);return n.length?{[r]:n}:{}}).reduce((r,a)=>({...r,...a}),{});return Object.keys(t).length?{cf:t}:{}}function cP(e){if(e.numericFacetSet===void 0)return{};let t=Object.entries(e.numericFacetSet).filter(([r])=>{var a,o,n;return(n=(o=(a=e.facetOptions)==null?void 0:a.facets[r])==null?void 0:o.enabled)!=null?n:!0}).map(([r,a])=>{let o=Py(a.currentValues);return o.length?{[r]:o}:{}}).reduce((r,a)=>({...r,...a}),{});return Object.keys(t).length?{nf:t}:{}}function uP(e){if(e.dateFacetSet===void 0)return{};let t=Object.entries(e.dateFacetSet).filter(([r])=>{var a,o,n;return(n=(o=(a=e.facetOptions)==null?void 0:a.facets[r])==null?void 0:o.enabled)!=null?n:!0}).map(([r,a])=>{let o=Py(a.currentValues);return o.length?{[r]:o}:{}}).reduce((r,a)=>({...r,...a}),{});return Object.keys(t).length?{df:t}:{}}function Py(e){return e.filter(t=>t.state==="selected")}function lP(e){if(e.debug===void 0)return{};let t=e.debug;return t!==Le()?{debug:t}:{}}var eu="&",jn="=",fd="..";function Bn(){return{serialize:dP,deserialize:yP}}function dP(e){return Object.entries(e).map(pP).filter(t=>t).join(eu)}function pP(e){let[t,r]=e;return wy(t)?t==="f"||t==="cf"||t==="sf"?fP(r)?gP(t,r):"":t==="nf"||t==="df"?mP(r)?hP(t,r):"":`${t}${jn}${encodeURIComponent(r)}`:""}function fP(e){return md(e)?Ey(e,r=>typeof r=="string"):!1}function mP(e){return md(e)?Ey(e,r=>md(r)&&"start"in r&&"end"in r):!1}function md(e){return!!(e&&typeof e=="object")}function Ey(e,t){return Object.entries(e).filter(a=>{let o=a[1];return!Array.isArray(o)||!o.every(t)}).length===0}function gP(e,t){return Object.entries(t).map(([r,a])=>`${e}[${r}]${jn}${a.map(o=>encodeURIComponent(o)).join(",")}`).join(eu)}function hP(e,t){return Object.entries(t).map(([r,a])=>{let o=a.map(({start:n,end:i})=>`${n}${fd}${i}`).join(",");return`${e}[${r}]${jn}${o}`}).join(eu)}function yP(e){return e.split(eu).map(a=>SP(a)).map(xP).filter(vP).map(AP).reduce((a,o)=>{let[n,i]=o;if(Oy(n)){let s={...a[n],...i};return{...a,[n]:s}}return{...a,[n]:i}},{})}function SP(e){let[t,...r]=e.split(jn),a=r.join(jn);return[t,a]}function xP(e){let[t,r]=e,o=/^(f|cf|nf|df|sf)\[(.+)\]$/.exec(t);if(!o)return e;let n=o[1],i=o[2],s=r.split(","),c=FP(n,s),u={[i]:c};return[n,JSON.stringify(u)]}function FP(e,t){return e==="nf"?bP(t):e==="df"?RP(t):t}function bP(e){return e.map(t=>t.split(fd).map(parseFloat)).filter(t=>t.length===2&&t.every(Number.isFinite)).map(([t,r])=>Go({start:t,end:r,state:"selected"}))}function CP(e){try{return Tf(e)?($i(e,Fl),!0):Ot(e)?(Cr(e),!0):!1}catch(t){return!1}}function RP(e){return e.map(t=>t.split(fd)).filter(t=>t.length===2&&t.every(r=>CP(r))).map(([t,r])=>Ir({start:t,end:r,state:"selected"}))}function vP(e){let t=wy(e[0]),r=e.length===2;return t&&r}function wy(e){return e in{q:!0,aq:!0,cq:!0,enableQuerySyntax:!0,firstResult:!0,numberOfResults:!0,sortCriteria:!0,f:!0,cf:!0,nf:!0,df:!0,debug:!0,sf:!0,tab:!0}}function AP(e){let[t,r]=e;return t==="enableQuerySyntax"?[t,r==="true"]:t==="debug"?[t,r==="true"]:t==="firstResult"?[t,parseInt(r)]:t==="numberOfResults"?[t,parseInt(r)]:Oy(t)?[t,PP(r)]:[t,decodeURIComponent(r)]}function PP(e){let t=JSON.parse(e),r={};return Object.entries(t).forEach(a=>{let[o,n]=a;r[o]=n.map(i=>Sa(i)?decodeURIComponent(i):i)}),r}function Oy(e){return["f","cf","nf","df","sf"].includes(e)}var EP=new W({fragment:new A});function qy(e,t){let r;function a(){r=e.state.search.requestId}function o(){return r!==e.state.search.requestId}if(!OP(e))throw q;we(e,EP,t.initialState,"buildUrlManager");let n=B(e),i=t.initialState.fragment;a();let s=Zc(e,{initialState:{parameters:tu(i)}});return{...n,subscribe(c){let u=()=>{let l=this.state.fragment;!wP(i,l)&&o()&&(i=l,c()),a()};return u(),e.subscribe(u)},get state(){return{fragment:Bn().serialize(s.state.parameters)}},synchronize(c){i=c;let u=tu(c);s.synchronize(u)}}}function wP(e,t){if(e===t)return!0;let r=tu(e),a=tu(t);return Bs(r,a)}function tu(e){return Bn().deserialize(e)}function OP(e){return e.addReducers({configuration:$}),!0}function ru(e,t,r){if(!qP(e))throw q;let{dispatch:a}=e,o=()=>e.state,n=B(e),{result:i,maximumPreviewSize:s}=t.options,c=i.uniqueId;return{...n,fetchResultContent(){a(Qn({uniqueId:c,requestedOutputSize:s})),r&&r()},get state(){let u=i.hasHtmlVersion,l=o().resultPreview,d=c===l.uniqueId?l.content:"",f=l.isLoading;return{content:d,resultHasPreview:u,isLoading:f}}}}function qP(e){return e.addReducers({configuration:$,resultPreview:oh}),!0}var Iy=e=>IP(e)(),IP=e=>D("analytics/resultPreview/open",k.Click,(t,r)=>{dt(e);let a=br(e,r),o=tr(e);return t.logDocumentQuickview(a,o)});function Ty(e,t){return ru(e,t,()=>{e.dispatch(Iy(t.options.result))})}var TP=new W(zl);function ky(e,t={}){var i;if(!kP(e))throw q;let r=Uc(e,t),{dispatch:a}=e,o=()=>e.state,n=((i=t.options)==null?void 0:i.folding)?de(e,TP,t.options.folding,"buildFoldedResultList"):{};return a(Vr({...n})),{...r,loadCollection:s=>{a(Nr(s.result.raw[e.state.folding.fields.collection]))},get state(){let s=o();return{...r.state,results:r.state.results.map(c=>{let u=c.raw[s.folding.fields.collection];return!u||!s.folding.collections[u]?{result:c,moreResultsAvailable:!1,isLoadingMoreResults:!1,children:[]}:s.folding.collections[u]})}}}}function kP(e){return e.addReducers({search:G,configuration:$,folding:tc,query:tt}),!0}var Dy=D("analytics/trigger/query",k.Search,(e,t)=>{var r;if((r=t.triggers)==null?void 0:r.query)return e.logTriggerQuery()}),Vy=D("analytics/trigger/notify",k.Search,(e,t)=>{var r;if((r=t.triggers)==null?void 0:r.notification)return e.logTriggerNotify({notification:t.triggers.notification})}),Ny=D("analytics/trigger/redirect",k.Search,(e,t)=>{var r;if((r=t.triggers)==null?void 0:r.redirectTo)return e.logTriggerRedirect({redirectedTo:t.triggers.redirectTo})}),My=D("analytics/trigger/execute",k.Search,(e,t)=>{var r;if((r=t.triggers)==null?void 0:r.execute)return e.logTriggerExecute({executed:t.triggers.execute.functionName})});function Qy(e){if(!DP(e))throw q;let t=B(e),{dispatch:r}=e,a=()=>e.state,o=a().triggers.redirectTo;return{...t,subscribe(n){let i=()=>{let s=o!==this.state.redirectTo;o=this.state.redirectTo,s&&this.state.redirectTo&&(n(),r(Ny()))};return i(),e.subscribe(i)},get state(){return{redirectTo:a().triggers.redirectTo}}}}function DP(e){return e.addReducers({triggers:_r}),!0}function Ly(e){if(!VP(e))throw q;let t=B(e),{dispatch:r}=e,a=()=>e.state,o=a().triggers.query,n=a().query.q;return{...t,subscribe(i){let s=()=>{let c=o!==this.state.newQuery;if(o=this.state.newQuery,c&&this.state.newQuery){n=a().query.q;let u={q:a().triggers.query};r(pt(u)),i(),r(v(Dy()))}};return s(),e.subscribe(s)},get state(){return{newQuery:a().triggers.query,originalQuery:n,wasQueryModified:a().triggers.query!==""}}}}function VP(e){return e.addReducers({triggers:_r,query:tt}),!0}function jy(e){if(!NP(e))throw q;let t=B(e),{dispatch:r}=e,a=()=>e.state,o=a().triggers.execute.functionName,n=a().triggers.execute.params;return{...t,subscribe(i){let s=()=>{let c=o!==this.state.functionName||n!==this.state.params;o=this.state.functionName,n=this.state.params,c&&this.state.functionName&&(i(),r(My()))};return s(),e.subscribe(s)},get state(){return{functionName:a().triggers.execute.functionName,params:a().triggers.execute.params}}}}function NP(e){return e.addReducers({triggers:_r}),!0}function By(e){if(!MP(e))throw q;let t=B(e),{dispatch:r}=e,a=()=>e.state,o=a().triggers.notification;return{...t,subscribe(n){let i=()=>{let s=o!==this.state.notification;o=this.state.notification,s&&a().triggers.notification&&(n(),r(Vy()))};return i(),e.subscribe(i)},get state(){return{notification:a().triggers.notification}}}}function MP(e){return e.addReducers({triggers:_r}),!0}var au=D("analytics/smartSnippet/expand",k.Custom,e=>e.logExpandSmartSnippet()),ou=D("analytics/smartSnippet/collapse",k.Custom,e=>e.logCollapseSmartSnippet()),nu=D("analytics/smartSnippet/like",k.Custom,e=>e.logLikeSmartSnippet()),iu=D("analytics/smartSnippet/dislike",k.Custom,e=>e.logDislikeSmartSnippet()),su=D("analytics/smartSnippet/feedbackModal/open",k.Custom,e=>e.logOpenSmartSnippetFeedbackModal()),cu=D("analytics/smartSnippet/feedbackModal/close",k.Custom,e=>e.logCloseSmartSnippetFeedbackModal()),uu=e=>D("analytics/smartSnippet/sendFeedback",k.Custom,t=>t.logSmartSnippetFeedbackReason(e))(),lu=e=>D("analytics/smartSnippet/sendFeedback",k.Custom,t=>t.logSmartSnippetFeedbackReason("other",e))(),du=e=>D("analytics/smartSnippetSuggestion/expand",k.Custom,t=>(S(e,bo()),t.logExpandSmartSnippetSuggestion(e)))(),pu=e=>D("analytics/smartSnippetSuggestion/expand",k.Custom,t=>(S(e,bo()),t.logCollapseSmartSnippetSuggestion(e)))();function Uy(e){if(!QP(e))throw q;let t=B(e),r=()=>e.state;return{...t,get state(){let a=r();return{question:a.search.response.questionAnswer.question,answer:a.search.response.questionAnswer.answerSnippet,documentId:a.search.response.questionAnswer.documentId,expanded:a.questionAnswering.expanded,answerFound:a.search.response.questionAnswer.answerSnippet!=="",liked:a.questionAnswering.liked,disliked:a.questionAnswering.disliked,feedbackModalOpen:a.questionAnswering.feedbackModalOpen}},expand(){e.dispatch(au()),e.dispatch(Co())},collapse(){e.dispatch(ou()),e.dispatch(Ro())},like(){e.dispatch(nu()),e.dispatch(vo())},dislike(){e.dispatch(iu()),e.dispatch(Ao())},openFeedbackModal(){e.dispatch(su()),e.dispatch(Po())},closeFeedbackModal(){e.dispatch(cu()),e.dispatch(Lr())},sendFeedback(a){e.dispatch(uu(a)),e.dispatch(Lr())},sendDetailedFeedback(a){e.dispatch(lu(a)),e.dispatch(Lr())}}}function QP(e){return e.addReducers({search:G,questionAnswering:Yo}),!0}function $y(e){if(!LP(e))throw q;let t=B(e),r=()=>e.state,a=(o,n)=>{let i=_s(n,o.documentId);return i===-1?!1:n[i].expanded};return{...t,get state(){let o=r();return{questions:o.search.response.questionAnswer.relatedQuestions.map(n=>({question:n.question,answer:n.answerSnippet,documentId:n.documentId,expanded:a(n,o.questionAnswering.relatedQuestions)}))}},expand(o){e.dispatch(du(o)),e.dispatch(Us(o))},collapse(o){e.dispatch(pu(o)),e.dispatch($s(o))}}}function LP(e){return e.addReducers({search:G,questionAnswering:Yo}),!0}var _y=D("analytics/recentQueries/clear",k.Custom,e=>e.logClearRecentQueries()),Hy=D("analytics/recentQueries/click",k.Search,e=>e.logRecentQueryClick());var jP={initialState:{queries:[]},options:{maxLength:10}},BP=new W({queries:new K({required:!0})}),UP=new W({maxLength:new L({required:!0,min:1})});function $P(e,t){de(e,UP,t==null?void 0:t.options,"buildRecentQueriesList"),we(e,BP,t==null?void 0:t.initialState,"buildRecentQueriesList")}function zy(e,t){if(!_P(e))throw q;let r=B(e),{dispatch:a}=e,o=()=>e.state,n={...jP,...t};$P(e,n);let i={queries:n.initialState.queries,maxLength:n.options.maxLength};return a(qo(i)),{...r,get state(){let s=o();return{...s.recentQueries,analyticsEnabled:s.configuration.analytics.enabled}},clear(){a(_y()),a(Io())},executeRecentQuery(s){let c=new L({required:!0,min:0,max:this.state.queries.length}).validate(s);if(c)throw new Error(c);a(Wi({q:this.state.queries[s]})),a(v(Hy()))}}}function _P(e){return e.addReducers({search:G,recentQueries:pc}),!0}var HP=e=>D("analytics/recentResults/click",k.Custom,(t,r)=>{dt(e),t.logRecentResultClick(br(e,r),tr(e))}),Wy=e=>HP(e)(),Yy=D("analytics/recentResults/clear",k.Custom,e=>e.logClearRecentResults());var zP={initialState:{results:[]},options:{maxLength:10}},WP=new W({results:new K({required:!0})}),YP=new W({maxLength:new L({required:!0,min:1})});function KP(e,t){de(e,YP,t==null?void 0:t.options,"buildRecentResultsList"),we(e,WP,t==null?void 0:t.initialState,"buildRecentResultsList")}function Ky(e,t){if(!GP(e))throw q;let r=B(e),{dispatch:a}=e,o=()=>e.state,n={...zP,...t};KP(e,n);let i={results:n.initialState.results,maxLength:n.options.maxLength};return a(Eo(i)),{...r,get state(){return o().recentResults},clear(){a(Yy()),a(Oo())}}}function GP(e){return e.addReducers({recentResults:dc}),!0}function Gy(e,t){return en(e,t,()=>e.dispatch(Wy(t.options.result)))}function Jy(e,t){if(!JP(e))throw q;let r={},a=l=>{var d,f;return(f=(d=e.state.facetOptions.facets[l])==null?void 0:d.enabled)!=null?f:!0},o=l=>e.state.facetSet&&l in e.state.facetSet?e.state.facetSet[l].currentValues:e.state.categoryFacetSet&&l in e.state.categoryFacetSet?e.state.categoryFacetSet[l].request.currentValues:e.state.numericFacetSet&&l in e.state.numericFacetSet?e.state.numericFacetSet[l].currentValues:e.state.dateFacetSet&&l in e.state.dateFacetSet?e.state.dateFacetSet[l].currentValues:null,n=()=>{let l=!1;return Object.keys(r).forEach(d=>{let f=JSON.stringify(o(d));f!==r[d]&&(r[d]=f,l=!0)}),l},i=()=>t.conditions.some(l=>{if(!a(l.parentFacetId))return!1;let d=o(l.parentFacetId);return d===null?!1:l.condition(d)}),s=()=>{e.state.facetSet&&Object.entries(e.state.facetSet).forEach(([l,d])=>d.freezeCurrentValues&&e.dispatch(qr({facetId:l,freezeCurrentValues:!1})))},c=()=>{let l=a(t.facetId),d=i();l!==d&&(e.dispatch(d?Ne(t.facetId):ye(t.facetId)),s())};t.conditions.forEach(l=>{l.parentFacetId in r||(r[l.parentFacetId]=JSON.stringify(o(l.parentFacetId)))});let u=t.conditions.length?e.subscribe(()=>{n()&&c()}):()=>{};return t.conditions.length&&c(),{stopWatching(){u()}}}function JP(e){return e.addReducers({facetOptions:qe}),!0}function Xy(e,t){let r=vc(e,t),{facetSearch:a,subscribe:o}=r;return{subscribe:o,...a,updateText:function(n){a.updateText(n),a.search()},get state(){return r.state.facetSearch}}}function Zy(e,t){let r=Rc(e,t),{facetSearch:a,subscribe:o}=r;return{subscribe:o,...a,updateText:function(n){a.updateText(n),a.search()},get state(){return r.state.facetSearch}}}function XP(e){return e.addReducers({advancedSearchQueries:th}),{updateAdvancedSearchQueries:ms,registerAdvancedSearchQueries:gs}}function ZP(e){return e.addReducers({categoryFacetSet:Ur}),{deselectAllCategoryFacetValues:Dt,registerCategoryFacet:Er,toggleSelectCategoryFacetValue:wr,updateCategoryFacetNumberOfValues:na,updateCategoryFacetSortCriterion:ro,updateFacetAutoSelection:It}}function eE(e){return e.addReducers({facetSet:Br}),{deselectAllFacetValues:Fe,registerFacet:Or,toggleSelectFacetValue:Vt,updateFacetIsFieldExpanded:sa,updateFacetNumberOfValues:ia,updateFacetSortCriterion:ao,updateFreezeCurrentValues:qr,updateFacetAutoSelection:It}}function tE(e){return e.addReducers({configuration:$}),{disableAnalytics:Ga,enableAnalytics:Ja,setOriginLevel2:ps,setOriginLevel3:fs,updateAnalyticsConfiguration:vr,updateBasicConfiguration:Rr}}function rE(e){return e.addReducers({configuration:$,pipeline:Ho,searchHub:zo}),{updateSearchConfiguration:Je}}function aE(e){return e.addReducers({context:sc}),{addContext:Za,removeContext:eo,setContext:Xa}}function oE(e){return e.addReducers({dictionaryFieldContext:cc}),{addContext:Lo,removeContext:jo,setContext:Qo}}function nE(e){return e.addReducers({debug:Wo}),{disableDebug:to,enableDebug:Pr}}function iE(e){return e.addReducers({dateFacetSet:_t}),{deselectAllDateFacetValues:bs,registerDateFacet:Nt,toggleSelectDateFacetValue:Mt,updateDateFacetSortCriterion:Fs,updateDateFacetValues:or}}function sE(e){return e.addReducers({facetOptions:qe}),{updateFacetOptions:ae,enableFacet:Ne,disableFacet:ye}}function cE(e){return e.addReducers({didYouMean:uc,query:tt}),{applyDidYouMeanCorrection:wt,disableDidYouMean:Bi,enableDidYouMean:Qa}}function uE(e){return e.addReducers({fields:$r}),{registerFieldsToInclude:Dr,enableFetchAllFields:go,disableFetchAllFields:ua,fetchFieldsDescription:ho}}function lE(e){return e.addReducers({history:fc,facetOrder:rc}),{back:Rn,forward:Li}}function dE(e){return e.addReducers({numericFacetSet:et}),{deselectAllNumericFacetValues:vs,registerNumericFacet:Qt,toggleSelectNumericFacetValue:Lt,updateNumericFacetSortCriterion:Rs,updateNumericFacetValues:nr}}function pE(e){return e.addReducers({folding:tc}),{registerFolding:Vr,loadCollection:Nr}}function fE(e){return e.addReducers({pagination:$t}),{nextPage:Ua,previousPage:$a,registerNumberOfResults:La,registerPage:Ba,updateNumberOfResults:ja,updatePage:qt}}function mE(e){return e.addReducers({pipeline:Ho}),{setPipeline:So}}function gE(e){return e.addReducers({query:tt}),{updateQuery:pt}}function hE(e){return e.addReducers({querySet:nc}),{registerQuerySetQuery:xo,updateQuerySetQuery:ir}}function yE(e){return e.addReducers({querySuggest:_o}),{clearQuerySuggest:Mr,fetchQuerySuggestions:Qr,registerQuerySuggest:Fo,selectQuerySuggestion:Ze}}function SE(e){return e.logger.warn('The "loadRedirectionActions" function is deprecated. Please use "loadStandaloneSearchBoxSetActions" instead.'),e.addReducers({redirection:ah}),{checkForRedirection:zs}}function xE(e){return e.addReducers({search:G}),{executeSearch:v,fetchMoreResults:Tt,fetchFacetValues:Be}}function FE(e){return e.addReducers({searchHub:zo}),{setSearchHub:Vo}}function bE(e){return e.addReducers({sortCriteria:ic}),{registerSortCriterion:No,updateSortCriterion:Mo}}function CE(e){return e.addReducers({standaloneSearchBoxSet:lc}),{registerStandaloneSearchBox:To,fetchRedirectUrl:jr,updateAnalyticsToSearchFromLink:ko,updateAnalyticsToOmniboxFromLink:Do}}function RE(e){return e.addReducers({staticFilterSet:oc}),{registerStaticFilter:Uo,toggleSelectStaticFilterValue:sr,deselectAllStaticFilterValues:la}}function vE(e){return e.addReducers({questionAnswering:Yo}),{collapseSmartSnippet:Ro,expandSmartSnippet:Co,dislikeSmartSnippet:Ao,likeSmartSnippet:vo,openFeedbackModal:Po,closeFeedbackModal:Lr}}function AE(e){return e.addReducers({}),{deselectAllFacets:Ge,deselectAllBreadcrumbs:Oe}}function PE(e){return e.addReducers({recentQueries:pc}),{registerRecentQueries:qo,clearRecentQueries:Io}}function EE(e){return e.addReducers({recentResults:dc}),{registerRecentResults:Eo,clearRecentResults:Oo,pushRecentResult:wo}}function wE(e){return e.addReducers({excerptLength:ih}),{setExcerptLength:Zs}}var OE=new W({priority:new L({required:!1,default:0,min:0}),fields:new K({required:!1,each:I})});function eS(e){if(!qE(e))throw q;let t=[],r=a=>{a.forEach(o=>{if(OE.validate(o,"Check the arguments of registerTemplates"),!o.conditions.every(i=>i instanceof Function))throw new fn("Each result template conditions should be a function that takes a result as an argument and returns a boolean")})};return{registerTemplates(...a){let o=[];try{r(a)}catch(n){e.logger.error(n,"Result template manager error");return}a.forEach(n=>{let i={...n,priority:n.priority||0,fields:n.fields||[]};t.push(i),o.push(...i.fields)}),t.sort((n,i)=>i.priority-n.priority),o.length&&e.dispatch(Dr(o))},selectTemplate(a){let o=t.find(n=>n.conditions.every(i=>i(a)));return o?o.content:null}}}function qE(e){return e.addReducers({fields:$r}),!0}var Un=(e,t)=>{let r=e;return te(r[t])?te(e.raw[t])?null:e.raw[t]:r[t]},tS=e=>t=>e.every(r=>!te(Un(t,r))),rS=e=>t=>e.every(r=>te(Un(t,r))),aS=(e,t)=>r=>{let a=nS(e,r);return t.some(o=>a.some(n=>`${n}`.toLowerCase()===o.toLowerCase()))},oS=(e,t)=>r=>{let a=nS(e,r);return t.every(o=>a.every(n=>`${n}`.toLowerCase()!==o.toLowerCase()))},nS=(e,t)=>{let r=Un(t,e);return Vi(r)?r:[r]};var gd;(n=>{n.getResultProperty=Un,n.fieldsMustBeDefined=tS,n.fieldsMustNotBeDefined=rS,n.fieldMustMatch=aS,n.fieldMustNotMatch=oS})(gd||(gd={}));function IE(e){return e.addReducers({}),{logClearBreadcrumbs:Wc,logInterfaceLoad:gc,logSearchFromLink:hc,logOmniboxFromLink:yc,logInterfaceChange:Hr,logDidYouMeanClick:ji,logCategoryFacetBreadcrumb:Yc,logFacetBreadcrumb:ks,logFacetClearAll:Me,logFacetDeselect:ft,logFacetSelect:Re,logFacetShowLess:fo,logFacetShowMore:po,logFacetUpdateSort:Bt,logDateFacetBreadcrumb:Jc,logNumericFacetBreadcrumb:Gc,logNavigateBackward:Mc,logNavigateForward:Nc,logPageNext:jc,logPageNumber:Xo,logPagePrevious:Bc,logPagerResize:Jo,logSearchboxSubmit:tn,logQuerySuggestionClick:Hc,logResultsSort:rn,logDislikeSmartSnippet:iu,logLikeSmartSnippet:nu,logOpenSmartSnippetFeedbackModal:su,logCloseSmartSnippetFeedbackModal:cu,logSmartSnippetFeedback:uu,logSmartSnippetDetailedFeedback:lu,logExpandSmartSnippet:au,logCollapseSmartSnippet:ou,logExpandSmartSnippetSuggestion:du,logCollapseSmartSnippetSuggestion:pu,logNoResultsBack:Qc,logStaticFilterSelect:Ys,logStaticFilterDeselect:$o,logStaticFilterClearAll:Ks}}function TE(e){return e.addReducers({}),{logDocumentOpen:$c}}function kE(e){return e.addReducers({}),{logSearchEvent:gh,logClickEvent:hh,logCustomEvent:yh}}function DE(e){let{by:t,order:r}=e;switch(t){case ut.Relevancy:return Fa();case ut.QRE:return ii();case ut.NoSort:return si();case ut.Date:if(!r)throw new Error('An order (i.e., ascending or descending) should be specified for a sort criterion sorted by "date"');return oi(r);default:if(!r)throw new Error(`An order (i.e., ascending or descending) should be specified for a sort criterion sorted by a field, such as "${t}"`);return ni(t,r)}}function VE(e){return e===void 0||e===Yt.Ascending||e===Yt.Descending}function iS(e){let t=e.split(","),r=new Error(`Wrong criterion expression format for "${e}"`);if(!t.length)throw r;return t.map(a=>{let o=a.trim().split(" "),n=o[0].toLowerCase(),i=o[1]&&o[1].toLowerCase();if(o.length>2||n==="")throw r;if(!VE(i))throw new Error(`Wrong criterion sort order "${i}" in expression "${e}". Order should either be "${Yt.Ascending}" or "${Yt.Descending}"`);return DE({by:n,order:i})})}function Ie(e){return e.negate?"NOT ":""}function at(e){return{contains:"=",differentThan:"<>",fuzzyMatch:"~=",greaterThan:">",greaterThanOrEqual:">=",isExactly:"==",lowerThan:"<",lowerThanOrEqual:"<=",phoneticMatch:"%=",regexMatch:"/=",wildcardMatch:"*="}[e]}function sS(e){return{toQuerySyntax(){let{field:t,value:r}=e,a=at(e.operator);return`${Ie(e)}@${t}${a}${r}`}}}function cS(e){return{toQuerySyntax(){let t=Ie(e),{field:r,from:a,to:o}=e,n=at("isExactly");return`${t}@${r}${n}${a}..${o}`}}}function uS(e){return{toQuerySyntax(){let t=Ie(e),{expression:r}=e;return`${t}"${r}"`}}}function lS(e){return{toQuerySyntax(){let t=Ie(e),{field:r}=e;return`${t}@${r}`}}}function dS(e){return{toQuerySyntax(){let{expression:t,negate:r}=e;return r?`NOT (${t})`:t}}}function pS(e){return{toQuerySyntax(){let t=Ie(e),{startTerm:r,otherTerms:a}=e,o=NE(a),n=`${r} ${o}`;return e.negate?`${t}(${n})`:n}}}function NE(e){return e.map(t=>{let{endTerm:r,maxKeywordsBetween:a}=t;return`near:${a} ${r}`}).join(" ")}function fS(e){return{toQuerySyntax(){let{field:t,value:r}=e,a=Ie(e),o=at(e.operator);return`${a}@${t}${o}${r}`}}}function mS(e){return{toQuerySyntax(){let t=Ie(e),{field:r,from:a,to:o}=e,n=at("isExactly");return`${t}@${r}${n}${a}..${o}`}}}function gS(e){return{toQuerySyntax(){let{name:t,parameters:r}=e,a=ME(r);return`$${t}(${a})`}}}function ME(e){return Object.entries(e).map(t=>{let[r,a]=t,o=typeof a=="string"?a:a.toQuerySyntax();return`${r}: ${o}`}).join(", ")}function hS(e){return{toQuerySyntax(){let t=Ie(e),{field:r,operator:a,value:o}=e,n=at(a),i=a==="fuzzyMatch"?` $quoteVar(value: ${o})`:`("${o}")`;return`${t}@${r}${n}${i}`}}}function yS(e){return{toQuerySyntax(){let{field:t}=e,r=Ie(e),a=at(e.operator),o=e.values.map(i=>`"${i}"`),n=o.length===1?o[0]:`(${o.join(",")})`;return`${r}@${t}${a}${n}`}}}function QE(){let e=[],t="and";return{addExpression(r){return e.push(r),this},addKeyword(r){return e.push(dS(r)),this},addNear(r){return e.push(pS(r)),this},addExactMatch(r){return e.push(uS(r)),this},addFieldExists(r){return e.push(lS(r)),this},addStringField(r){return e.push(yS(r)),this},addStringFacetField(r){return e.push(hS(r)),this},addNumericField(r){return e.push(fS(r)),this},addNumericRangeField(r){return e.push(mS(r)),this},addDateField(r){return e.push(sS(r)),this},addDateRangeField(r){return e.push(cS(r)),this},addQueryExtension(r){return e.push(gS(r)),this},joinUsing(r){return t=r,this},toQuerySyntax(){let r=LE(t),a=e.map(o=>o.toQuerySyntax()).join(`) ${r} (`);return e.length<=1?a:`(${a})`}}}function LE(e){return e==="and"?"AND":"OR"}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/**
 * @license
 *
 * Copyright 2022 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
}));
//# sourceMappingURL=headless.js.map
